(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Slate=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var copy=require("es5-ext/object/copy"),normalizeOptions=require("es5-ext/object/normalize-options"),ensureCallable=require("es5-ext/object/valid-callable"),map=require("es5-ext/object/map"),callable=require("es5-ext/object/valid-callable"),validValue=require("es5-ext/object/valid-value"),bind=Function.prototype.bind,defineProperty=Object.defineProperty,hasOwnProperty=Object.prototype.hasOwnProperty,define;define=function(name,desc,options){var value=validValue(desc)&&callable(desc.value),dgs;dgs=copy(desc);delete dgs.writable;delete dgs.value;dgs.get=function(){if(!options.overwriteDefinition&&hasOwnProperty.call(this,name))return value;desc.value=bind.call(value,options.resolveContext?options.resolveContext(this):this);defineProperty(this,name,desc);return this[name]};return dgs};module.exports=function(props){var options=normalizeOptions(arguments[1]);if(options.resolveContext!=null)ensureCallable(options.resolveContext);return map(props,function(desc,name){return define(name,desc,options)})}},{"es5-ext/object/copy":18,"es5-ext/object/map":26,"es5-ext/object/normalize-options":27,"es5-ext/object/valid-callable":32,"es5-ext/object/valid-value":33}],2:[function(require,module,exports){"use strict";var assign=require("es5-ext/object/assign"),normalizeOpts=require("es5-ext/object/normalize-options"),isCallable=require("es5-ext/object/is-callable"),contains=require("es5-ext/string/#/contains"),d;d=module.exports=function(dscr,value){var c,e,w,options,desc;if(arguments.length<2||typeof dscr!=="string"){options=value;value=dscr;dscr=null}else{options=arguments[2]}if(dscr==null){c=w=true;e=false}else{c=contains.call(dscr,"c");e=contains.call(dscr,"e");w=contains.call(dscr,"w")}desc={value:value,configurable:c,enumerable:e,writable:w};return!options?desc:assign(normalizeOpts(options),desc)};d.gs=function(dscr,get,set){var c,e,options,desc;if(typeof dscr!=="string"){options=set;set=get;get=dscr;dscr=null}else{options=arguments[3]}if(get==null){get=undefined}else if(!isCallable(get)){options=get;get=set=undefined}else if(set==null){set=undefined}else if(!isCallable(set)){options=set;set=undefined}if(dscr==null){c=true;e=false}else{c=contains.call(dscr,"c");e=contains.call(dscr,"e")}desc={get:get,set:set,configurable:c,enumerable:e};return!options?desc:assign(normalizeOpts(options),desc)}},{"es5-ext/object/assign":15,"es5-ext/object/is-callable":21,"es5-ext/object/normalize-options":27,"es5-ext/string/#/contains":34}],3:[function(require,module,exports){(function(process){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){if(typeof window!=="undefined"&&window&&typeof window.process!=="undefined"&&window.process.type==="renderer"){return true}return typeof document!=="undefined"&&document&&"WebkitAppearance"in document.documentElement.style||typeof window!=="undefined"&&window&&window.console&&(console.firebug||console.exception&&console.table)||typeof navigator!=="undefined"&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}if(!r&&typeof process!=="undefined"&&"env"in process){r=process.env.DEBUG}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}}).call(this,require("_process"))},{"./debug":4,_process:68}],4:[function(require,module,exports){exports=module.exports=createDebug.debug=createDebug["default"]=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevTime;function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0}return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args.unshift("%O")}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args)}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);if("function"===typeof exports.init){exports.init(debug)}return debug}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var split=(typeof namespaces==="string"?namespaces:"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:67}],5:[function(require,module,exports){"use strict";var GROUP_LEFT_TO_RIGHT,GROUP_RIGHT_TO_LEFT,EXPRESSION_LEFT_TO_RIGHT,EXPRESSION_RIGHT_TO_LEFT;GROUP_LEFT_TO_RIGHT="A-Za-zÀ-ÖØ-ö"+"ø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜"+"︀-﹯﻽-￿";GROUP_RIGHT_TO_LEFT="֑-߿יִ-﷽ﹰ-ﻼ";EXPRESSION_LEFT_TO_RIGHT=new RegExp("^[^"+GROUP_RIGHT_TO_LEFT+"]*["+GROUP_LEFT_TO_RIGHT+"]");EXPRESSION_RIGHT_TO_LEFT=new RegExp("^[^"+GROUP_LEFT_TO_RIGHT+"]*["+GROUP_RIGHT_TO_LEFT+"]");function direction(value){value=value.toString();if(EXPRESSION_RIGHT_TO_LEFT.test(value)){return"rtl"}if(EXPRESSION_LEFT_TO_RIGHT.test(value)){return"ltr"}return"neutral"}module.exports=direction},{}],6:[function(require,module,exports){"use strict";var value=require("../../object/valid-value");module.exports=function(){value(this).length=0;return this}},{"../../object/valid-value":33}],7:[function(require,module,exports){"use strict";var toPosInt=require("../../number/to-pos-integer"),value=require("../../object/valid-value"),indexOf=Array.prototype.indexOf,hasOwnProperty=Object.prototype.hasOwnProperty,abs=Math.abs,floor=Math.floor;module.exports=function(searchElement){var i,l,fromIndex,val;if(searchElement===searchElement){return indexOf.apply(this,arguments)}l=toPosInt(value(this).length);fromIndex=arguments[1];if(isNaN(fromIndex))fromIndex=0;else if(fromIndex>=0)fromIndex=floor(fromIndex);else fromIndex=toPosInt(this.length)-floor(abs(fromIndex));for(i=fromIndex;i<l;++i){if(hasOwnProperty.call(this,i)){val=this[i];if(val!==val)return i}}return-1}},{"../../number/to-pos-integer":13,"../../object/valid-value":33}],8:[function(require,module,exports){"use strict";var toString=Object.prototype.toString,id=toString.call(function(){return arguments}());module.exports=function(x){return toString.call(x)===id}},{}],9:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Math.sign:require("./shim")},{"./is-implemented":10,"./shim":11}],10:[function(require,module,exports){"use strict";module.exports=function(){var sign=Math.sign;if(typeof sign!=="function")return false;return sign(10)===1&&sign(-20)===-1}},{}],11:[function(require,module,exports){"use strict";module.exports=function(value){value=Number(value);if(isNaN(value)||value===0)return value;return value>0?1:-1}},{}],12:[function(require,module,exports){"use strict";var sign=require("../math/sign"),abs=Math.abs,floor=Math.floor;module.exports=function(value){if(isNaN(value))return 0;value=Number(value);if(value===0||!isFinite(value))return value;return sign(value)*floor(abs(value))}},{"../math/sign":9}],13:[function(require,module,exports){"use strict";var toInteger=require("./to-integer"),max=Math.max;module.exports=function(value){return max(0,toInteger(value))}},{"./to-integer":12}],14:[function(require,module,exports){"use strict";var callable=require("./valid-callable"),value=require("./valid-value"),bind=Function.prototype.bind,call=Function.prototype.call,keys=Object.keys,propertyIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=function(method,defVal){return function(obj,cb){var list,thisArg=arguments[2],compareFn=arguments[3];obj=Object(value(obj));callable(cb);list=keys(obj);if(compareFn){list.sort(typeof compareFn==="function"?bind.call(compareFn,obj):undefined)}if(typeof method!=="function")method=list[method];return call.call(method,list,function(key,index){if(!propertyIsEnumerable.call(obj,key))return defVal;return call.call(cb,thisArg,obj[key],key,obj,index)})}}},{"./valid-callable":32,"./valid-value":33}],15:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.assign:require("./shim")},{"./is-implemented":16,"./shim":17}],16:[function(require,module,exports){"use strict";module.exports=function(){var assign=Object.assign,obj;if(typeof assign!=="function")return false;obj={foo:"raz"};assign(obj,{bar:"dwa"},{trzy:"trzy"});return obj.foo+obj.bar+obj.trzy==="razdwatrzy"}},{}],17:[function(require,module,exports){"use strict";var keys=require("../keys"),value=require("../valid-value"),max=Math.max;module.exports=function(dest,src){var error,i,l=max(arguments.length,2),assign;dest=Object(value(dest));assign=function(key){try{dest[key]=src[key]}catch(e){if(!error)error=e}};for(i=1;i<l;++i){src=arguments[i];keys(src).forEach(assign)}if(error!==undefined)throw error;return dest}},{"../keys":23,"../valid-value":33}],18:[function(require,module,exports){"use strict";var assign=require("./assign"),value=require("./valid-value");module.exports=function(obj){var copy=Object(value(obj));if(copy!==obj)return copy;return assign({},obj)}},{"./assign":15,"./valid-value":33}],19:[function(require,module,exports){"use strict";var create=Object.create,shim;if(!require("./set-prototype-of/is-implemented")()){shim=require("./set-prototype-of/shim")}module.exports=function(){var nullObject,props,desc;if(!shim)return create;if(shim.level!==1)return create;nullObject={};props={};desc={configurable:false,enumerable:false,writable:true,value:undefined};Object.getOwnPropertyNames(Object.prototype).forEach(function(name){if(name==="__proto__"){props[name]={configurable:true,enumerable:false,writable:true,value:undefined};return}props[name]=desc});Object.defineProperties(nullObject,props);Object.defineProperty(shim,"nullPolyfill",{configurable:false,enumerable:false,writable:false,value:nullObject});return function(prototype,props){return create(prototype===null?nullObject:prototype,props)}}()},{"./set-prototype-of/is-implemented":30,"./set-prototype-of/shim":31}],20:[function(require,module,exports){"use strict";module.exports=require("./_iterate")("forEach")},{"./_iterate":14}],21:[function(require,module,exports){"use strict";module.exports=function(obj){return typeof obj==="function"}},{}],22:[function(require,module,exports){"use strict";var map={function:true,object:true};module.exports=function(x){return x!=null&&map[typeof x]||false}},{}],23:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.keys:require("./shim")},{"./is-implemented":24,"./shim":25}],24:[function(require,module,exports){"use strict";module.exports=function(){try{Object.keys("primitive");return true}catch(e){return false}}},{}],25:[function(require,module,exports){"use strict";var keys=Object.keys;module.exports=function(object){return keys(object==null?object:Object(object))}},{}],26:[function(require,module,exports){"use strict";var callable=require("./valid-callable"),forEach=require("./for-each"),call=Function.prototype.call;module.exports=function(obj,cb){var o={},thisArg=arguments[2];callable(cb);forEach(obj,function(value,key,obj,index){o[key]=call.call(cb,thisArg,value,key,obj,index)});return o}},{"./for-each":20,"./valid-callable":32}],27:[function(require,module,exports){"use strict";var forEach=Array.prototype.forEach,create=Object.create;var process=function(src,obj){var key;for(key in src)obj[key]=src[key]};module.exports=function(options){var result=create(null);forEach.call(arguments,function(options){if(options==null)return;process(Object(options),result)});return result}},{}],28:[function(require,module,exports){"use strict";var forEach=Array.prototype.forEach,create=Object.create;module.exports=function(arg){var set=create(null);forEach.call(arguments,function(name){set[name]=true});return set}},{}],29:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Object.setPrototypeOf:require("./shim")},{"./is-implemented":30,"./shim":31}],30:[function(require,module,exports){"use strict";var create=Object.create,getPrototypeOf=Object.getPrototypeOf,x={};module.exports=function(){var setPrototypeOf=Object.setPrototypeOf,customCreate=arguments[0]||create;if(typeof setPrototypeOf!=="function")return false;return getPrototypeOf(setPrototypeOf(customCreate(null),x))===x}},{}],31:[function(require,module,exports){"use strict";var isObject=require("../is-object"),value=require("../valid-value"),isPrototypeOf=Object.prototype.isPrototypeOf,defineProperty=Object.defineProperty,nullDesc={configurable:true,enumerable:false,writable:true,value:undefined},validate;validate=function(obj,prototype){value(obj);if(prototype===null||isObject(prototype))return obj;throw new TypeError("Prototype must be null or an object")};module.exports=function(status){var fn,set;if(!status)return null;if(status.level===2){if(status.set){set=status.set;fn=function(obj,prototype){set.call(validate(obj,prototype),prototype);return obj}}else{fn=function(obj,prototype){validate(obj,prototype).__proto__=prototype;return obj}}}else{fn=function self(obj,prototype){var isNullBase;validate(obj,prototype);isNullBase=isPrototypeOf.call(self.nullPolyfill,obj);if(isNullBase)delete self.nullPolyfill.__proto__;if(prototype===null)prototype=self.nullPolyfill;obj.__proto__=prototype;if(isNullBase)defineProperty(self.nullPolyfill,"__proto__",nullDesc);return obj}}return Object.defineProperty(fn,"level",{configurable:false,enumerable:false,writable:false,value:status.level})}(function(){var x=Object.create(null),y={},set,desc=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(desc){try{set=desc.set;set.call(x,y)}catch(ignore){}if(Object.getPrototypeOf(x)===y)return{set:set,level:2}}x.__proto__=y;if(Object.getPrototypeOf(x)===y)return{level:2};x={};x.__proto__=y;if(Object.getPrototypeOf(x)===y)return{level:1};return false}());require("../create")},{"../create":19,"../is-object":22,"../valid-value":33}],32:[function(require,module,exports){"use strict";module.exports=function(fn){if(typeof fn!=="function")throw new TypeError(fn+" is not a function");return fn}},{}],33:[function(require,module,exports){"use strict";module.exports=function(value){if(value==null)throw new TypeError("Cannot use null or undefined");return value}},{}],34:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?String.prototype.contains:require("./shim")},{"./is-implemented":35,"./shim":36}],35:[function(require,module,exports){"use strict";var str="razdwatrzy";module.exports=function(){if(typeof str.contains!=="function")return false;return str.contains("dwa")===true&&str.contains("foo")===false}},{}],36:[function(require,module,exports){"use strict";var indexOf=String.prototype.indexOf;module.exports=function(searchString){return indexOf.call(this,searchString,arguments[1])>-1}},{}],37:[function(require,module,exports){"use strict";var toString=Object.prototype.toString,id=toString.call("");module.exports=function(x){return typeof x==="string"||x&&typeof x==="object"&&(x instanceof String||toString.call(x)===id)||false}},{}],38:[function(require,module,exports){"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),contains=require("es5-ext/string/#/contains"),d=require("d"),Iterator=require("./"),defineProperty=Object.defineProperty,ArrayIterator;ArrayIterator=module.exports=function(arr,kind){if(!(this instanceof ArrayIterator))return new ArrayIterator(arr,kind);Iterator.call(this,arr);if(!kind)kind="value";else if(contains.call(kind,"key+value"))kind="key+value";else if(contains.call(kind,"key"))kind="key";else kind="value";defineProperty(this,"__kind__",d("",kind))};if(setPrototypeOf)setPrototypeOf(ArrayIterator,Iterator);ArrayIterator.prototype=Object.create(Iterator.prototype,{constructor:d(ArrayIterator),_resolve:d(function(i){if(this.__kind__==="value")return this.__list__[i];if(this.__kind__==="key+value")return[i,this.__list__[i]];return i}),toString:d(function(){return"[object Array Iterator]"})})},{"./":41,d:2,"es5-ext/object/set-prototype-of":29,"es5-ext/string/#/contains":34}],39:[function(require,module,exports){"use strict";var isArguments=require("es5-ext/function/is-arguments"),callable=require("es5-ext/object/valid-callable"),isString=require("es5-ext/string/is-string"),get=require("./get"),isArray=Array.isArray,call=Function.prototype.call,some=Array.prototype.some;module.exports=function(iterable,cb){var mode,thisArg=arguments[2],result,doBreak,broken,i,l,char,code;if(isArray(iterable)||isArguments(iterable))mode="array";else if(isString(iterable))mode="string";else iterable=get(iterable);callable(cb);doBreak=function(){broken=true};if(mode==="array"){some.call(iterable,function(value){call.call(cb,thisArg,value,doBreak);if(broken)return true});return}if(mode==="string"){l=iterable.length;for(i=0;i<l;++i){char=iterable[i];if(i+1<l){code=char.charCodeAt(0);if(code>=55296&&code<=56319)char+=iterable[++i]}call.call(cb,thisArg,char,doBreak);if(broken)break}return}result=iterable.next();while(!result.done){call.call(cb,thisArg,result.value,doBreak);if(broken)return;result=iterable.next()}}},{"./get":40,"es5-ext/function/is-arguments":8,"es5-ext/object/valid-callable":32,"es5-ext/string/is-string":37}],40:[function(require,module,exports){"use strict";var isArguments=require("es5-ext/function/is-arguments"),isString=require("es5-ext/string/is-string"),ArrayIterator=require("./array"),StringIterator=require("./string"),iterable=require("./valid-iterable"),iteratorSymbol=require("es6-symbol").iterator;module.exports=function(obj){if(typeof iterable(obj)[iteratorSymbol]==="function")return obj[iteratorSymbol]();if(isArguments(obj))return new ArrayIterator(obj);if(isString(obj))return new StringIterator(obj);return new ArrayIterator(obj)}},{"./array":38,"./string":43,"./valid-iterable":44,"es5-ext/function/is-arguments":8,"es5-ext/string/is-string":37,"es6-symbol":51}],41:[function(require,module,exports){"use strict";var clear=require("es5-ext/array/#/clear"),assign=require("es5-ext/object/assign"),callable=require("es5-ext/object/valid-callable"),value=require("es5-ext/object/valid-value"),d=require("d"),autoBind=require("d/auto-bind"),Symbol=require("es6-symbol"),defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,Iterator;module.exports=Iterator=function(list,context){if(!(this instanceof Iterator))return new Iterator(list,context);defineProperties(this,{__list__:d("w",value(list)),__context__:d("w",context),__nextIndex__:d("w",0)});if(!context)return;callable(context.on);context.on("_add",this._onAdd);context.on("_delete",this._onDelete);context.on("_clear",this._onClear)};defineProperties(Iterator.prototype,assign({constructor:d(Iterator),_next:d(function(){var i;if(!this.__list__)return;if(this.__redo__){i=this.__redo__.shift();if(i!==undefined)return i}if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}),next:d(function(){return this._createResult(this._next())}),_createResult:d(function(i){if(i===undefined)return{done:true,value:undefined};return{done:false,value:this._resolve(i)}}),_resolve:d(function(i){return this.__list__[i]}),_unBind:d(function(){this.__list__=null;delete this.__redo__;if(!this.__context__)return;this.__context__.off("_add",this._onAdd);this.__context__.off("_delete",this._onDelete);this.__context__.off("_clear",this._onClear);this.__context__=null}),toString:d(function(){return"[object Iterator]"})},autoBind({_onAdd:d(function(index){if(index>=this.__nextIndex__)return;++this.__nextIndex__;if(!this.__redo__){defineProperty(this,"__redo__",d("c",[index]));return}this.__redo__.forEach(function(redo,i){if(redo>=index)this.__redo__[i]=++redo},this);this.__redo__.push(index)}),_onDelete:d(function(index){var i;if(index>=this.__nextIndex__)return;--this.__nextIndex__;if(!this.__redo__)return;i=this.__redo__.indexOf(index);if(i!==-1)this.__redo__.splice(i,1);this.__redo__.forEach(function(redo,i){if(redo>index)this.__redo__[i]=--redo},this)}),_onClear:d(function(){if(this.__redo__)clear.call(this.__redo__);this.__nextIndex__=0})})));defineProperty(Iterator.prototype,Symbol.iterator,d(function(){return this}));defineProperty(Iterator.prototype,Symbol.toStringTag,d("","Iterator"))},{d:2,"d/auto-bind":1,"es5-ext/array/#/clear":6,"es5-ext/object/assign":15,"es5-ext/object/valid-callable":32,"es5-ext/object/valid-value":33,"es6-symbol":51}],42:[function(require,module,exports){"use strict";var isArguments=require("es5-ext/function/is-arguments"),isString=require("es5-ext/string/is-string"),iteratorSymbol=require("es6-symbol").iterator,isArray=Array.isArray;module.exports=function(value){if(value==null)return false;if(isArray(value))return true;if(isString(value))return true;if(isArguments(value))return true;return typeof value[iteratorSymbol]==="function"}},{"es5-ext/function/is-arguments":8,"es5-ext/string/is-string":37,"es6-symbol":51}],43:[function(require,module,exports){"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),d=require("d"),Iterator=require("./"),defineProperty=Object.defineProperty,StringIterator;StringIterator=module.exports=function(str){if(!(this instanceof StringIterator))return new StringIterator(str);str=String(str);Iterator.call(this,str);defineProperty(this,"__length__",d("",str.length))};if(setPrototypeOf)setPrototypeOf(StringIterator,Iterator);StringIterator.prototype=Object.create(Iterator.prototype,{constructor:d(StringIterator),_next:d(function(){if(!this.__list__)return;if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}),_resolve:d(function(i){var char=this.__list__[i],code;if(this.__nextIndex__===this.__length__)return char;code=char.charCodeAt(0);if(code>=55296&&code<=56319)return char+this.__list__[this.__nextIndex__++];return char}),toString:d(function(){return"[object String Iterator]"})})},{"./":41,d:2,"es5-ext/object/set-prototype-of":29}],44:[function(require,module,exports){"use strict";var isIterable=require("./is-iterable");module.exports=function(value){if(!isIterable(value))throw new TypeError(value+" is not iterable");return value}},{"./is-iterable":42}],45:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Map:require("./polyfill")},{"./is-implemented":46,"./polyfill":50}],46:[function(require,module,exports){"use strict";module.exports=function(){var map,iterator,result;if(typeof Map!=="function")return false;try{map=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return false}if(String(map)!=="[object Map]")return false;if(map.size!==3)return false;if(typeof map.clear!=="function")return false;if(typeof map.delete!=="function")return false;if(typeof map.entries!=="function")return false;if(typeof map.forEach!=="function")return false;if(typeof map.get!=="function")return false;if(typeof map.has!=="function")return false;if(typeof map.keys!=="function")return false;if(typeof map.set!=="function")return false;if(typeof map.values!=="function")return false;iterator=map.entries();result=iterator.next();if(result.done!==false)return false;if(!result.value)return false;if(result.value[0]!=="raz")return false;if(result.value[1]!=="one")return false;return true}},{}],47:[function(require,module,exports){"use strict";module.exports=function(){if(typeof Map==="undefined")return false;return Object.prototype.toString.call(new Map)==="[object Map]"}()},{}],48:[function(require,module,exports){"use strict";module.exports=require("es5-ext/object/primitive-set")("key","value","key+value")},{"es5-ext/object/primitive-set":28}],49:[function(require,module,exports){"use strict";var setPrototypeOf=require("es5-ext/object/set-prototype-of"),d=require("d"),Iterator=require("es6-iterator"),toStringTagSymbol=require("es6-symbol").toStringTag,kinds=require("./iterator-kinds"),defineProperties=Object.defineProperties,unBind=Iterator.prototype._unBind,MapIterator;MapIterator=module.exports=function(map,kind){if(!(this instanceof MapIterator))return new MapIterator(map,kind);Iterator.call(this,map.__mapKeysData__,map);if(!kind||!kinds[kind])kind="key+value";defineProperties(this,{__kind__:d("",kind),__values__:d("w",map.__mapValuesData__)})};if(setPrototypeOf)setPrototypeOf(MapIterator,Iterator);MapIterator.prototype=Object.create(Iterator.prototype,{constructor:d(MapIterator),_resolve:d(function(i){if(this.__kind__==="value")return this.__values__[i];if(this.__kind__==="key")return this.__list__[i];return[this.__list__[i],this.__values__[i]]}),_unBind:d(function(){this.__values__=null;unBind.call(this)}),toString:d(function(){return"[object Map Iterator]"})});Object.defineProperty(MapIterator.prototype,toStringTagSymbol,d("c","Map Iterator"))},{"./iterator-kinds":48,d:2,"es5-ext/object/set-prototype-of":29,"es6-iterator":41,"es6-symbol":51}],50:[function(require,module,exports){"use strict";var clear=require("es5-ext/array/#/clear"),eIndexOf=require("es5-ext/array/#/e-index-of"),setPrototypeOf=require("es5-ext/object/set-prototype-of"),callable=require("es5-ext/object/valid-callable"),validValue=require("es5-ext/object/valid-value"),d=require("d"),ee=require("event-emitter"),Symbol=require("es6-symbol"),iterator=require("es6-iterator/valid-iterable"),forOf=require("es6-iterator/for-of"),Iterator=require("./lib/iterator"),isNative=require("./is-native-implemented"),call=Function.prototype.call,defineProperties=Object.defineProperties,getPrototypeOf=Object.getPrototypeOf,MapPoly;module.exports=MapPoly=function(){var iterable=arguments[0],keys,values,self;if(!(this instanceof MapPoly))throw new TypeError("Constructor requires 'new'");if(isNative&&setPrototypeOf&&Map!==MapPoly){self=setPrototypeOf(new Map,getPrototypeOf(this))}else{self=this}if(iterable!=null)iterator(iterable);defineProperties(self,{__mapKeysData__:d("c",keys=[]),__mapValuesData__:d("c",values=[])});if(!iterable)return self;forOf(iterable,function(value){var key=validValue(value)[0];value=value[1];if(eIndexOf.call(keys,key)!==-1)return;keys.push(key);values.push(value)},self);return self};if(isNative){if(setPrototypeOf)setPrototypeOf(MapPoly,Map);MapPoly.prototype=Object.create(Map.prototype,{constructor:d(MapPoly)})}ee(defineProperties(MapPoly.prototype,{clear:d(function(){if(!this.__mapKeysData__.length)return;clear.call(this.__mapKeysData__);clear.call(this.__mapValuesData__);this.emit("_clear")}),delete:d(function(key){var index=eIndexOf.call(this.__mapKeysData__,key);if(index===-1)return false;this.__mapKeysData__.splice(index,1);this.__mapValuesData__.splice(index,1);this.emit("_delete",index,key);return true}),entries:d(function(){return new Iterator(this,"key+value")}),forEach:d(function(cb){var thisArg=arguments[1],iterator,result;callable(cb);iterator=this.entries();result=iterator._next();while(result!==undefined){call.call(cb,thisArg,this.__mapValuesData__[result],this.__mapKeysData__[result],this);result=iterator._next()}}),get:d(function(key){var index=eIndexOf.call(this.__mapKeysData__,key);if(index===-1)return;return this.__mapValuesData__[index]}),has:d(function(key){return eIndexOf.call(this.__mapKeysData__,key)!==-1}),keys:d(function(){return new Iterator(this,"key")}),set:d(function(key,value){var index=eIndexOf.call(this.__mapKeysData__,key),emit;if(index===-1){index=this.__mapKeysData__.push(key)-1;emit=true}this.__mapValuesData__[index]=value;if(emit)this.emit("_add",index,key);return this}),size:d.gs(function(){return this.__mapKeysData__.length}),values:d(function(){return new Iterator(this,"value")}),toString:d(function(){return"[object Map]"})}));Object.defineProperty(MapPoly.prototype,Symbol.iterator,d(function(){return this.entries()}));Object.defineProperty(MapPoly.prototype,Symbol.toStringTag,d("c","Map"))},{"./is-native-implemented":47,"./lib/iterator":49,d:2,"es5-ext/array/#/clear":6,"es5-ext/array/#/e-index-of":7,"es5-ext/object/set-prototype-of":29,"es5-ext/object/valid-callable":32,"es5-ext/object/valid-value":33,"es6-iterator/for-of":39,"es6-iterator/valid-iterable":44,"es6-symbol":51,"event-emitter":57}],51:[function(require,module,exports){"use strict";module.exports=require("./is-implemented")()?Symbol:require("./polyfill")},{"./is-implemented":52,"./polyfill":54}],52:[function(require,module,exports){"use strict";var validTypes={object:true,symbol:true};module.exports=function(){var symbol;if(typeof Symbol!=="function")return false;symbol=Symbol("test symbol");try{String(symbol)}catch(e){return false}if(!validTypes[typeof Symbol.iterator])return false;if(!validTypes[typeof Symbol.toPrimitive])return false;if(!validTypes[typeof Symbol.toStringTag])return false;return true}},{}],53:[function(require,module,exports){"use strict";module.exports=function(x){if(!x)return false;if(typeof x==="symbol")return true
;if(!x.constructor)return false;if(x.constructor.name!=="Symbol")return false;return x[x.constructor.toStringTag]==="Symbol"}},{}],54:[function(require,module,exports){"use strict";var d=require("d"),validateSymbol=require("./validate-symbol"),create=Object.create,defineProperties=Object.defineProperties,defineProperty=Object.defineProperty,objPrototype=Object.prototype,NativeSymbol,SymbolPolyfill,HiddenSymbol,globalSymbols=create(null),isNativeSafe;if(typeof Symbol==="function"){NativeSymbol=Symbol;try{String(NativeSymbol());isNativeSafe=true}catch(ignore){}}var generateName=function(){var created=create(null);return function(desc){var postfix=0,name,ie11BugWorkaround;while(created[desc+(postfix||"")])++postfix;desc+=postfix||"";created[desc]=true;name="@@"+desc;defineProperty(objPrototype,name,d.gs(null,function(value){if(ie11BugWorkaround)return;ie11BugWorkaround=true;defineProperty(this,name,d(value));ie11BugWorkaround=false}));return name}}();HiddenSymbol=function Symbol(description){if(this instanceof HiddenSymbol)throw new TypeError("Symbol is not a constructor");return SymbolPolyfill(description)};module.exports=SymbolPolyfill=function Symbol(description){var symbol;if(this instanceof Symbol)throw new TypeError("Symbol is not a constructor");if(isNativeSafe)return NativeSymbol(description);symbol=create(HiddenSymbol.prototype);description=description===undefined?"":String(description);return defineProperties(symbol,{__description__:d("",description),__name__:d("",generateName(description))})};defineProperties(SymbolPolyfill,{for:d(function(key){if(globalSymbols[key])return globalSymbols[key];return globalSymbols[key]=SymbolPolyfill(String(key))}),keyFor:d(function(s){var key;validateSymbol(s);for(key in globalSymbols)if(globalSymbols[key]===s)return key}),hasInstance:d("",NativeSymbol&&NativeSymbol.hasInstance||SymbolPolyfill("hasInstance")),isConcatSpreadable:d("",NativeSymbol&&NativeSymbol.isConcatSpreadable||SymbolPolyfill("isConcatSpreadable")),iterator:d("",NativeSymbol&&NativeSymbol.iterator||SymbolPolyfill("iterator")),match:d("",NativeSymbol&&NativeSymbol.match||SymbolPolyfill("match")),replace:d("",NativeSymbol&&NativeSymbol.replace||SymbolPolyfill("replace")),search:d("",NativeSymbol&&NativeSymbol.search||SymbolPolyfill("search")),species:d("",NativeSymbol&&NativeSymbol.species||SymbolPolyfill("species")),split:d("",NativeSymbol&&NativeSymbol.split||SymbolPolyfill("split")),toPrimitive:d("",NativeSymbol&&NativeSymbol.toPrimitive||SymbolPolyfill("toPrimitive")),toStringTag:d("",NativeSymbol&&NativeSymbol.toStringTag||SymbolPolyfill("toStringTag")),unscopables:d("",NativeSymbol&&NativeSymbol.unscopables||SymbolPolyfill("unscopables"))});defineProperties(HiddenSymbol.prototype,{constructor:d(SymbolPolyfill),toString:d("",function(){return this.__name__})});defineProperties(SymbolPolyfill.prototype,{toString:d(function(){return"Symbol ("+validateSymbol(this).__description__+")"}),valueOf:d(function(){return validateSymbol(this)})});defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toPrimitive,d("",function(){var symbol=validateSymbol(this);if(typeof symbol==="symbol")return symbol;return symbol.toString()}));defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toStringTag,d("c","Symbol"));defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toStringTag,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toStringTag]));defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toPrimitive,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive]))},{"./validate-symbol":55,d:2}],55:[function(require,module,exports){"use strict";var isSymbol=require("./is-symbol");module.exports=function(value){if(!isSymbol(value))throw new TypeError(value+" is not a symbol");return value}},{"./is-symbol":53}],56:[function(require,module,exports){(function(global){(function(root){var freeExports=typeof exports=="object"&&exports;var freeModule=typeof module=="object"&&module&&module.exports==freeExports&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal){root=freeGlobal}var regexSymbolWithCombiningMarks=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g;var regexSurrogatePair=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g;var reverse=function(string){string=string.replace(regexSymbolWithCombiningMarks,function($0,$1,$2){return reverse($2)+$1}).replace(regexSurrogatePair,"$2$1");var result="";var index=string.length;while(index--){result+=string.charAt(index)}return result};var esrever={version:"0.2.0",reverse:reverse};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define(function(){return esrever})}else if(freeExports&&!freeExports.nodeType){if(freeModule){freeModule.exports=esrever}else{for(var key in esrever){esrever.hasOwnProperty(key)&&(freeExports[key]=esrever[key])}}}else{root.esrever=esrever}})(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],57:[function(require,module,exports){"use strict";var d=require("d"),callable=require("es5-ext/object/valid-callable"),apply=Function.prototype.apply,call=Function.prototype.call,create=Object.create,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,hasOwnProperty=Object.prototype.hasOwnProperty,descriptor={configurable:true,enumerable:false,writable:true},on,once,off,emit,methods,descriptors,base;on=function(type,listener){var data;callable(listener);if(!hasOwnProperty.call(this,"__ee__")){data=descriptor.value=create(null);defineProperty(this,"__ee__",descriptor);descriptor.value=null}else{data=this.__ee__}if(!data[type])data[type]=listener;else if(typeof data[type]==="object")data[type].push(listener);else data[type]=[data[type],listener];return this};once=function(type,listener){var once,self;callable(listener);self=this;on.call(this,type,once=function(){off.call(self,type,once);apply.call(listener,this,arguments)});once.__eeOnceListener__=listener;return this};off=function(type,listener){var data,listeners,candidate,i;callable(listener);if(!hasOwnProperty.call(this,"__ee__"))return this;data=this.__ee__;if(!data[type])return this;listeners=data[type];if(typeof listeners==="object"){for(i=0;candidate=listeners[i];++i){if(candidate===listener||candidate.__eeOnceListener__===listener){if(listeners.length===2)data[type]=listeners[i?0:1];else listeners.splice(i,1)}}}else{if(listeners===listener||listeners.__eeOnceListener__===listener){delete data[type]}}return this};emit=function(type){var i,l,listener,listeners,args;if(!hasOwnProperty.call(this,"__ee__"))return;listeners=this.__ee__[type];if(!listeners)return;if(typeof listeners==="object"){l=arguments.length;args=new Array(l-1);for(i=1;i<l;++i)args[i-1]=arguments[i];listeners=listeners.slice();for(i=0;listener=listeners[i];++i){apply.call(listener,this,args)}}else{switch(arguments.length){case 1:call.call(listeners,this);break;case 2:call.call(listeners,this,arguments[1]);break;case 3:call.call(listeners,this,arguments[1],arguments[2]);break;default:l=arguments.length;args=new Array(l-1);for(i=1;i<l;++i){args[i-1]=arguments[i]}apply.call(listeners,this,args)}}};methods={on:on,once:once,off:off,emit:emit};descriptors={on:d(on),once:d(once),off:d(off),emit:d(emit)};base=defineProperties({},descriptors);module.exports=exports=function(o){return o==null?create(base):defineProperties(Object(o),descriptors)};exports.methods=methods},{d:2,"es5-ext/object/valid-callable":32}],58:[function(require,module,exports){"use strict";function makeEmptyFunction(arg){return function(){return arg}}var emptyFunction=function emptyFunction(){};emptyFunction.thatReturns=makeEmptyFunction;emptyFunction.thatReturnsFalse=makeEmptyFunction(false);emptyFunction.thatReturnsTrue=makeEmptyFunction(true);emptyFunction.thatReturnsNull=makeEmptyFunction(null);emptyFunction.thatReturnsThis=function(){return this};emptyFunction.thatReturnsArgument=function(arg){return arg};module.exports=emptyFunction},{}],59:[function(require,module,exports){"use strict";var validateFormat=function validateFormat(format){};if("production"!=="production"){validateFormat=function validateFormat(format){if(format===undefined){throw new Error("invariant requires an error message argument")}}}function invariant(condition,format,a,b,c,d,e,f){validateFormat(format);if(!condition){var error;if(format===undefined){error=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var args=[a,b,c,d,e,f];var argIndex=0;error=new Error(format.replace(/%s/g,function(){return args[argIndex++]}));error.name="Invariant Violation"}error.framesToPop=1;throw error}}module.exports=invariant},{}],60:[function(require,module,exports){"use strict";var emptyFunction=require("./emptyFunction");var warning=emptyFunction;if("production"!=="production"){(function(){var printWarning=function printWarning(format){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}var argIndex=0;var message="Warning: "+format.replace(/%s/g,function(){return args[argIndex++]});if(typeof console!=="undefined"){console.error(message)}try{throw new Error(message)}catch(x){}};warning=function warning(condition,format){if(format===undefined){throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument")}if(format.indexOf("Failed Composite propType: ")===0){return}if(!condition){for(var _len2=arguments.length,args=Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++){args[_key2-2]=arguments[_key2]}printWarning.apply(undefined,[format].concat(args))}}})()}module.exports=warning},{"./emptyFunction":58}],61:[function(require,module,exports){module.exports=getDocument;var DOCUMENT_NODE=9;function isDocument(d){return d&&d.nodeType===DOCUMENT_NODE}function getDocument(node){if(isDocument(node)){return node}else if(isDocument(node.ownerDocument)){return node.ownerDocument}else if(isDocument(node.document)){return node.document}else if(node.parentNode){return getDocument(node.parentNode)}else if(node.commonAncestorContainer){return getDocument(node.commonAncestorContainer)}else if(node.startContainer){return getDocument(node.startContainer)}else if(node.anchorNode){return getDocument(node.anchorNode)}}},{}],62:[function(require,module,exports){var getDocument=require("get-document");module.exports=getWindow;var needsIEFallback=require("./needs-ie-fallback");function isWindow(w){return w&&w.window===w}function getWindow(node){if(isWindow(node)){return node}var doc=getDocument(node);if(needsIEFallback){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win}else{return doc.defaultView||doc.parentWindow}}},{"./needs-ie-fallback":63,"get-document":61}],63:[function(require,module,exports){module.exports=!!document.attachEvent&&window!==document.parentWindow},{}],64:[function(require,module,exports){var has=Object.prototype.hasOwnProperty;var toString=Object.prototype.toString;function isEmpty(val){if(val==null)return true;if("boolean"==typeof val)return false;if("number"==typeof val)return val===0;if("string"==typeof val)return val.length===0;if("function"==typeof val)return val.length===0;if(Array.isArray(val))return val.length===0;if(val instanceof Error)return val.message==="";if(val.toString==toString){switch(val.toString()){case"[object File]":case"[object Map]":case"[object Set]":{return val.size===0}case"[object Object]":{for(var key in val){if(has.call(val,key))return false}return true}}}return false}module.exports=isEmpty},{}],65:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var isBrowser=exports.isBrowser=(typeof window==="undefined"?"undefined":_typeof(window))==="object"&&(typeof document==="undefined"?"undefined":_typeof(document))==="object"&&document.nodeType===9;exports.default=isBrowser},{}],66:[function(require,module,exports){exports=module.exports=function(searchInput){if(searchInput&&"object"===typeof searchInput){var hasKeyCode=searchInput.which||searchInput.keyCode||searchInput.charCode;if(hasKeyCode)searchInput=hasKeyCode}if("number"===typeof searchInput)return names[searchInput];var search=String(searchInput);var foundNamedKey=codes[search.toLowerCase()];if(foundNamedKey)return foundNamedKey;var foundNamedKey=aliases[search.toLowerCase()];if(foundNamedKey)return foundNamedKey;if(search.length===1)return search.charCodeAt(0);return undefined};var codes=exports.code=exports.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};var aliases=exports.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(i=97;i<123;i++)codes[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)codes[i-48]=i;for(i=1;i<13;i++)codes["f"+i]=i+111;for(i=0;i<10;i++)codes["numpad "+i]=i+96;var names=exports.names=exports.title={};for(i in codes)names[codes[i]]=i;for(var alias in aliases){codes[alias]=aliases[alias]}},{}],67:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==="string"&&val.length>0){return parse(val)}else if(type==="number"&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))};function parse(str){str=String(str);if(str.length>1e4){return}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return}var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+"d"}if(ms>=h){return Math.round(ms/h)+"h"}if(ms>=m){return Math.round(ms/m)+"m"}if(ms>=s){return Math.round(ms/s)+"s"}return ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n){return}if(ms<n*1.5){return Math.floor(ms/n)+" "+name}return Math.ceil(ms/n)+" "+name+"s"}},{}],68:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],69:[function(require,module,exports){(function(process){"use strict";if(process.env.NODE_ENV!=="production"){var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var ReactPropTypesSecret=require("./lib/ReactPropTypesSecret");var loggedTypeFailures={}}function checkPropTypes(typeSpecs,values,location,componentName,getStack){if(process.env.NODE_ENV!=="production"){for(var typeSpecName in typeSpecs){if(typeSpecs.hasOwnProperty(typeSpecName)){var error;try{invariant(typeof typeSpecs[typeSpecName]==="function","%s: %s type `%s` is invalid; it must be a function, usually from "+"React.PropTypes.",componentName||"React class",location,typeSpecName);error=typeSpecs[typeSpecName](values,typeSpecName,componentName,location,null,ReactPropTypesSecret)}catch(ex){error=ex}warning(!error||error instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker "+"function must return `null` or an `Error` but returned a %s. "+"You may have forgotten to pass an argument to the type checker "+"creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and "+"shape all require an argument).",componentName||"React class",location,typeSpecName,typeof error);if(error instanceof Error&&!(error.message in loggedTypeFailures)){loggedTypeFailures[error.message]=true;var stack=getStack?getStack():"";warning(false,"Failed %s type: %s%s",location,error.message,stack!=null?stack:"")}}}}}module.exports=checkPropTypes}).call(this,require("_process"))},{"./lib/ReactPropTypesSecret":73,_process:68,"fbjs/lib/invariant":59,"fbjs/lib/warning":60}],70:[function(require,module,exports){"use strict";var emptyFunction=require("fbjs/lib/emptyFunction");var invariant=require("fbjs/lib/invariant");module.exports=function(){function shim(){invariant(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. "+"Use PropTypes.checkPropTypes() to call them. "+"Read more at http://fb.me/use-check-prop-types")}shim.isRequired=shim;function getShim(){return shim}var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim};ReactPropTypes.checkPropTypes=emptyFunction;ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes}},{"fbjs/lib/emptyFunction":58,"fbjs/lib/invariant":59}],71:[function(require,module,exports){(function(process){"use strict";var emptyFunction=require("fbjs/lib/emptyFunction");var invariant=require("fbjs/lib/invariant");var warning=require("fbjs/lib/warning");var ReactPropTypesSecret=require("./lib/ReactPropTypesSecret");var checkPropTypes=require("./checkPropTypes");module.exports=function(isValidElement,throwOnDirectAccess){var ITERATOR_SYMBOL=typeof Symbol==="function"&&Symbol.iterator;var FAUX_ITERATOR_SYMBOL="@@iterator";function getIteratorFn(maybeIterable){var iteratorFn=maybeIterable&&(ITERATOR_SYMBOL&&maybeIterable[ITERATOR_SYMBOL]||maybeIterable[FAUX_ITERATOR_SYMBOL]);if(typeof iteratorFn==="function"){return iteratorFn}}var ANONYMOUS="<<anonymous>>";var ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),symbol:createPrimitiveTypeChecker("symbol"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker};function is(x,y){if(x===y){return x!==0||1/x===1/y}else{return x!==x&&y!==y}}function PropTypeError(message){this.message=message;this.stack=""}PropTypeError.prototype=Error.prototype;function createChainableTypeChecker(validate){if(process.env.NODE_ENV!=="production"){var manualPropTypeCallCache={};var manualPropTypeWarningCount=0}function checkType(isRequired,props,propName,componentName,location,propFullName,secret){componentName=componentName||ANONYMOUS;propFullName=propFullName||propName;if(secret!==ReactPropTypesSecret){if(throwOnDirectAccess){invariant(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. "+"Use `PropTypes.checkPropTypes()` to call them. "+"Read more at http://fb.me/use-check-prop-types")}else if(process.env.NODE_ENV!=="production"&&typeof console!=="undefined"){var cacheKey=componentName+":"+propName;if(!manualPropTypeCallCache[cacheKey]&&manualPropTypeWarningCount<3){warning(false,"You are manually calling a React.PropTypes validation "+"function for the `%s` prop on `%s`. This is deprecated "+"and will throw in the standalone `prop-types` package. "+"You may be seeing this warning due to a third-party PropTypes "+"library. See https://fb.me/react-warning-dont-call-proptypes "+"for details.",propFullName,componentName);manualPropTypeCallCache[cacheKey]=true;manualPropTypeWarningCount++}}}if(props[propName]==null){if(isRequired){if(props[propName]===null){return new PropTypeError("The "+location+" `"+propFullName+"` is marked as required "+("in `"+componentName+"`, but its value is `null`."))}return new PropTypeError("The "+location+" `"+propFullName+"` is marked as required in "+("`"+componentName+"`, but its value is `undefined`."))}return null}else{return validate(props,propName,componentName,location,propFullName)}}var chainedCheckType=checkType.bind(null,false);chainedCheckType.isRequired=checkType.bind(null,true);return chainedCheckType}function createPrimitiveTypeChecker(expectedType){function validate(props,propName,componentName,location,propFullName,secret){var propValue=props[propName];var propType=getPropType(propValue);if(propType!==expectedType){var preciseType=getPreciseType(propValue);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+preciseType+"` supplied to `"+componentName+"`, expected ")+("`"+expectedType+"`."))}return null}return createChainableTypeChecker(validate)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunction.thatReturnsNull)}function createArrayOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=="function"){return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside arrayOf.")}var propValue=props[propName];if(!Array.isArray(propValue)){var propType=getPropType(propValue);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an array."))}for(var i=0;i<propValue.length;i++){var error=typeChecker(propValue,i,componentName,location,propFullName+"["+i+"]",ReactPropTypesSecret);if(error instanceof Error){return error}}return null}return createChainableTypeChecker(validate)}function createElementTypeChecker(){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];if(!isValidElement(propValue)){var propType=getPropType(propValue);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected a single ReactElement."))}return null}return createChainableTypeChecker(validate)}function createInstanceTypeChecker(expectedClass){function validate(props,propName,componentName,location,propFullName){if(!(props[propName]instanceof expectedClass)){var expectedClassName=expectedClass.name||ANONYMOUS;var actualClassName=getClassName(props[propName]);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+actualClassName+"` supplied to `"+componentName+"`, expected ")+("instance of `"+expectedClassName+"`."))}return null}return createChainableTypeChecker(validate)}function createEnumTypeChecker(expectedValues){if(!Array.isArray(expectedValues)){process.env.NODE_ENV!=="production"?warning(false,"Invalid argument supplied to oneOf, expected an instance of array."):void 0;return emptyFunction.thatReturnsNull}function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];for(var i=0;i<expectedValues.length;i++){if(is(propValue,expectedValues[i])){return null}}var valuesString=JSON.stringify(expectedValues);return new PropTypeError("Invalid "+location+" `"+propFullName+"` of value `"+propValue+"` "+("supplied to `"+componentName+"`, expected one of "+valuesString+"."))}return createChainableTypeChecker(validate)}function createObjectOfTypeChecker(typeChecker){function validate(props,propName,componentName,location,propFullName){if(typeof typeChecker!=="function"){return new PropTypeError("Property `"+propFullName+"` of component `"+componentName+"` has invalid PropType notation inside objectOf.")}var propValue=props[propName];var propType=getPropType(propValue);if(propType!=="object"){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type "+("`"+propType+"` supplied to `"+componentName+"`, expected an object."))}for(var key in propValue){if(propValue.hasOwnProperty(key)){var error=typeChecker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error instanceof Error){return error}}}return null}return createChainableTypeChecker(validate)}function createUnionTypeChecker(arrayOfTypeCheckers){if(!Array.isArray(arrayOfTypeCheckers)){process.env.NODE_ENV!=="production"?warning(false,"Invalid argument supplied to oneOfType, expected an instance of array."):void 0;return emptyFunction.thatReturnsNull}function validate(props,propName,componentName,location,propFullName){for(var i=0;i<arrayOfTypeCheckers.length;i++){var checker=arrayOfTypeCheckers[i];if(checker(props,propName,componentName,location,propFullName,ReactPropTypesSecret)==null){return null}}return new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to "+("`"+componentName+"`."))}return createChainableTypeChecker(validate)}function createNodeChecker(){function validate(props,propName,componentName,location,propFullName){if(!isNode(props[propName])){return new PropTypeError("Invalid "+location+" `"+propFullName+"` supplied to "+("`"+componentName+"`, expected a ReactNode."))}return null}return createChainableTypeChecker(validate)}function createShapeTypeChecker(shapeTypes){function validate(props,propName,componentName,location,propFullName){var propValue=props[propName];var propType=getPropType(propValue);if(propType!=="object"){return new PropTypeError("Invalid "+location+" `"+propFullName+"` of type `"+propType+"` "+("supplied to `"+componentName+"`, expected `object`."))}for(var key in shapeTypes){var checker=shapeTypes[key];if(!checker){continue}var error=checker(propValue,key,componentName,location,propFullName+"."+key,ReactPropTypesSecret);if(error){return error}}return null}return createChainableTypeChecker(validate)}function isNode(propValue){switch(typeof propValue){case"number":case"string":case"undefined":return true;case"boolean":return!propValue;case"object":if(Array.isArray(propValue)){return propValue.every(isNode)}if(propValue===null||isValidElement(propValue)){return true}var iteratorFn=getIteratorFn(propValue);if(iteratorFn){var iterator=iteratorFn.call(propValue);var step;if(iteratorFn!==propValue.entries){while(!(step=iterator.next()).done){if(!isNode(step.value)){return false}}}else{while(!(step=iterator.next()).done){var entry=step.value;if(entry){if(!isNode(entry[1])){return false}}}}}else{return false}return true;default:return false}}function isSymbol(propType,propValue){if(propType==="symbol"){return true}if(propValue["@@toStringTag"]==="Symbol"){return true}if(typeof Symbol==="function"&&propValue instanceof Symbol){return true}return false}function getPropType(propValue){var propType=typeof propValue;if(Array.isArray(propValue)){return"array"}if(propValue instanceof RegExp){return"object"}if(isSymbol(propType,propValue)){return"symbol"}return propType}function getPreciseType(propValue){var propType=getPropType(propValue);if(propType==="object"){if(propValue instanceof Date){return"date"}else if(propValue instanceof RegExp){return"regexp"}}return propType}function getClassName(propValue){if(!propValue.constructor||!propValue.constructor.name){return ANONYMOUS}return propValue.constructor.name}ReactPropTypes.checkPropTypes=checkPropTypes;ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes}}).call(this,require("_process"))},{"./checkPropTypes":69,"./lib/ReactPropTypesSecret":73,_process:68,"fbjs/lib/emptyFunction":58,"fbjs/lib/invariant":59,"fbjs/lib/warning":60}],72:[function(require,module,exports){(function(process){if(process.env.NODE_ENV!=="production"){var REACT_ELEMENT_TYPE=typeof Symbol==="function"&&Symbol.for&&Symbol.for("react.element")||60103;var isValidElement=function(object){return typeof object==="object"&&object!==null&&object.$$typeof===REACT_ELEMENT_TYPE};var throwOnDirectAccess=true;module.exports=require("./factoryWithTypeCheckers")(isValidElement,throwOnDirectAccess)}else{module.exports=require("./factoryWithThrowingShims")()}}).call(this,require("_process"))},{"./factoryWithThrowingShims":70,"./factoryWithTypeCheckers":71,_process:68}],73:[function(require,module,exports){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},{}],74:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true})
;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=window.React;var _react2=_interopRequireDefault(_react);var _reactDom=window.ReactDOM;var _reactDom2=_interopRequireDefault(_reactDom);var _propTypes=require("prop-types");var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var KEYCODES={ESCAPE:27};var Portal=function(_React$Component){_inherits(Portal,_React$Component);function Portal(){_classCallCheck(this,Portal);var _this=_possibleConstructorReturn(this,(Portal.__proto__||Object.getPrototypeOf(Portal)).call(this));_this.state={active:false};_this.handleWrapperClick=_this.handleWrapperClick.bind(_this);_this.closePortal=_this.closePortal.bind(_this);_this.handleOutsideMouseClick=_this.handleOutsideMouseClick.bind(_this);_this.handleKeydown=_this.handleKeydown.bind(_this);_this.portal=null;_this.node=null;return _this}_createClass(Portal,[{key:"componentDidMount",value:function componentDidMount(){if(this.props.closeOnEsc){document.addEventListener("keydown",this.handleKeydown)}if(this.props.closeOnOutsideClick){document.addEventListener("mouseup",this.handleOutsideMouseClick);document.addEventListener("touchstart",this.handleOutsideMouseClick)}if(this.props.isOpened){this.openPortal()}}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(newProps){if(typeof newProps.isOpened!=="undefined"){if(newProps.isOpened){if(this.state.active){this.renderPortal(newProps)}else{this.openPortal(newProps)}}if(!newProps.isOpened&&this.state.active){this.closePortal()}}if(typeof newProps.isOpened==="undefined"&&this.state.active){this.renderPortal(newProps)}}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.props.closeOnEsc){document.removeEventListener("keydown",this.handleKeydown)}if(this.props.closeOnOutsideClick){document.removeEventListener("mouseup",this.handleOutsideMouseClick);document.removeEventListener("touchstart",this.handleOutsideMouseClick)}this.closePortal(true)}},{key:"handleWrapperClick",value:function handleWrapperClick(e){e.preventDefault();e.stopPropagation();if(this.state.active){return}this.openPortal()}},{key:"openPortal",value:function openPortal(){var props=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.props;this.setState({active:true});this.renderPortal(props);this.props.onOpen(this.node)}},{key:"closePortal",value:function closePortal(){var _this2=this;var isUnmounted=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var resetPortalState=function resetPortalState(){if(_this2.node){_reactDom2.default.unmountComponentAtNode(_this2.node);document.body.removeChild(_this2.node)}_this2.portal=null;_this2.node=null;if(isUnmounted!==true){_this2.setState({active:false})}};if(this.state.active){if(this.props.beforeClose){this.props.beforeClose(this.node,resetPortalState)}else{resetPortalState()}this.props.onClose()}}},{key:"handleOutsideMouseClick",value:function handleOutsideMouseClick(e){if(!this.state.active){return}var root=(0,_reactDom.findDOMNode)(this.portal);if(root.contains(e.target)||e.button&&e.button!==0){return}e.stopPropagation();this.closePortal()}},{key:"handleKeydown",value:function handleKeydown(e){if(e.keyCode===KEYCODES.ESCAPE&&this.state.active){this.closePortal()}}},{key:"renderPortal",value:function renderPortal(props){if(!this.node){this.node=document.createElement("div");document.body.appendChild(this.node)}var children=props.children;if(typeof props.children.type==="function"){children=_react2.default.cloneElement(props.children,{closePortal:this.closePortal})}this.portal=_reactDom2.default.unstable_renderSubtreeIntoContainer(this,children,this.node,this.props.onUpdate)}},{key:"render",value:function render(){if(this.props.openByClickOn){return _react2.default.cloneElement(this.props.openByClickOn,{onClick:this.handleWrapperClick})}return null}}]);return Portal}(_react2.default.Component);exports.default=Portal;Portal.propTypes={children:_propTypes2.default.element.isRequired,openByClickOn:_propTypes2.default.element,closeOnEsc:_propTypes2.default.bool,closeOnOutsideClick:_propTypes2.default.bool,isOpened:_propTypes2.default.bool,onOpen:_propTypes2.default.func,onClose:_propTypes2.default.func,beforeClose:_propTypes2.default.func,onUpdate:_propTypes2.default.func};Portal.defaultProps={onOpen:function onOpen(){},onClose:function onClose(){},onUpdate:function onUpdate(){}};module.exports=exports["default"]},{"prop-types":72}],75:[function(require,module,exports){function isBackward(selection){var startNode=selection.anchorNode;var startOffset=selection.anchorOffset;var endNode=selection.focusNode;var endOffset=selection.focusOffset;var position=startNode.compareDocumentPosition(endNode);return!(position===4||position===0&&startOffset<endOffset)}module.exports=isBackward},{}],76:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if(typeof val=="object"&&val&&typeof val.length=="number"){try{if(typeof val.callee=="function")return"arguments"}catch(ex){if(ex instanceof TypeError){return"arguments"}}}if(val===null)return"null";if(val===undefined)return"undefined";if(val&&val.nodeType===1)return"element";if(val===Object(val))return"object";return typeof val}},{}],77:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_react=window.React,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_getWindow=require("get-window"),_getWindow2=_interopRequireDefault(_getWindow),_keycode=require("keycode"),_keycode2=_interopRequireDefault(_keycode),_transferTypes=require("../constants/transfer-types"),_transferTypes2=_interopRequireDefault(_transferTypes),_base=require("../serializers/base-64"),_base2=_interopRequireDefault(_base),_node=require("./node"),_node2=_interopRequireDefault(_node),_selection=require("../models/selection"),_selection2=_interopRequireDefault(_selection),_extendSelection=require("../utils/extend-selection"),_extendSelection2=_interopRequireDefault(_extendSelection),_findClosestNode=require("../utils/find-closest-node"),_findClosestNode2=_interopRequireDefault(_findClosestNode),_findDeepestNode=require("../utils/find-deepest-node"),_findDeepestNode2=_interopRequireDefault(_findDeepestNode),_getPoint=require("../utils/get-point"),_getPoint2=_interopRequireDefault(_getPoint),_getTransferData=require("../utils/get-transfer-data"),_getTransferData2=_interopRequireDefault(_getTransferData),_setTransferData=require("../utils/set-transfer-data"),_setTransferData2=_interopRequireDefault(_setTransferData),_getHtmlFromNativePaste=require("../utils/get-html-from-native-paste"),_getHtmlFromNativePaste2=_interopRequireDefault(_getHtmlFromNativePaste),_environment=require("../constants/environment"),debug=(0,_debug2.default)("slate:content"),Content=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return _initialiseProps.call(n),n.tmp={},n.tmp.compositions=0,n.tmp.forces=0,n}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.readOnly,r=t.state,i=t.tabIndex,s=t.role,a=r.document,u=a.nodes.map(function(t){return e.renderNode(t)}).toArray(),p=_extends({outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},o?{}:{WebkitUserModify:"read-write-plaintext-only"},t.style),f=!_environment.IS_FIREFOX&&t.spellCheck;return debug("render",{props:t}),_react2.default.createElement("div",{"data-slate-editor":!0,key:this.tmp.forces,ref:this.ref,"data-key":a.key,contentEditable:!o,suppressContentEditableWarning:!0,className:n,onBeforeInput:this.onBeforeInput,onBlur:this.onBlur,onFocus:this.onFocus,onCompositionEnd:this.onCompositionEnd,onCompositionStart:this.onCompositionStart,onCopy:this.onCopy,onCut:this.onCut,onDragEnd:this.onDragEnd,onDragOver:this.onDragOver,onDragStart:this.onDragStart,onDrop:this.onDrop,onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onPaste:this.onPaste,onSelect:this.onSelect,autoCorrect:t.autoCorrect,spellCheck:f,style:p,role:o?null:s||"textbox",tabIndex:i,"data-gramm":!1},u,this.props.children)}}]),t}(_react2.default.Component);Content.propTypes={autoCorrect:_propTypes2.default.bool.isRequired,autoFocus:_propTypes2.default.bool.isRequired,children:_propTypes2.default.array.isRequired,className:_propTypes2.default.string,editor:_propTypes2.default.object.isRequired,onBeforeInput:_propTypes2.default.func.isRequired,onBlur:_propTypes2.default.func.isRequired,onChange:_propTypes2.default.func.isRequired,onCopy:_propTypes2.default.func.isRequired,onCut:_propTypes2.default.func.isRequired,onDrop:_propTypes2.default.func.isRequired,onFocus:_propTypes2.default.func.isRequired,onKeyDown:_propTypes2.default.func.isRequired,onPaste:_propTypes2.default.func.isRequired,onSelect:_propTypes2.default.func.isRequired,readOnly:_propTypes2.default.bool.isRequired,role:_propTypes2.default.string,schema:_propTypes2.default.object,spellCheck:_propTypes2.default.bool.isRequired,state:_propTypes2.default.object.isRequired,style:_propTypes2.default.object,tabIndex:_propTypes2.default.number},Content.defaultProps={style:{}};var _initialiseProps=function(){var e=this;this.shouldComponentUpdate=function(t,n){return t.readOnly!=e.props.readOnly||!t.state.isNative&&(t.className!=e.props.className||t.schema!=e.props.schema||t.autoCorrect!=e.props.autoCorrect||t.spellCheck!=e.props.spellCheck||t.state!=e.props.state||t.style!=e.props.style)},this.componentDidMount=function(){e.updateSelection(),e.props.autoFocus&&e.element.focus()},this.componentDidUpdate=function(){e.updateSelection()},this.updateSelection=function(){var t=e.props,n=t.editor,o=t.state,r=o.document,i=o.selection,s=(0,_getWindow2.default)(e.element),a=s.getSelection();if(a.rangeCount||!i.isBlurred){if(i.isBlurred){if(!e.isInEditor(a.anchorNode))return;return a.removeAllRanges(),e.element.blur(),void debug("updateSelection",{selection:i,native:a})}var u=o.anchorText,p=o.focusText,f=i.anchorKey,d=i.anchorOffset,l=i.focusKey,c=i.focusOffset,g=n.getSchema(),_=r.getDescendantDecorators(f,g),y=r.getDescendantDecorators(l,g),m=u.getRanges(_),h=p.getRanges(y),v=0,C=0,D=void 0,b=void 0,q=void 0,T=void 0;m.forEach(function(e,t,n){var o=e.text.length;if(!((v+=o)<d))return D=t,q=d-(v-o),!1}),h.forEach(function(e,t,n){var o=e.text.length;if(!((C+=o)<c))return b=t,T=c-(C-o),!1});var O=e.element.querySelector('[data-offset-key="'+f+"-"+D+'"]'),S=e.element.querySelector('[data-offset-key="'+l+"-"+b+'"]'),R=(0,_findDeepestNode2.default)(O),k=(0,_findDeepestNode2.default)(S);if(R!=a.anchorNode||q!=a.anchorOffset||k!=a.focusNode||T!=a.focusOffset){e.tmp.isSelecting=!0,a.removeAllRanges();var I=s.document.createRange();I.setStart(R,q),a.addRange(I),(0,_extendSelection2.default)(a,k,T),setTimeout(function(){_environment.IS_FIREFOX&&e.element.focus(),e.tmp.isSelecting=!1}),debug("updateSelection",{selection:i,native:a})}}},this.ref=function(t){e.element=t},this.isInEditor=function(t){var n=e.element,o=3===t.nodeType?t.parentElement:t;return o.isContentEditable&&(o===n||(0,_findClosestNode2.default)(o,"[data-slate-editor]")===n)},this.onBeforeInput=function(t){if(!e.props.readOnly&&e.isInEditor(t.target)){var n={};debug("onBeforeInput",{event:t,data:n}),e.props.onBeforeInput(t,n)}},this.onBlur=function(t){if(!e.props.readOnly&&!e.tmp.isCopying&&e.isInEditor(t.target)){if((0,_getWindow2.default)(e.element).document.activeElement!=e.element){var n={};debug("onBlur",{event:t,data:n}),e.props.onBlur(t,n)}}},this.onFocus=function(t){if(!e.props.readOnly&&!e.tmp.isCopying&&e.isInEditor(t.target)){if(_environment.IS_FIREFOX&&t.target!=e.element)return void e.element.focus();var n={};debug("onFocus",{event:t,data:n}),e.props.onFocus(t,n)}},this.onChange=function(t){debug("onChange",t),e.props.onChange(t)},this.onCompositionStart=function(t){e.isInEditor(t.target)&&(e.tmp.isComposing=!0,e.tmp.compositions++,debug("onCompositionStart",{event:t}))},this.onCompositionEnd=function(t){if(e.isInEditor(t.target)){e.tmp.forces++;var n=e.tmp.compositions;setTimeout(function(){e.tmp.compositions>n||(e.tmp.isComposing=!1)}),debug("onCompositionEnd",{event:t})}},this.onCopy=function(t){if(e.isInEditor(t.target)){var n=(0,_getWindow2.default)(t.target);e.tmp.isCopying=!0,n.requestAnimationFrame(function(){e.tmp.isCopying=!1});var o=e.props.state,r={};r.type="fragment",r.fragment=o.fragment,debug("onCopy",{event:t,data:r}),e.props.onCopy(t,r)}},this.onCut=function(t){if(!e.props.readOnly&&e.isInEditor(t.target)){var n=(0,_getWindow2.default)(t.target);e.tmp.isCopying=!0,n.requestAnimationFrame(function(){e.tmp.isCopying=!1});var o=e.props.state,r={};r.type="fragment",r.fragment=o.fragment,debug("onCut",{event:t,data:r}),e.props.onCut(t,r)}},this.onDragEnd=function(t){e.isInEditor(t.target)&&(e.tmp.isDragging=!1,e.tmp.isInternalDrag=null,debug("onDragEnd",{event:t}))},this.onDragOver=function(t){e.isInEditor(t.target)&&(t.preventDefault(),e.tmp.isDragging||(e.tmp.isDragging=!0,e.tmp.isInternalDrag=!1,debug("onDragOver",{event:t})))},this.onDragStart=function(t){if(e.isInEditor(t.target)){e.tmp.isDragging=!0,e.tmp.isInternalDrag=!0;var n=t.nativeEvent.dataTransfer;if("node"!=(0,_getTransferData2.default)(n).type){var o=e.props.state,r=o.fragment,i=_base2.default.serializeNode(r);(0,_setTransferData2.default)(n,_transferTypes2.default.FRAGMENT,i),debug("onDragStart",{event:t})}}},this.onDrop=function(t){if(!e.props.readOnly&&e.isInEditor(t.target)){t.preventDefault();var n=(0,_getWindow2.default)(t.target),o=e.props,r=o.state,i=o.editor,s=t.nativeEvent,a=s.dataTransfer,u=s.x,p=s.y,f=(0,_getTransferData2.default)(a),d=void 0;n.document.caretRangeFromPoint?d=n.document.caretRangeFromPoint(u,p):(d=n.document.createRange(),d.setStart(s.rangeParent,s.rangeOffset));var l=d,c=l.startContainer,g=l.startOffset,_=(0,_getPoint2.default)(c,g,r,i);if(_){var y=_selection2.default.create({anchorKey:_.key,anchorOffset:_.offset,focusKey:_.key,focusOffset:_.offset,isFocused:!0});f.target=y;try{f.effect=a.dropEffect}catch(e){f.effect=null}"fragment"!=f.type&&"node"!=f.type||(f.isInternal=e.tmp.isInternalDrag),debug("onDrop",{event:t,data:f}),e.props.onDrop(t,f)}}},this.onInput=function(t){if(!e.tmp.isComposing&&!e.props.state.isBlurred&&e.isInEditor(t.target)){debug("onInput",{event:t});var n=(0,_getWindow2.default)(t.target),o=e.props,r=o.state,i=o.editor,s=n.getSelection(),a=s.anchorNode,u=s.anchorOffset,p=(0,_getPoint2.default)(a,u,r,i);if(p){var f=p.key,d=p.index,l=p.start,c=p.end,g=r.document,_=r.selection,y=i.getSchema(),m=g.getDescendantDecorators(f,y),h=g.getDescendant(f),v=g.getClosestBlock(h.key),C=h.getRanges(m),D=v.getLastText(),b=a.textContent,q=b.charAt(b.length-1),T=h==D,O=d==C.size-1;T&&O&&"\n"==q&&(b=b.slice(0,-1));var S=C.get(d),R=S.text,k=S.marks;if(b!=R){var I=b.length-R.length,E=_.collapseToEnd().move(I),w=r.transform().select({anchorKey:f,anchorOffset:l,focusKey:f,focusOffset:c}).delete().insertText(b,k).select(E).apply();e.onChange(w)}}}},this.onKeyDown=function(t){if(!e.props.readOnly&&e.isInEditor(t.target)){var n=t.altKey,o=t.ctrlKey,r=t.metaKey,i=t.shiftKey,s=t.which,a=(0,_keycode2.default)(s),u={};if("shift"==a&&(e.tmp.isShifting=!0),e.tmp.isComposing&&("left"==a||"right"==a||"up"==a||"down"==a))return void t.preventDefault();u.code=s,u.key=a,u.isAlt=n,u.isCmd=!!_environment.IS_MAC&&(r&&!n),u.isCtrl=o&&!n,u.isLine=!!_environment.IS_MAC&&r,u.isMeta=r,u.isMod=_environment.IS_MAC?r&&!n:o&&!n,u.isModAlt=_environment.IS_MAC?r&&n:o&&n,u.isShift=i,u.isWord=_environment.IS_MAC?n:o,("enter"==a||"backspace"==a||"delete"==a||"b"==a&&u.isMod||"i"==a&&u.isMod||"y"==a&&u.isMod||"z"==a&&u.isMod)&&t.preventDefault(),debug("onKeyDown",{event:t,data:u}),e.props.onKeyDown(t,u)}},this.onKeyUp=function(t){var n=t.which;"shift"==(0,_keycode2.default)(n)&&(e.tmp.isShifting=!1)},this.onPaste=function(t){if(!e.props.readOnly&&e.isInEditor(t.target)){var n=(0,_getTransferData2.default)(t.clipboardData);n.isShift=!!e.tmp.isShifting,debug("onPaste",{event:t,data:n}),_environment.IS_IE?(0,_getHtmlFromNativePaste2.default)(t.target,function(o){e.props.onPaste(t,void 0===o?n:_extends({},n,{html:o,type:"html"}))}):(t.preventDefault(),e.props.onPaste(t,n))}},this.onSelect=function(t){if(!e.props.readOnly&&!e.tmp.isCopying&&!e.tmp.isComposing&&!e.tmp.isSelecting&&e.isInEditor(t.target)){var n=(0,_getWindow2.default)(t.target),o=e.props,r=o.state,i=o.editor,s=r.document,a=r.selection,u=n.getSelection(),p={};if(u.rangeCount){var f=u.anchorNode,d=u.anchorOffset,l=u.focusNode,c=u.focusOffset,g=(0,_getPoint2.default)(f,d,r,i),_=(0,_getPoint2.default)(l,c,r,i);if(!g||!_)return;if(g.key==a.anchorKey&&g.offset==a.anchorOffset&&_.key==a.focusKey&&_.offset==a.focusOffset&&a.isFocused)return void e.updateSelection();var y={anchorKey:g.key,anchorOffset:g.offset,focusKey:_.key,focusOffset:_.offset,isFocused:!0,isBackward:null},m=s.getNode(g.key),h=s.getNode(_.key),v=s.getClosestInline(g.key),C=s.getClosestInline(_.key);if(v&&!v.isVoid&&g.offset==m.length){var D=s.getClosestBlock(g.key),b=D.getNextText(g.key);b&&(y.anchorKey=b.key,y.anchorOffset=0)}if(C&&!C.isVoid&&_.offset==h.length){var q=s.getClosestBlock(_.key),T=q.getNextText(_.key);T&&(y.focusKey=T.key,y.focusOffset=0)}p.selection=a.merge(y).normalize(s)}else p.selection=a.set("isFocused",!1),p.isNative=!0;debug("onSelect",{event:t,data:p}),e.props.onSelect(t,p)}},this.renderNode=function(t){var n=e.props,o=n.editor,r=n.readOnly,i=n.schema,s=n.state;return _react2.default.createElement(_node2.default,{key:t.key,block:null,node:t,parent:s.document,schema:i,state:s,editor:o,readOnly:r})}};exports.default=Content},{"../constants/environment":83,"../constants/transfer-types":86,"../models/selection":97,"../serializers/base-64":104,"../utils/extend-selection":118,"../utils/find-closest-node":119,"../utils/find-deepest-node":120,"../utils/get-html-from-native-paste":123,"../utils/get-point":124,"../utils/get-transfer-data":125,"../utils/set-transfer-data":135,"./node":80,debug:3,"get-window":62,keycode:66,"prop-types":72}],78:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _objectWithoutProperties(e,t){var r={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_reactPortal=require("react-portal"),_reactPortal2=_interopRequireDefault(_reactPortal),_react=window.React,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_stack=require("../models/stack"),_stack2=_interopRequireDefault(_stack),_propTypes3=require("../utils/prop-types"),_propTypes4=_interopRequireDefault(_propTypes3),_noop=require("../utils/noop"),_noop2=_interopRequireDefault(_noop),debug=(0,_debug2.default)("slate:editor"),EVENT_HANDLERS=["onBeforeInput","onBlur","onFocus","onCopy","onCut","onDrop","onKeyDown","onPaste","onSelect"],PLUGINS_PROPS=[].concat(EVENT_HANDLERS,["placeholder","placeholderClassName","placeholderStyle","plugins","schema"]),Editor=function(e){function t(e){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));_initialiseProps.call(r),r.tmp={},r.state={};var o=(e.onChange,_objectWithoutProperties(e,["onChange"])),a=_stack2.default.create(o);r.state.stack=a;var n=a.onBeforeChange(e.state,r);r.cacheState(n),r.state.state=n;var p=!0,s=!1,l=void 0;try{for(var i,u=EVENT_HANDLERS[Symbol.iterator]();!(p=(i=u.next()).done);p=!0)!function(){var e=i.value;r[e]=function(){for(var t,o=arguments.length,a=Array(o),n=0;n<o;n++)a[n]=arguments[n];var p=(t=r.state.stack)[e].apply(t,[r.state.state,r].concat(a));r.onChange(p)}}()}catch(e){s=!0,l=e}finally{try{!p&&u.return&&u.return()}finally{if(s)throw l}}return r}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props,t=this.state,r=t.stack,o=r.renderPortal(t.state,this).map(function(e,t){return _react2.default.createElement(_reactPortal2.default,{key:t,isOpened:!0},e)});return debug("render",{props:e,state:t}),r.render(t.state,this,_extends({},e,{children:o}))}}]),t}(_react2.default.Component);Editor.propTypes={autoCorrect:_propTypes2.default.bool,autoFocus:_propTypes2.default.bool,className:_propTypes2.default.string,onBeforeChange:_propTypes2.default.func,onChange:_propTypes2.default.func,onDocumentChange:_propTypes2.default.func,onSelectionChange:_propTypes2.default.func,placeholder:_propTypes2.default.any,placeholderClassName:_propTypes2.default.string,placeholderStyle:_propTypes2.default.object,plugins:_propTypes2.default.array,readOnly:_propTypes2.default.bool,role:_propTypes2.default.string,schema:_propTypes2.default.object,spellCheck:_propTypes2.default.bool,state:_propTypes4.default.state.isRequired,style:_propTypes2.default.object,tabIndex:_propTypes2.default.number},Editor.defaultProps={autoFocus:!1,autoCorrect:!0,onChange:_noop2.default,onDocumentChange:_noop2.default,onSelectionChange:_noop2.default,plugins:[],readOnly:!1,schema:{},spellCheck:!0};var _initialiseProps=function(){var e=this;this.componentWillReceiveProps=function(t){var r=e.state.stack,o=!0,a=!1,n=void 0;try{for(var p,s=PLUGINS_PROPS[Symbol.iterator]();!(o=(p=s.next()).done);o=!0){var l=p.value;if(t[l]!=e.props[l]){var i=(t.onChange,_objectWithoutProperties(t,["onChange"]));r=_stack2.default.create(i),e.setState({stack:r})}}}catch(e){a=!0,n=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw n}}var u=r.onBeforeChange(t.state,e);e.cacheState(u),e.setState({state:u})},this.cacheState=function(t){e.tmp.document=t.document,e.tmp.selection=t.selection},this.blur=function(){var t=e.state.state.transform().blur().apply();e.onChange(t)},this.focus=function(){var t=e.state.state.transform().focus().apply();e.onChange(t)},this.getSchema=function(){return e.state.stack.schema},this.getState=function(){return e.state.state},this.onChange=function(t){if(t!=e.state.state){var r=e.tmp,o=e.props,a=e.state.stack,n=o.onChange,p=o.onDocumentChange,s=o.onSelectionChange,l=r.document,i=r.selection;t=a.onChange(t,e),n(t),t.document!=l&&p(t.document,t),t.selection!=i&&s(t.selection,t)}}},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=EVENT_HANDLERS[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var property=_step2.value;Editor.propTypes[property]=_propTypes2.default.func}}catch(e){_didIteratorError2=!0,_iteratorError2=e}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}exports.default=Editor},{"../models/stack":98,"../utils/noop":129,"../utils/prop-types":133,debug:3,"prop-types":72,"react-portal":74}],79:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_react=window.React,_react2=_interopRequireDefault(_react),_reactDom=window.ReactDOM,_reactDom2=_interopRequireDefault(_reactDom),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_offsetKey=require("../utils/offset-key"),_offsetKey2=_interopRequireDefault(_offsetKey),_findDeepestNode=require("../utils/find-deepest-node"),_findDeepestNode2=_interopRequireDefault(_findDeepestNode),_environment=require("../constants/environment"),debug=(0,_debug2.default)("slate:leaf"),Leaf=function(e){function t(e){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.debug=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];debug.apply(void 0,[e,r.props.node.key+"-"+r.props.index].concat(n))},r.tmp={},r.tmp.renders=0,r}return _inherits(t,e),_createClass(t,[{key:"shouldComponentUpdate",value:function(e){if(e.index!=this.props.index||e.marks!=this.props.marks||e.schema!=this.props.schema||e.text!=this.props.text)return!0;var t=(0,_findDeepestNode2.default)(_reactDom2.default.findDOMNode(this)),r=this.renderText(e);return t.textContent!=r}},{key:"render",value:function(){var e=this.props,t=e.node,r=e.index,n=_offsetKey2.default.stringify({key:t.key,index:r});return this.tmp.renders++,this.debug("render",{props:e}),_react2.default.createElement("span",{key:this.tmp.renders,"data-offset-key":n},this.renderMarks(e))}},{key:"renderText",value:function(e){var t=e.block,r=e.node,n=e.parent,o=e.text,a=e.index,s=e.ranges;if(""==o&&"block"==n.kind&&""==n.text)return _react2.default.createElement("br",null);if(""==o){var i=_environment.IS_FIREFOX?"​":" ";return _react2.default.createElement("span",{"data-slate-zero-width":!0},i)}var u=t.getLastText(),p=o.charAt(o.length-1),f=r==u,d=a==s.size-1;return f&&d&&"\n"==p?o+"\n":o}},{key:"renderMarks",value:function(e){var t=e.marks,r=e.schema,n=e.node,o=e.offset,a=e.text,s=e.state,i=e.editor,u=this.renderText(e);return t.reduce(function(e,u){var p=u.getComponent(r);return p?_react2.default.createElement(p,{editor:i,mark:u,marks:t,node:n,offset:o,schema:r,state:s,text:a},e):e},u)}}]),t}(_react2.default.Component);Leaf.propTypes={block:_propTypes2.default.object.isRequired,editor:_propTypes2.default.object.isRequired,index:_propTypes2.default.number.isRequired,marks:_propTypes2.default.object.isRequired,node:_propTypes2.default.object.isRequired,offset:_propTypes2.default.number.isRequired,parent:_propTypes2.default.object.isRequired,ranges:_propTypes2.default.object.isRequired,schema:_propTypes2.default.object.isRequired,state:_propTypes2.default.object.isRequired,text:_propTypes2.default.string.isRequired},exports.default=Leaf},{"../constants/environment":83,"../utils/find-deepest-node":120,"../utils/offset-key":132,debug:3,"prop-types":72}],80:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}
}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_react=window.React,_react2=_interopRequireDefault(_react),_reactDom=window.ReactDOM,_reactDom2=_interopRequireDefault(_reactDom),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_transferTypes=require("../constants/transfer-types"),_transferTypes2=_interopRequireDefault(_transferTypes),_base=require("../serializers/base-64"),_base2=_interopRequireDefault(_base),_leaf=require("./leaf"),_leaf2=_interopRequireDefault(_leaf),_void=require("./void"),_void2=_interopRequireDefault(_void),_getWindow=require("get-window"),_getWindow2=_interopRequireDefault(_getWindow),_scrollToSelection=require("../utils/scroll-to-selection"),_scrollToSelection2=_interopRequireDefault(_scrollToSelection),_setTransferData=require("../utils/set-transfer-data"),_setTransferData2=_interopRequireDefault(_setTransferData),debug=(0,_debug2.default)("slate:node"),Node=function(e){function t(e){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));_initialiseProps.call(r);var n=e.node,o=e.schema;return r.state={},r.state.Component="text"==n.kind?null:n.getComponent(o),r}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props,t=this.props.node;return this.debug("render",{props:e}),"text"==t.kind?this.renderText():this.renderElement()}}]),t}(_react2.default.Component);Node.propTypes={block:_propTypes2.default.object,editor:_propTypes2.default.object.isRequired,node:_propTypes2.default.object.isRequired,parent:_propTypes2.default.object.isRequired,readOnly:_propTypes2.default.bool.isRequired,schema:_propTypes2.default.object.isRequired,state:_propTypes2.default.object.isRequired};var _initialiseProps=function(){var e=this;this.debug=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var a=e.props.node,s=a.key,i=a.kind,d=a.type,u="text"==i?s+" ("+i+")":s+" ("+d+")";debug.apply(void 0,[t,""+u].concat(n))},this.componentWillReceiveProps=function(t){if("text"!=t.node.kind&&t.node!=e.props.node){var r=t.node.getComponent(t.schema);e.setState({Component:r})}},this.shouldComponentUpdate=function(t){var r=e.props,n=e.state.Component;if(n&&n.suppressShouldComponentUpdate)return!0;if(t.readOnly!=r.readOnly)return!0;if(t.node!=r.node)return!0;if("text"!=t.node.kind){var o=r.state.selection.hasEdgeIn(r.node),a=t.state.selection.hasEdgeIn(t.node),s=r.state.isFocused||t.state.isFocused,i=o||a;if(s&&i)return!0}if("text"==t.node.kind&&t.schema.hasDecorators){var d=t.state.document.getDescendantDecorators(t.node.key,t.schema),u=r.state.document.getDescendantDecorators(r.node.key,r.schema),l=t.node.getRanges(d),c=r.node.getRanges(u);if(!l.equals(c))return!0}if("text"==t.node.kind&&"block"==t.parent.kind){var p=r.parent.nodes.last(),f=t.parent.nodes.last();if(r.node==p&&t.node!=f)return!0}return!1},this.componentDidMount=function(){e.updateScroll()},this.componentDidUpdate=function(t,r){e.props.node!=t.node&&e.updateScroll()},this.componentWillUnmount=function(){clearTimeout(e.scrollTimer)},this.updateScroll=function(){var t=e.props,r=t.node,n=t.state,o=n.selection;"block"==r.kind&&"block"!=r.nodes.first().kind&&(o.isBlurred||o.hasEndIn(r)&&(e.scrollTimer=setTimeout(function(){var t=_reactDom2.default.findDOMNode(e),r=(0,_getWindow2.default)(t),n=r.getSelection();(0,_scrollToSelection2.default)(n),e.debug("updateScroll",t)})))},this.onDragStart=function(t){var r=e.props.node;if(r.isVoid){var n=_base2.default.serializeNode(r,{preserveKeys:!0}),o=t.nativeEvent.dataTransfer;(0,_setTransferData2.default)(o,_transferTypes2.default.NODE,n),e.debug("onDragStart",t)}},this.renderNode=function(t){var r=e.props,n=r.block,o=r.editor,a=r.node,s=r.readOnly,i=r.schema,d=r.state;return _react2.default.createElement(Node,{key:t.key,node:t,block:"block"==a.kind?a:n,parent:a,editor:o,readOnly:s,schema:i,state:d})},this.renderElement=function(){var t=e.props,r=t.editor,n=t.node,o=t.parent,a=t.readOnly,s=t.state,i=e.state.Component,d=n.nodes.map(e.renderNode).toArray(),u={"data-key":n.key,onDragStart:e.onDragStart};if("block"==n.kind&&"block"!=n.nodes.first().kind){"rtl"==n.getTextDirection()&&(u.dir="rtl")}var l=_react2.default.createElement(i,{attributes:u,key:n.key,editor:r,parent:o,node:n,readOnly:a,state:s},d);return n.isVoid?_react2.default.createElement(_void2.default,e.props,l):l},this.renderText=function(){var t=e.props,r=t.node,n=t.schema,o=t.state,a=o.document,s=n.hasDecorators?a.getDescendantDecorators(r.key,n):[],i=r.getRanges(s),d=0,u=i.map(function(t,r){var n=e.renderLeaf(i,t,r,d);return d+=t.text.length,n});return _react2.default.createElement("span",{"data-key":r.key},u)},this.renderLeaf=function(t,r,n,o){var a=e.props,s=a.block,i=a.node,d=a.parent,u=a.schema,l=a.state,c=a.editor,p=r.text,f=r.marks;return _react2.default.createElement(_leaf2.default,{key:i.key+"-"+n,block:s,editor:c,index:n,marks:f,node:i,offset:o,parent:d,ranges:t,schema:u,state:l,text:p})}};exports.default=Node},{"../constants/transfer-types":86,"../serializers/base-64":104,"../utils/scroll-to-selection":134,"../utils/set-transfer-data":135,"./leaf":79,"./void":82,debug:3,"get-window":62,"prop-types":72}],81:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_react=window.React,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),Placeholder=function(e){function t(){var e,r,o,n;_classCallCheck(this,t);for(var s=arguments.length,p=Array(s),l=0;l<s;l++)p[l]=arguments[l];return r=o=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(p))),o.shouldComponentUpdate=function(e,t){return e.children!=o.props.children||e.className!=o.props.className||e.firstOnly!=o.props.firstOnly||e.parent!=o.props.parent||e.node!=o.props.node||e.style!=o.props.style},o.isVisible=function(){var e=o.props,t=e.firstOnly,r=e.node,n=e.parent;return!r.text&&(!t||!(n.nodes.size>1)&&n.nodes.first()===r)},n=r,_possibleConstructorReturn(o,n)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){if(!this.isVisible())return null;var e=this.props,t=e.children,r=e.className,o=this.props.style;"string"==typeof t&&null==o&&null==r?o={opacity:"0.333"}:null==o&&(o={});var n=_extends({position:"absolute",top:"0px",right:"0px",bottom:"0px",left:"0px",pointerEvents:"none"},o);return _react2.default.createElement("span",{contentEditable:!1,className:r,style:n},t)}}]),t}(_react2.default.Component);Placeholder.propTypes={children:_propTypes2.default.any.isRequired,className:_propTypes2.default.string,firstOnly:_propTypes2.default.bool,node:_propTypes2.default.object.isRequired,parent:_propTypes2.default.object,state:_propTypes2.default.object.isRequired,style:_propTypes2.default.object},Placeholder.defaultProps={firstOnly:!0},exports.default=Placeholder},{"prop-types":72}],82:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_react=window.React,_react2=_interopRequireDefault(_react),_propTypes=require("prop-types"),_propTypes2=_interopRequireDefault(_propTypes),_leaf=require("./leaf"),_leaf2=_interopRequireDefault(_leaf),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark),_offsetKey=require("../utils/offset-key"),_offsetKey2=_interopRequireDefault(_offsetKey),_environment=require("../constants/environment"),debug=(0,_debug2.default)("slate:void"),Void=function(e){function t(){var e,r,o,n;_classCallCheck(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=o=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),_initialiseProps.call(o),n=r,_possibleConstructorReturn(o,n)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props,t=e.children,r=e.node,o=void 0,n=void 0;return"block"===r.kind?(o="div",n={position:"relative"}):o="span",this.debug("render",{props:e}),_react2.default.createElement(o,{"data-slate-void":!0,style:n,onClick:this.onClick,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop},this.renderSpacer(),_react2.default.createElement(o,{contentEditable:this.state.editable},t))}}]),t}(_react2.default.Component);Void.propTypes={block:_propTypes2.default.object,children:_propTypes2.default.any.isRequired,editor:_propTypes2.default.object.isRequired,node:_propTypes2.default.object.isRequired,parent:_propTypes2.default.object.isRequired,readOnly:_propTypes2.default.bool.isRequired,schema:_propTypes2.default.object.isRequired,state:_propTypes2.default.object.isRequired};var _initialiseProps=function(){var e=this;this.state={dragCounter:0,editable:!1},this.debug=function(t){for(var r=arguments.length,o=Array(r>1?r-1:0),n=1;n<r;n++)o[n-1]=arguments[n];var i=e.props.node,a=i.key,s=i.type,u=a+" ("+s+")";debug.apply(void 0,[t,""+u].concat(o))},this.onClick=function(t){if(!e.props.readOnly){e.debug("onClick",{event:t});var r=e.props,o=r.node,n=r.editor,i=n.getState().transform().collapseToEndOf(o).focus().apply();n.onChange(i)}},this.onDragEnter=function(){e.setState(function(e){return{dragCounter:e.dragCounter+1,editable:void 0}})},this.onDragLeave=function(){e.setState(function(e){var t=e.dragCounter+1;return{dragCounter:t,editable:0!==t&&void 0}})},this.onDrop=function(){e.setState({dragCounter:0,editable:!1})},this.renderSpacer=function(){var t=e.props.node,r=void 0;return r="block"==t.kind?_environment.IS_FIREFOX?{pointerEvents:"none",width:"0px",height:"0px",lineHeight:"0px",visibility:"hidden"}:{position:"absolute",top:"0px",left:"-9999px",textIndent:"-9999px"}:{color:"transparent"},_react2.default.createElement("span",{style:r},e.renderLeaf())},this.renderLeaf=function(){var t=e.props,r=t.block,o=t.node,n=t.schema,i=t.state,a=t.editor,s=o.getFirstText(),u=s.getRanges(),p=_mark2.default.createSet(),l=_offsetKey2.default.stringify({key:s.key,index:0});return _react2.default.createElement(_leaf2.default,{key:l,block:"block"==o.kind?o:r,editor:a,index:0,marks:p,node:s,offset:0,parent:o,ranges:u,schema:n,state:i,text:""})}};exports.default=Void},{"../constants/environment":83,"../models/mark":93,"../utils/offset-key":132,"./leaf":79,debug:3,"prop-types":72}],83:[function(require,module,exports){"use strict";function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.IS_WINDOWS=exports.IS_MAC=exports.IS_IE=exports.IS_SAFARI=exports.IS_FIREFOX=exports.IS_CHROME=void 0;var _slicedToArray=function(){function r(r,e){var t=[],o=!0,i=!1,a=void 0;try{for(var _,n=r[Symbol.iterator]();!(o=(_=n.next()).done)&&(t.push(_.value),!e||t.length!==e);o=!0);}catch(r){i=!0,a=r}finally{try{!o&&n.return&&n.return()}finally{if(i)throw a}}return t}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_isInBrowser=require("is-in-browser"),_isInBrowser2=_interopRequireDefault(_isInBrowser),BROWSER_RULES=[["edge",/Edge\/([0-9\._]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["android",/Android\s([0-9\.]+)/],["safari",/Version\/([0-9\._]+).*Safari/]],OS_RULES=[["macos",/mac os x/i],["ios",/os ([\.\_\d]+) like mac os/i],["android",/android/i],["firefoxos",/mozilla\/[a-z\.\_\d]+ \((?:mobile)|(?:tablet)/i],["windows",/windows\s*(?:nt)?\s*([\.\_\d]+)/i]],BROWSER=void 0,OS=void 0;if(_isInBrowser2.default){var userAgent=window.navigator.userAgent,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=BROWSER_RULES[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var rule=_step.value,_rule=_slicedToArray(rule,2),name=_rule[0],regexp=_rule[1];if(regexp.test(userAgent)){BROWSER=name;break}}}catch(r){_didIteratorError=!0,_iteratorError=r}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=OS_RULES[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _rule2=_step2.value,_rule3=_slicedToArray(_rule2,2),name=_rule3[0],regexp=_rule3[1];if(regexp.test(userAgent)){OS=name;break}}}catch(r){_didIteratorError2=!0,_iteratorError2=r}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}var IS_CHROME=exports.IS_CHROME="chrome"===BROWSER,IS_FIREFOX=exports.IS_FIREFOX="firefox"===BROWSER,IS_SAFARI=exports.IS_SAFARI="safari"===BROWSER,IS_IE=exports.IS_IE="ie"===BROWSER,IS_MAC=exports.IS_MAC="macos"===OS,IS_WINDOWS=exports.IS_WINDOWS="windows"===OS},{"is-in-browser":65}],84:[function(require,module,exports){(function(process){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var IS_DEV="undefined"!=typeof process&&process.env&&!1;exports.default=IS_DEV}).call(this,require("_process"))},{_process:68}],85:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MODEL_TYPES={STATE:"@@__SLATE_STATE__@@",DOCUMENT:"@@__SLATE_DOCUMENT__@@",BLOCK:"@@__SLATE_BLOCK__@@",INLINE:"@@__SLATE_INLINE__@@",TEXT:"@@__SLATE_TEXT__@@",CHARACTER:"@@__SLATE_CHARACTER__@@",MARK:"@@__SLATE_MARK__@@",RANGE:"@@__SLATE_RANGE__@@",SELECTION:"@@__SLATE_SELECTION__@@",SCHEMA:"@@__SLATE_SCHEMA__@@"};exports.default=MODEL_TYPES},{}],86:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var TYPES={FRAGMENT:"application/x-slate-fragment",NODE:"application/x-slate-node"};exports.default=TYPES},{}],87:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.setKeyGenerator=exports.resetKeyGenerator=exports.findDOMNode=exports.Transforms=exports.Text=exports.State=exports.Stack=exports.Selection=exports.Schema=exports.Raw=exports.Range=exports.Plain=exports.Placeholder=exports.Mark=exports.Inline=exports.Html=exports.Editor=exports.Document=exports.Data=exports.Character=exports.Block=void 0;var _editor=require("./components/editor"),_editor2=_interopRequireDefault(_editor),_placeholder=require("./components/placeholder"),_placeholder2=_interopRequireDefault(_placeholder),_block=require("./models/block"),_block2=_interopRequireDefault(_block),_character=require("./models/character"),_character2=_interopRequireDefault(_character),_data=require("./models/data"),_data2=_interopRequireDefault(_data),_document=require("./models/document"),_document2=_interopRequireDefault(_document),_inline=require("./models/inline"),_inline2=_interopRequireDefault(_inline),_mark=require("./models/mark"),_mark2=_interopRequireDefault(_mark),_schema=require("./models/schema"),_schema2=_interopRequireDefault(_schema),_selection=require("./models/selection"),_selection2=_interopRequireDefault(_selection),_stack=require("./models/stack"),_stack2=_interopRequireDefault(_stack),_state=require("./models/state"),_state2=_interopRequireDefault(_state),_text=require("./models/text"),_text2=_interopRequireDefault(_text),_range=require("./models/range"),_range2=_interopRequireDefault(_range),_html=require("./serializers/html"),_html2=_interopRequireDefault(_html),_plain=require("./serializers/plain"),_plain2=_interopRequireDefault(_plain),_raw=require("./serializers/raw"),_raw2=_interopRequireDefault(_raw),_transforms=require("./transforms"),_transforms2=_interopRequireDefault(_transforms),_findDomNode=require("./utils/find-dom-node"),_findDomNode2=_interopRequireDefault(_findDomNode),_generateKey=require("./utils/generate-key");exports.Block=_block2.default,exports.Character=_character2.default,exports.Data=_data2.default,exports.Document=_document2.default,exports.Editor=_editor2.default,exports.Html=_html2.default,exports.Inline=_inline2.default,exports.Mark=_mark2.default,exports.Placeholder=_placeholder2.default,exports.Plain=_plain2.default,exports.Range=_range2.default,exports.Raw=_raw2.default,exports.Schema=_schema2.default,exports.Selection=_selection2.default,exports.Stack=_stack2.default,exports.State=_state2.default,exports.Text=_text2.default,exports.Transforms=_transforms2.default,exports.findDOMNode=_findDomNode2.default,exports.resetKeyGenerator=_generateKey.resetKeyGenerator,exports.setKeyGenerator=_generateKey.setKeyGenerator,exports.default={Block:_block2.default,Character:_character2.default,Data:_data2.default,Document:_document2.default,Editor:_editor2.default,Html:_html2.default,Inline:_inline2.default,Mark:_mark2.default,Placeholder:_placeholder2.default,Plain:_plain2.default,Range:_range2.default,Raw:_raw2.default,Schema:_schema2.default,Selection:_selection2.default,Stack:_stack2.default,State:_state2.default,Text:_text2.default,Transforms:_transforms2.default,findDOMNode:_findDomNode2.default,resetKeyGenerator:_generateKey.resetKeyGenerator,setKeyGenerator:_generateKey.setKeyGenerator}},{"./components/editor":78,"./components/placeholder":81,"./models/block":88,"./models/character":89,"./models/data":90,"./models/document":91,"./models/inline":92,"./models/mark":93,"./models/range":95,"./models/schema":96,"./models/selection":97,"./models/stack":98,"./models/state":99,"./models/text":100,"./serializers/html":105,"./serializers/plain":106,"./serializers/raw":107,"./transforms":113,"./utils/find-dom-node":121,"./utils/generate-key":122}],88:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();require("./document");var _data=require("./data"),_data2=_interopRequireDefault(_data),_node=require("./node"),_node2=_interopRequireDefault(_node),_inline=require("./inline"),_inline2=_interopRequireDefault(_inline),_text=require("./text"),_text2=_interopRequireDefault(_text),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey),_immutable=window.Immutable,DEFAULTS={data:new _immutable.Map,isVoid:!1,key:null,nodes:new _immutable.List,type:null},Block=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"kind",get:function(){return"block"}},{key:"isEmpty",get:function(){return""==this.text}},{key:"length",get:function(){return this.text.length}},{key:"text",get:function(){return this.getText()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isBlock(e))return e;if(_inline2.default.isInline(e))return e;if(_text2.default.isText(e))return e;if(!e.type)throw new Error("You must pass a block `type`.");return e.key=e.key||(0,_generateKey2.default)(),e.data=_data2.default.create(e.data),e.isVoid=!!e.isVoid,e.nodes=t.createList(e.nodes),0==e.nodes.size&&(e.nodes=e.nodes.push(_text2.default.create())),new t(e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _immutable.List.isList(e)?e:new _immutable.List(e.map(t.create))}},{key:"isBlock",value:function(e){return!(!e||!e[_modelTypes2.default.BLOCK])}}]),t}(new _immutable.Record(DEFAULTS));Block.prototype[_modelTypes2.default.BLOCK]=!0;for(var method in _node2.default)Block.prototype[method]=_node2.default[method];exports.default=Block},{"../constants/model-types":85,"../utils/generate-key":122,"./data":90,"./document":91,"./inline":92,"./node":94,"./text":100}],89:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_mark=require("./mark"),_mark2=_interopRequireDefault(_mark),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_immutable=window.Immutable,DEFAULTS={marks:new _immutable.Set,text:""},Character=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"kind",get:function(){return"character"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.isCharacter(e)?e:(e.marks=_mark2.default.createSet(e.marks),new t(e))}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _immutable.List.isList(e)?e:new _immutable.List(e.map(t.create))}},{key:"createListFromText",value:function(e,r){var n=e.split("").map(function(e){return{text:e,marks:r}});return t.createList(n)}},{key:"isCharacter",value:function(e){return!(!e||!e[_modelTypes2.default.CHARACTER])}}]),t}(new _immutable.Record(DEFAULTS));Character.prototype[_modelTypes2.default.CHARACTER]=!0,exports.default=Character},{"../constants/model-types":85,"./mark":93}],90:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _immutable=window.Immutable,Data={create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _immutable.Map.isMap(e)?e:new _immutable.Map(e)}};exports.default=Data},{}],91:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_block=require("./block"),_block2=_interopRequireDefault(_block);require("./inline");var _data=require("./data"),_data2=_interopRequireDefault(_data),_node=require("./node"),_node2=_interopRequireDefault(_node),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey),_immutable=window.Immutable,DEFAULTS={data:new _immutable.Map,key:null,nodes:new _immutable.List},Document=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"kind",get:function(){return"document"}},{key:"isEmpty",get:function(){return""==this.text}},{key:"length",get:function(){return this.text.length}},{key:"text",get:function(){return this.getText()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.isDocument(e)?e:(e.key=e.key||(0,_generateKey2.default)(),e.data=_data2.default.create(e.data),e.nodes=_block2.default.createList(e.nodes),new t(e))}},{key:"isDocument",value:function(e){return!(!e||!e[_modelTypes2.default.DOCUMENT])}}]),t}(new _immutable.Record(DEFAULTS));Document.prototype[_modelTypes2.default.DOCUMENT]=!0;for(var method in _node2.default)Document.prototype[method]=_node2.default[method];exports.default=Document},{"../constants/model-types":85,"../utils/generate-key":122,"./block":88,"./data":90,"./inline":92,"./node":94}],92:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();require("./document");var _block=require("./block"),_block2=_interopRequireDefault(_block),_data=require("./data"),_data2=_interopRequireDefault(_data),_node=require("./node"),_node2=_interopRequireDefault(_node),_text=require("./text"),_text2=_interopRequireDefault(_text),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey),_immutable=window.Immutable,DEFAULTS={data:new _immutable.Map,isVoid:!1,key:null,nodes:new _immutable.List,type:null},Inline=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"kind",get:function(){return"inline"}},{key:"isEmpty",get:function(){return""==this.text}},{key:"length",get:function(){return this.text.length}},{key:"text",get:function(){return this.getText()}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_block2.default.isBlock(e))return e;if(t.isInline(e))return e;if(_text2.default.isText(e))return e;if(!e.type)throw new Error("You must pass an inline `type`.");return e.key=e.key||(0,_generateKey2.default)(),e.data=_data2.default.create(e.data),e.isVoid=!!e.isVoid,e.nodes=t.createList(e.nodes),0==e.nodes.size&&(e.nodes=e.nodes.push(_text2.default.create())),new t(e)}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _immutable.List.isList(e)?e:new _immutable.List(e.map(t.create))}},{key:"isInline",value:function(e){return!(!e||!e[_modelTypes2.default.INLINE])}}]),t}(new _immutable.Record(DEFAULTS));Inline.prototype[_modelTypes2.default.INLINE]=!0;for(var method in _node2.default)Inline.prototype[method]=_node2.default[method];exports.default=Inline},{"../constants/model-types":85,"../utils/generate-key":122,"./block":88,"./data":90,"./document":91,"./node":94,"./text":100}],93:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){
if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_data=require("./data"),_data2=_interopRequireDefault(_data),_memoize=require("../utils/memoize"),_memoize2=_interopRequireDefault(_memoize),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_immutable=window.Immutable,DEFAULTS={data:new _immutable.Map,type:null},Mark=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getComponent",value:function(e){return e.__getComponent(this)}},{key:"kind",get:function(){return"mark"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.isMark(e))return e;if(!e.type)throw new Error("You must provide a `type` for the mark.");return e.data=_data2.default.create(e.data),new t(e)}},{key:"createSet",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _immutable.Set.isSet(e)?e:new _immutable.Set(e.map(t.create))}},{key:"isMark",value:function(e){return!(!e||!e[_modelTypes2.default.MARK])}}]),t}(new _immutable.Record(DEFAULTS));Mark.prototype[_modelTypes2.default.MARK]=!0,(0,_memoize2.default)(Mark.prototype,["getComponent"],{takesArguments:!0}),exports.default=Mark},{"../constants/model-types":85,"../utils/memoize":128,"./data":90}],94:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _document=require("./document"),_document2=_interopRequireDefault(_document),_normalize=require("../utils/normalize"),_normalize2=_interopRequireDefault(_normalize),_direction=require("direction"),_direction2=_interopRequireDefault(_direction),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey),_isInRange=require("../utils/is-in-range"),_isInRange2=_interopRequireDefault(_isInRange),_memoize=require("../utils/memoize"),_memoize2=_interopRequireDefault(_memoize),_warn=require("../utils/warn"),_warn2=_interopRequireDefault(_warn),_immutable=window.Immutable,Node={areDescendantsSorted:function(e,t){e=_normalize2.default.key(e),t=_normalize2.default.key(t);var n=void 0;return this.forEachDescendant(function(r){return r.key===e?(n=!0,!1):r.key===t?(n=!1,!1):void 0}),n},assertChild:function(e){var t=this.getChild(e);if(!t)throw e=_normalize2.default.key(e),new Error('Could not find a child node with key "'+e+'".');return t},assertDescendant:function(e){var t=this.getDescendant(e);if(!t)throw e=_normalize2.default.key(e),new Error('Could not find a descendant node with key "'+e+'".');return t},assertNode:function(e){var t=this.getNode(e);if(!t)throw e=_normalize2.default.key(e),new Error('Could not find a node with key "'+e+'".');return t},assertPath:function(e){var t=this.getDescendantAtPath(e);if(!t)throw new Error('Could not find a descendant at path "'+e+'".');return t},filterDescendants:function(e){var t=[];return this.forEachDescendant(function(n,r,s){e(n,r,s)&&t.push(n)}),(0,_immutable.List)(t)},findDescendant:function(e){var t=null;return this.forEachDescendant(function(n,r,s){if(e(n,r,s))return t=n,!1}),t},forEachDescendant:function(e){var t=void 0;return this.nodes.forEach(function(n,r,s){return!1===e(n,r,s)?(t=!1,!1):"text"!=n.kind?t=n.forEachDescendant(e):void 0}),t},getAncestors:function(e){if((e=_normalize2.default.key(e))==this.key)return(0,_immutable.List)();if(this.hasChild(e))return(0,_immutable.List)([this]);var t=void 0;return this.nodes.find(function(n){return"text"!=n.kind&&(t=n.getAncestors(e))}),t?t.unshift(this):null},getBlocks:function(){var e=this.getBlocksAsArray();return new _immutable.List(e)},getBlocksAsArray:function(){return this.nodes.reduce(function(e,t){return"block"!=t.kind?e:t.isLeafBlock()?(e.push(t),e):e.concat(t.getBlocksAsArray())},[])},getBlocksAtRange:function(e){var t=this.getBlocksAtRangeAsArray(e);return new _immutable.List(new _immutable.OrderedSet(t))},getBlocksAtRangeAsArray:function(e){e=e.normalize(this);var t=e,n=t.startKey,r=t.endKey,s=this.getClosestBlock(n);if(n==r)return[s];var i=this.getClosestBlock(r),a=this.getBlocksAsArray(),o=a.indexOf(s),u=a.indexOf(i);return a.slice(o,u+1)},getBlocksByType:function(e){var t=this.getBlocksByTypeAsArray(e);return new _immutable.List(t)},getBlocksByTypeAsArray:function(e){return this.nodes.reduce(function(t,n){return"block"!=n.kind?t:n.isLeafBlock()&&n.type==e?(t.push(n),t):t.concat(n.getBlocksByTypeAsArray(e))},[])},getCharacters:function(){var e=this.getCharactersAsArray();return new _immutable.List(e)},getCharactersAsArray:function(){return this.nodes.reduce(function(e,t){return"text"==t.kind?e.concat(t.characters.toArray()):e.concat(t.getCharactersAsArray())},[])},getCharactersAtRange:function(e){var t=this.getCharactersAtRangeAsArray(e);return new _immutable.List(t)},getCharactersAtRangeAsArray:function(e){return this.getTextsAtRange(e).reduce(function(t,n){var r=n.characters.filter(function(t,r){return(0,_isInRange2.default)(r,n,e)}).toArray();return t.concat(r)},[])},getChild:function(e){return e=_normalize2.default.key(e),this.nodes.find(function(t){return t.key==e})},getClosest:function(e,t){e=_normalize2.default.key(e);var n=this.getAncestors(e);if(!n)throw new Error('Could not find a descendant node with key "'+e+'".');return n.rest().findLast(t)},getClosestBlock:function(e){return this.getClosest(e,function(e){return"block"==e.kind})},getClosestInline:function(e){return this.getClosest(e,function(e){return"inline"==e.kind})},getClosestVoid:function(e){return this.getClosest(e,function(e){return e.isVoid})},getCommonAncestor:function(e,t){if(e=_normalize2.default.key(e),t=_normalize2.default.key(t),e==this.key)return this;if(t==this.key)return this;this.assertDescendant(e),this.assertDescendant(t);for(var n=new _immutable.List,r=this.getParent(e),s=this.getParent(t);r;)n=n.push(r),r=this.getParent(r.key);for(;s;){if(n.includes(s))return s;s=this.getParent(s.key)}},getComponent:function(e){return e.__getComponent(this)},getDecorators:function(e){return e.__getDecorators(this)},getDepth:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.assertDescendant(e),this.hasChild(e)?t:this.getFurthestAncestor(e).getDepth(e,t+1)},getDescendant:function(e){e=_normalize2.default.key(e);var t=null,n=this.nodes.find(function(n){return n.key===e?n:"text"!==n.kind&&(t=n.getDescendant(e))});return t||n},getDescendantAtPath:function(e){var t=this,n=!0,r=!1,s=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var o=i.value;if(!t)return;if(!t.nodes)return;t=t.nodes.get(o)}}catch(e){r=!0,s=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw s}}return t},getDescendantDecorators:function(e,t){if(!t.hasDecorators)return[];for(var n=this.assertDescendant(e),r=this.getFurthestAncestor(e),s=[];r!=n;)s=s.concat(r.getDecorators(t)),r=r.getFurthestAncestor(e);return s=s.concat(n.getDecorators(t))},getFirstText:function(){var e=null,t=this.nodes.find(function(t){return"text"==t.kind||(e=t.getFirstText())});return e||t},getFragmentAtRange:function(e){var t=this,n=new _immutable.List,r=e.startKey,s=e.startOffset,i=e.endKey,a=e.endOffset;t.assertDescendant(r),t.assertDescendant(i);var o=e.collapseToStart();t=t.splitBlockAtRange(o,1/0);var u=t.getNextText(r),d=r==i?e.collapseToStartOf(u).move(a-s):e.collapseToEnd();t=t.splitBlockAtRange(d,1/0);var c=t.getNextSibling(t.getFurthestAncestor(r).key),f=r==i?t.getFurthestAncestor(u.key):t.getFurthestAncestor(i),l=t.nodes.indexOf(c),h=t.nodes.indexOf(f);return n=t.nodes.slice(l,h+1),_document2.default.create({nodes:n})},getFurthest:function(e,t){var n=this.getAncestors(e);if(!n)throw e=_normalize2.default.key(e),new Error('Could not find a descendant node with key "'+e+'".');return n.rest().find(t)},getFurthestBlock:function(e){return this.getFurthest(e,function(e){return"block"==e.kind})},getFurthestInline:function(e){return this.getFurthest(e,function(e){return"inline"==e.kind})},getFurthestAncestor:function(e){return e=_normalize2.default.key(e),this.nodes.find(function(t){return t.key==e||"text"!=t.kind&&t.hasDescendant(e)})},getFurthestOnlyChildAncestor:function(e){var t=this.getAncestors(e);if(!t)throw e=_normalize2.default.key(e),new Error('Could not find a descendant node with key "'+e+'".');return t.skipLast().reverse().takeUntil(function(e){return e.nodes.size>1}).last()},getInlines:function(){var e=this.getInlinesAsArray();return new _immutable.List(e)},getInlinesAsArray:function(){var e=[];return this.nodes.forEach(function(t){"text"!=t.kind&&(t.isLeafInline()?e.push(t):e=e.concat(t.getInlinesAsArray()))}),e},getInlinesAtRange:function(e){var t=this.getInlinesAtRangeAsArray(e);return new _immutable.List(new _immutable.OrderedSet(t))},getInlinesAtRangeAsArray:function(e){var t=this;return this.getTextsAtRangeAsArray(e).map(function(e){return t.getClosestInline(e.key)}).filter(function(e){return e})},getInlinesByType:function(e){var t=this.getInlinesByTypeAsArray(e);return new _immutable.List(t)},getInlinesByTypeAsArray:function(e){return this.nodes.reduce(function(t,n){return"text"==n.kind?t:n.isLeafInline()&&n.type==e?(t.push(n),t):t.concat(n.getInlinesByTypeAsArray(e))},[])},getKeys:function(){var e=[];return this.forEachDescendant(function(t){e.push(t.key)}),new _immutable.Set(e)},getLastText:function(){var e=null,t=this.nodes.findLast(function(t){return"text"==t.kind||(e=t.getLastText())});return e||t},getMarks:function(){var e=this.getMarksAsArray();return new _immutable.Set(e)},getOrderedMarks:function(){var e=this.getMarksAsArray();return new _immutable.OrderedSet(e)},getMarksAsArray:function(){return this.nodes.reduce(function(e,t){return e.concat(t.getMarksAsArray())},[])},getMarksAtRange:function(e){var t=this.getMarksAtRangeAsArray(e);return new _immutable.Set(t)},getOrderedMarksAtRange:function(e){var t=this.getMarksAtRangeAsArray(e);return new _immutable.OrderedSet(t)},getMarksAtRangeAsArray:function(e){e=e.normalize(this);var t=e,n=t.startKey,r=t.startOffset;if(e.isCollapsed&&0==r){var s=this.getPreviousText(n);if(!s||!s.length)return[];return s.characters.get(s.length-1).marks.toArray()}if(e.isCollapsed){return this.getDescendant(n).characters.get(e.startOffset-1).marks.toArray()}return this.getCharactersAtRange(e).reduce(function(e,t){return t.marks.toArray().forEach(function(t){return e.push(t)}),e},[])},getMarksByType:function(e){var t=this.getMarksByTypeAsArray(e);return new _immutable.Set(t)},getOrderedMarksByType:function(e){var t=this.getMarksByTypeAsArray(e);return new _immutable.OrderedSet(t)},getMarksByTypeAsArray:function(e){return this.nodes.reduce(function(t,n){return"text"==n.kind?t.concat(n.getMarksAsArray().filter(function(t){return t.type==e})):t.concat(n.getMarksByTypeAsArray(e))},[])},getNextBlock:function(e){var t=this.assertDescendant(e),n=void 0;if("block"==t.kind)n=t.getLastText();else{n=this.getClosestBlock(e).getLastText()}var r=this.getNextText(n.key);return r?this.getClosestBlock(r.key):null},getNextSibling:function(e){e=_normalize2.default.key(e);var t=this.getParent(e),n=t.nodes.skipUntil(function(t){return t.key==e});if(0==n.size)throw new Error('Could not find a child node with key "'+e+'".');return n.get(1)},getNextText:function(e){return e=_normalize2.default.key(e),this.getTexts().skipUntil(function(t){return t.key==e}).get(1)},getNode:function(e){return e=_normalize2.default.key(e),this.key==e?this:this.getDescendant(e)},getOffset:function(e){this.assertDescendant(e);var t=this.getFurthestAncestor(e),n=this.nodes.takeUntil(function(e){return e==t}).reduce(function(e,t){return e+t.length},0);return this.hasChild(e)?n:n+t.getOffset(e)},getOffsetAtRange:function(e){if(e=e.normalize(this),e.isExpanded)throw new Error("The range must be collapsed to calculcate its offset.");var t=e,n=t.startKey,r=t.startOffset;return this.getOffset(n)+r},getParent:function(e){if(this.hasChild(e))return this;var t=null;return this.nodes.find(function(n){return"text"!=n.kind&&(t=n.getParent(e))}),t},getPath:function(e){var t=this.assertNode(e),n=this.getAncestors(e),r=[];return n.reverse().forEach(function(e){var n=e.nodes.indexOf(t);r.unshift(n),t=e}),r},getPreviousBlock:function(e){var t=this.assertDescendant(e),n=void 0;if("block"==t.kind)n=t.getFirstText();else{n=this.getClosestBlock(e).getFirstText()}var r=this.getPreviousText(n.key);return r?this.getClosestBlock(r.key):null},getPreviousSibling:function(e){e=_normalize2.default.key(e);var t=this.getParent(e),n=t.nodes.takeUntil(function(t){return t.key==e});if(n.size==t.nodes.size)throw new Error('Could not find a child node with key "'+e+'".');return n.last()},getPreviousText:function(e){return e=_normalize2.default.key(e),this.getTexts().takeUntil(function(t){return t.key==e}).last()},getText:function(){return this.nodes.reduce(function(e,t){return e+t.text},"")},getTextAtOffset:function(e){if(0==e)return this.getFirstText();if(e==this.length)return this.getLastText();if(e<0||e>this.length)return null;var t=0;return this.getTexts().find(function(n,r,s){return(t+=n.length)>e})},getTextDirection:function(){var e=(0,_direction2.default)(this.text);return"neutral"==e?void 0:e},getTexts:function(){var e=this.getTextsAsArray();return new _immutable.List(e)},getTextsAsArray:function(){var e=[];return this.nodes.forEach(function(t){"text"==t.kind?e.push(t):e=e.concat(t.getTextsAsArray())}),e},getTextsAtRange:function(e){var t=this.getTextsAtRangeAsArray(e);return new _immutable.List(t)},getTextsAtRangeAsArray:function(e){e=e.normalize(this);var t=e,n=t.startKey,r=t.endKey,s=this.getDescendant(n);if(n==r)return[s];var i=this.getDescendant(r),a=this.getTextsAsArray(),o=a.indexOf(s),u=a.indexOf(i);return a.slice(o,u+1)},hasChild:function(e){return!!this.getChild(e)},hasDescendant:function(e){return!!this.getDescendant(e)},hasNode:function(e){return!!this.getNode(e)},hasVoidParent:function(e){return!!this.getClosest(e,function(e){return e.isVoid})},insertNode:function(e,t){var n=this.getKeys();n.contains(t.key)&&(t=t.regenerateKey()),"text"!=t.kind&&(t=t.mapDescendants(function(e){return n.contains(e.key)?e.regenerateKey():e}));var r=this.nodes.insert(e,t);return this.set("nodes",r)},isLeafBlock:function(){return"block"==this.kind&&this.nodes.every(function(e){return"block"!=e.kind})},isLeafInline:function(){return"inline"==this.kind&&this.nodes.every(function(e){return"inline"!=e.kind})},joinNode:function(e,t,n){var r=n.deep,s=void 0!==r&&r,i=this,a=i.getParent(t.key),o=i==a,u=a.nodes.indexOf(t);if("text"==t.kind){var d=e,c=d.characters;c=c.concat(t.characters),e=e.set("characters",c)}else{var f=e.nodes.size;t.nodes.forEach(function(t,n){e=e.insertNode(f+n,t)}),s&&(e=e.joinNode(e.nodes.get(f-1),e.nodes.get(f),{deep:s}))}return a=a.removeNode(u),i=o?a:i.updateDescendant(a),i=i.updateDescendant(e)},mapChildren:function(e){var t=this,n=this.nodes;return n.forEach(function(r,s){var i=e(r,s,t.nodes);i!=r&&(n=n.set(i.key,i))}),this.set("nodes",n)},mapDescendants:function(e){var t=this,n=this.nodes;return n.forEach(function(r,s){var i=r;if("text"!=i.kind&&(i=i.mapDescendants(e)),(i=e(i,s,t.nodes))!=r){var a=n.indexOf(r);n=n.set(a,i)}}),this.set("nodes",n)},regenerateKey:function(){var e=(0,_generateKey2.default)();return this.set("key",e)},removeDescendant:function(e){e=_normalize2.default.key(e);var t=this,n=t.getParent(e);if(!n)throw new Error('Could not find a descendant node with key "'+e+'".');var r=n.nodes.findIndex(function(t){return t.key===e}),s=t==n,i=n.nodes.splice(r,1);return n=n.set("nodes",i),t=s?n:t.updateDescendant(n)},removeNode:function(e){var t=this.nodes.splice(e,1);return this.set("nodes",t)},splitBlockAtRange:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.startKey,r=e.startOffset,s=this,i=s.assertDescendant(n),a=s.getClosestBlock(i.key),o=r,u=0;a&&"block"==a.kind&&u<t;)o+=a.getOffset(i.key),i=a,a=s.getClosestBlock(a.key),u++;var d=s.getPath(i.key);return this.splitNode(d,o)},splitNode:function(e,t){var n=this,r=n.assertPath(e),s=n.getParent(r.key),i=n==s,a=s.nodes.indexOf(r),o=r,u=void 0,d=void 0;for("text"!=r.kind&&(o=r.getTextAtOffset(t));o&&o!=s;){if("text"==o.kind){var c="text"==r.kind?t:t-r.getOffset(o.key),f=o,l=f.characters,h=l.take(c),g=l.skip(c);u=o.set("characters",h),d=o.set("characters",g).regenerateKey()}else{var y=o,k=y.nodes,A=k.takeUntil(function(e){return e.key==u.key});A=A.size==k.size-1&&u==k.last()?k:A.push(u);var m=k.skipUntil(function(e){return e.key==u.key}).rest().unshift(d);u=o.set("nodes",A),d=o.set("nodes",m).regenerateKey()}o=n.getParent(o.key)}return s=s.removeNode(a),s=s.insertNode(a,d),s=s.insertNode(a,u),n=i?s:n.updateDescendant(s)},splitNodeAfter:function(e,t){var n=this,r=n.assertPath(e);if("text"===r.kind)throw new Error("Cannot split text node at index. Use Node.splitNode at offset instead");var s=r.nodes,i=n.getParent(r.key),a=n==i,o=s.take(t),u=s.skip(t),d=r.set("nodes",o),c=r.set("nodes",u).regenerateKey(),f=i.nodes.indexOf(r);return i=i.removeNode(f),i=i.insertNode(f,c),i=i.insertNode(f,d),n=a?i:n.updateDescendant(i)},updateDescendant:function(e){var t=this.assertDescendant(e.key);return this.getAncestors(e.key).reverse().forEach(function(n){var r=n,s=r.nodes,i=s.indexOf(t);t=n,s=s.set(i,e),n=n.set("nodes",s),e=n}),e},validate:function(e){return e.__validate(this)},areDescendantSorted:function(e,t){return(0,_warn2.default)("The Node.areDescendantSorted(first, second) method is deprecated, please use `Node.areDescendantsSorted(first, second) instead."),this.areDescendantsSorted(e,t)},concatChildren:function(e){return(0,_warn2.default)("The `Node.concatChildren(nodes)` method is deprecated."),e=this.nodes.concat(e),this.set("nodes",e)},decorateTexts:function(e){return(0,_warn2.default)("The `Node.decorateTexts(decorator) method is deprecated."),this.mapDescendants(function(t){return"text"==t.kind?t.decorateCharacters(e):t})},filterDescendantsDeep:function(e){return(0,_warn2.default)("The Node.filterDescendantsDeep(iterator) method is deprecated."),this.nodes.reduce(function(t,n,r,s){return"text"!=n.kind&&(t=t.concat(n.filterDescendantsDeep(e))),e(n,r,s)&&(t=t.push(n)),t},new _immutable.List)},findDescendantDeep:function(e){(0,_warn2.default)("The Node.findDescendantDeep(iterator) method is deprecated.");var t=void 0;return this.forEachDescendant(function(n){if(e(n))return t=n,!1}),t},getChildrenBetween:function(e,t){return(0,_warn2.default)("The `Node.getChildrenBetween(start, end)` method is deprecated."),e=this.assertChild(e),e=this.nodes.indexOf(e),t=this.assertChild(t),t=this.nodes.indexOf(t),this.nodes.slice(e+1,t)},getChildrenBetweenIncluding:function(e,t){return(0,_warn2.default)("The `Node.getChildrenBetweenIncluding(start, end)` method is deprecated."),e=this.assertChild(e),e=this.nodes.indexOf(e),t=this.assertChild(t),t=this.nodes.indexOf(t),this.nodes.slice(e,t+1)},getHighestChild:function(e){return(0,_warn2.default)("The `Node.getHighestChild(key) method is deprecated, please use `Node.getFurthestAncestor(key) instead."),this.getFurthestAncestor(e)},getHighestOnlyChildParent:function(e){return(0,_warn2.default)("The `Node.getHighestOnlyChildParent(key)` method is deprecated, please use `Node.getFurthestOnlyChildAncestor` instead."),this.getFurthestOnlyChildAncestor(e)},isInlineSplitAtRange:function(e){if((0,_warn2.default)("The `Node.isInlineSplitAtRange(range)` method is deprecated."),e=e.normalize(this),e.isExpanded)throw new Error;var t=e,n=t.startKey,r=this.getFurthestInline(n)||this.getDescendant(n);return e.isAtStartOf(r)||e.isAtEndOf(r)}};(0,_memoize2.default)(Node,["getBlocks","getBlocksAsArray","getCharacters","getCharactersAsArray","getFirstText","getInlines","getInlinesAsArray","getKeys","getLastText","getMarks","getOrderedMarks","getMarksAsArray","getText","getTextDirection","getTexts","getTextsAsArray","isLeafBlock","isLeafInline"],{takesArguments:!1}),(0,_memoize2.default)(Node,["areDescendantsSorted","getAncestors","getBlocksAtRange","getBlocksAtRangeAsArray","getBlocksByType","getBlocksByTypeAsArray","getCharactersAtRange","getCharactersAtRangeAsArray","getChild","getChildrenBetween","getChildrenBetweenIncluding","getClosestBlock","getClosestInline","getClosestVoid","getCommonAncestor","getComponent","getDecorators","getDepth","getDescendant","getDescendantAtPath","getDescendantDecorators","getFragmentAtRange","getFurthestBlock","getFurthestInline","getFurthestAncestor","getFurthestOnlyChildAncestor","getInlinesAtRange","getInlinesAtRangeAsArray","getInlinesByType","getInlinesByTypeAsArray","getMarksAtRange","getOrderedMarksAtRange","getMarksAtRangeAsArray","getMarksByType","getOrderedMarksByType","getMarksByTypeAsArray","getNextBlock","getNextSibling","getNextText","getNode","getOffset","getOffsetAtRange","getParent","getPath","getPreviousBlock","getPreviousSibling","getPreviousText","getTextAtOffset","getTextsAtRange","getTextsAtRangeAsArray","hasChild","hasDescendant","hasNode","hasVoidParent","isInlineSplitAtRange","validate"],{takesArguments:!0}),exports.default=Node},{"../utils/generate-key":122,"../utils/is-in-range":126,"../utils/memoize":128,"../utils/normalize":131,"../utils/warn":137,"./document":91,direction:5}],95:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_character=require("./character"),_character2=_interopRequireDefault(_character),_mark=require("./mark"),_mark2=_interopRequireDefault(_mark),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_immutable=window.Immutable,DEFAULTS={marks:new _immutable.Set,text:""},Range=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getCharacters",value:function(){var e=this.marks;return _character2.default.createList(this.text.split("").map(function(t){return _character2.default.create({text:t,marks:e})}))}},{key:"kind",get:function(){return"range"}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.isRange(e)?e:(e.text=e.text,e.marks=_mark2.default.createSet(e.marks),new t(e))}},{key:"isRange",value:function(e){return!(!e||!e[_modelTypes2.default.RANGE])}}]),t}(new _immutable.Record(DEFAULTS));Range.prototype[_modelTypes2.default.RANGE]=!0,exports.default=Range},{"../constants/model-types":85,"./character":89,"./mark":93}],96:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function normalizeProperties(e){var t=e.rules,r=void 0===t?[]:t,n=e.nodes,o=e.marks;if(n){var a=normalizeNodes(n);r=r.concat(a)}if(o){var i=normalizeMarks(o);r=r.concat(i)}return{rules:r}}function normalizeNodes(e){var t=[];for(var r in e)!function(r){var n=e[r];("function"==(0,_typeOf2.default)(n)||(0,_isReactComponent2.default)(n))&&(n={render:n}),n.match=function(e){return("block"==e.kind||"inline"==e.kind)&&e.type==r},t.push(n)}(r);return t}function normalizeMarks(e){var t=[];for(var r in e)!function(r){var n=e[r];n.render||n.decorator||n.validate||(n={render:n}),n.render=normalizeMarkComponent(n.render),n.match=function(e){return"mark"==e.kind&&e.type==r},t.push(n)}(r);return t}function normalizeMarkComponent(e){if((0,_isReactComponent2.default)(e))return e;switch((0,_typeOf2.default)(e)){case"function":return e;case"object":return function(t){return _react2.default.createElement("span",{style:e},t.children)};case"string":return function(t){return _react2.default.createElement("span",{className:e},t.children)}}}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_react=window.React,_react2=_interopRequireDefault(_react),_isReactComponent=require("../utils/is-react-component"),_isReactComponent2=_interopRequireDefault(_isReactComponent),_typeOf=require("type-of"),_typeOf2=_interopRequireDefault(_typeOf),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_immutable=window.Immutable,DEFAULTS={rules:[]},Schema=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"__getComponent",value:function(e){var t=this.rules.find(function(t){return t.render&&t.match(e)});if(t)return t.render}},{key:"__getDecorators",value:function(e){return this.rules.filter(function(t){return t.decorate&&t.match(e)}).map(function(t){return function(r){return t.decorate(r,e)}})}},{key:"__validate",value:function(e){var t=void 0,r=this.rules.find(function(r){if(r.validate&&r.match(e))return t=r.validate(e)});if(t)return{rule:r,value:t}}},{key:"kind",get:function(){return"schema"}},{key:"hasValidators",get:function(){return this.rules.some(function(e){return e.validate})}},{key:"hasDecorators",get:function(){return this.rules.some(function(e){return e.decorate})}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.isSchema(e)?e:new t(normalizeProperties(e))}},{key:"isSchema",value:function(e){return!(!e||!e[_modelTypes2.default.SCHEMA])}}]),t}(new _immutable.Record(DEFAULTS));Schema.prototype[_modelTypes2.default.SCHEMA]=!0,exports.default=Schema},{"../constants/model-types":85,"../utils/is-react-component":127,"type-of":76}],97:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function getFirst(e){return"text"==e.kind?e:e.getFirstText()}function getLast(e){return"text"==e.kind?e:e.getLastText()}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,t){var n=[],o=!0,s=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(o=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{!o&&a.return&&a.return()}finally{if(s)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_warn=require("../utils/warn"),_warn2=_interopRequireDefault(_warn),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_immutable=window.Immutable,DEFAULTS={anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isBackward:null,isFocused:!1,marks:null},Selection=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"hasAnchorAtStartOf",value:function(e){if(0!=this.anchorOffset)return!1;var t=getFirst(e);return this.anchorKey==t.key}},{key:"hasAnchorAtEndOf",value:function(e){var t=getLast(e);return this.anchorKey==t.key&&this.anchorOffset==t.length}},{key:"hasAnchorBetween",value:function(e,t,n){return this.anchorOffset<=n&&t<=this.anchorOffset&&this.hasAnchorIn(e)}},{key:"hasAnchorIn",value:function(e){return"text"==e.kind?e.key==this.anchorKey:e.hasDescendant(this.anchorKey)}},{key:"hasFocusAtEndOf",value:function(e){var t=getLast(e);return this.focusKey==t.key&&this.focusOffset==t.length}},{key:"hasFocusAtStartOf",value:function(e){if(0!=this.focusOffset)return!1;var t=getFirst(e);return this.focusKey==t.key}},{key:"hasFocusBetween",value:function(e,t,n){return t<=this.focusOffset&&this.focusOffset<=n&&this.hasFocusIn(e)}},{key:"hasFocusIn",value:function(e){return"text"==e.kind?e.key==this.focusKey:e.hasDescendant(this.focusKey)}},{key:"isAtStartOf",value:function(e){return this.isCollapsed&&this.hasAnchorAtStartOf(e)}},{key:"isAtEndOf",value:function(e){return this.isCollapsed&&this.hasAnchorAtEndOf(e)}},{key:"focus",value:function(){return this.merge({isFocused:!0})}},{key:"blur",value:function(){return this.merge({isFocused:!1})}},{key:"deselect",value:function(){return this.merge({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isFocused:!1,isBackward:!1})}},{key:"flip",value:function(){return this.merge({anchorKey:this.focusKey,anchorOffset:this.focusOffset,focusKey:this.anchorKey,focusOffset:this.anchorOffset,isBackward:null==this.isBackward?null:!this.isBackward})}},{key:"moveAnchor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.anchorKey,n=this.focusKey,o=this.focusOffset,s=this.isBackward,r=this.anchorOffset+e;return this.merge({anchorOffset:r,isBackward:t==n?r>o:s})}},{key:"moveFocus",value:function(){
var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.anchorKey,n=this.anchorOffset,o=this.focusKey,s=this.isBackward,r=this.focusOffset+e;return this.merge({focusOffset:r,isBackward:o==t?n>r:s})}},{key:"moveAnchorTo",value:function(e,t){var n=this.anchorKey,o=this.focusKey,s=this.focusOffset,r=this.isBackward;return this.merge({anchorKey:e,anchorOffset:t,isBackward:e==o?t>s:e==n?r:null})}},{key:"moveFocusTo",value:function(e,t){var n=this.focusKey,o=this.anchorKey,s=this.anchorOffset,r=this.isBackward;return this.merge({focusKey:e,focusOffset:t,isBackward:e==o?s>t:e==n?r:null})}},{key:"moveAnchorOffsetTo",value:function(e){return this.merge({anchorOffset:e,isBackward:this.anchorKey==this.focusKey?e>this.focusOffset:this.isBackward})}},{key:"moveFocusOffsetTo",value:function(e){return this.merge({focusOffset:e,isBackward:this.anchorKey==this.focusKey?this.anchorOffset>e:this.isBackward})}},{key:"moveOffsetsTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.moveAnchorOffsetTo(e).moveFocusOffsetTo(t)}},{key:"moveToAnchor",value:function(){return this.moveFocusTo(this.anchorKey,this.anchorOffset)}},{key:"moveToFocus",value:function(){return this.moveAnchorTo(this.focusKey,this.focusOffset)}},{key:"moveAnchorToStartOf",value:function(e){return e=getFirst(e),this.moveAnchorTo(e.key,0)}},{key:"moveAnchorToEndOf",value:function(e){return e=getLast(e),this.moveAnchorTo(e.key,e.length)}},{key:"moveFocusToStartOf",value:function(e){return e=getFirst(e),this.moveFocusTo(e.key,0)}},{key:"moveFocusToEndOf",value:function(e){return e=getLast(e),this.moveFocusTo(e.key,e.length)}},{key:"moveToRangeOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.moveAnchorToStartOf(e).moveFocusToEndOf(t)}},{key:"normalize",value:function(e){var t=this,n=t.anchorKey,o=t.anchorOffset,s=t.focusKey,r=t.focusOffset,i=t.isBackward;if(null==n||null==s||!e.hasDescendant(n)||!e.hasDescendant(s))return t.merge({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isBackward:!1});var a=e.getDescendant(n),c=e.getDescendant(s);if("text"!=a.kind){(0,_warn2.default)("The selection anchor was set to a Node that is not a Text node. This should not happen and can degrade performance. The node in question was:",a);var u=a.getTextAtOffset(o);o-=a.getOffset(u.key),a=u}if("text"!=c.kind){(0,_warn2.default)("The selection focus was set to a Node that is not a Text node. This should not happen and can degrade performance. The node in question was:",c);var f=c.getTextAtOffset(r);r-=c.getOffset(f.key),c=f}return null==i&&(i=a.key===c.key?o>r:!e.areDescendantsSorted(a.key,c.key)),t.merge({anchorKey:a.key,anchorOffset:o,focusKey:c.key,focusOffset:r,isBackward:i})}},{key:"unset",value:function(){return(0,_warn2.default)("The `Selection.unset` method is deprecated, please switch to using `Selection.deselect` instead."),this.deselect()}},{key:"moveForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,_warn2.default)("The `Selection.moveForward(n)` method is deprecated, please switch to using `Selection.move(n)` instead."),this.move(e)}},{key:"moveBackward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,_warn2.default)("The `Selection.moveBackward(n)` method is deprecated, please switch to using `Selection.move(-n)` (with a negative number) instead."),this.move(0-e)}},{key:"moveAnchorOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,_warn2.default)("The `Selection.moveAnchorOffset(n)` method is deprecated, please switch to using `Selection.moveAnchor(n)` instead."),this.moveAnchor(e)}},{key:"moveFocusOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,_warn2.default)("The `Selection.moveFocusOffset(n)` method is deprecated, please switch to using `Selection.moveFocus(n)` instead."),this.moveFocus(e)}},{key:"moveStartOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,_warn2.default)("The `Selection.moveStartOffset(n)` method is deprecated, please switch to using `Selection.moveStart(n)` instead."),this.moveStart(e)}},{key:"moveEndOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,_warn2.default)("The `Selection.moveEndOffset(n)` method is deprecated, please switch to using `Selection.moveEnd(n)` instead."),this.moveEnd(e)}},{key:"extendForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,_warn2.default)("The `Selection.extendForward(n)` method is deprecated, please switch to using `Selection.extend(n)` instead."),this.extend(e)}},{key:"extendBackward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,_warn2.default)("The `Selection.extendBackward(n)` method is deprecated, please switch to using `Selection.extend(-n)` (with a negative number) instead."),this.extend(0-e)}},{key:"moveToOffsets",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return(0,_warn2.default)("The `Selection.moveToOffsets` method is deprecated, please switch to using `Selection.moveOffsetsTo` instead."),this.moveOffsetsTo(e,t)}},{key:"kind",get:function(){return"selection"}},{key:"isBlurred",get:function(){return!this.isFocused}},{key:"isCollapsed",get:function(){return this.anchorKey==this.focusKey&&this.anchorOffset==this.focusOffset}},{key:"isExpanded",get:function(){return!this.isCollapsed}},{key:"isForward",get:function(){return null==this.isBackward?null:!this.isBackward}},{key:"isSet",get:function(){return null!=this.anchorKey&&null!=this.focusKey}},{key:"isUnset",get:function(){return!this.isSet}},{key:"startKey",get:function(){return this.isBackward?this.focusKey:this.anchorKey}},{key:"startOffset",get:function(){return this.isBackward?this.focusOffset:this.anchorOffset}},{key:"endKey",get:function(){return this.isBackward?this.anchorKey:this.focusKey}},{key:"endOffset",get:function(){return this.isBackward?this.anchorOffset:this.focusOffset}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.isSelection(e)?e:new t(e)}},{key:"isSelection",value:function(e){return!(!e||!e[_modelTypes2.default.SELECTION])}}]),t}(new _immutable.Record(DEFAULTS));Selection.prototype[_modelTypes2.default.SELECTION]=!0;var MOVE_METHODS=[["move",""],["move","To"],["move","ToStartOf"],["move","ToEndOf"]];MOVE_METHODS.forEach(function(e){var t=_slicedToArray(e,2),n=t[0],o=t[1];Selection.prototype[""+n+o]=function(){var e;return(e=this[n+"Anchor"+o].apply(this,arguments))[n+"Focus"+o].apply(e,arguments)}});var EDGE_METHODS=[["has","AtStartOf",!0],["has","AtEndOf",!0],["has","Between",!0],["has","In",!0],["collapseTo",""],["move",""],["moveTo",""],["move","To"],["move","OffsetTo"]];EDGE_METHODS.forEach(function(e){var t=_slicedToArray(e,3),n=t[0],o=t[1],s=t[2],r=n+"Anchor"+o,i=n+"Focus"+o;Selection.prototype[n+"Start"+o]=function(){return this.isBackward?this[i].apply(this,arguments):this[r].apply(this,arguments)},Selection.prototype[n+"End"+o]=function(){return this.isBackward?this[r].apply(this,arguments):this[i].apply(this,arguments)},s&&(Selection.prototype[n+"Edge"+o]=function(){return this[r].apply(this,arguments)||this[i].apply(this,arguments)})});var ALIAS_METHODS=[["collapseTo","moveTo"],["collapseToAnchor","moveToAnchor"],["collapseToFocus","moveToFocus"],["collapseToStart","moveToStart"],["collapseToEnd","moveToEnd"],["collapseToStartOf","moveToStartOf"],["collapseToEndOf","moveToEndOf"],["extend","moveFocus"],["extendTo","moveFocusTo"],["extendToStartOf","moveFocusToStartOf"],["extendToEndOf","moveFocusToEndOf"]];ALIAS_METHODS.forEach(function(e){var t=_slicedToArray(e,2),n=t[0],o=t[1];Selection.prototype[n]=function(){return this[o].apply(this,arguments)}}),exports.default=Selection},{"../constants/model-types":85,"../utils/warn":137}],98:[function(require,module,exports){"use strict";function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}function _toConsumableArray(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}function _objectWithoutProperties(r,e){var t={};for(var o in r)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}function _classCallCheck(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?r:e}function _inherits(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}function assertState(r){if(!_state2.default.isState(r))throw new Error("A plugin returned an unexpected state value: "+r)}function resolveSchema(r){var e=[],t=!0,o=!1,n=void 0;try{for(var a,i=r[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var l=a.value;if(null!=l.schema){var u=_schema3.default.create(l.schema);e=e.concat(u.rules)}}}catch(r){o=!0,n=r}finally{try{!t&&i.return&&i.return()}finally{if(o)throw n}}return _schema3.default.create({rules:e})}function resolvePlugins(r){var e=r.plugins,t=void 0===e?[]:e,o=_objectWithoutProperties(r,["plugins"]),n=(0,_core2.default)(r);return[o].concat(_toConsumableArray(t),[n])}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function r(r,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}return function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}}(),_core=require("../plugins/core"),_core2=_interopRequireDefault(_core),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_schema2=require("./schema"),_schema3=_interopRequireDefault(_schema2),_state=require("./state"),_state2=_interopRequireDefault(_state),_immutable=window.Immutable,debug=(0,_debug2.default)("slate:stack"),EVENT_HANDLER_METHODS=["onBeforeInput","onBlur","onFocus","onCopy","onCut","onDrop","onKeyDown","onPaste","onSelect"],STATE_ACCUMULATOR_METHODS=["onBeforeChange","onChange"],DEFAULTS={plugins:[],schema:new _schema3.default},Stack=function(r){function e(){var r,t,o,n;_classCallCheck(this,e);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return t=o=_possibleConstructorReturn(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(i))),o.render=function(r,e,t){debug("render");var n=o.plugins.slice().reverse(),a=void 0,i=!0,l=!1,u=void 0;try{for(var c,s=n[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var f=c.value;f.render&&(a=f.render(t,r,e),t.children=a)}}catch(r){l=!0,u=r}finally{try{!i&&s.return&&s.return()}finally{if(l)throw u}}return a},o.renderPortal=function(r,e){debug("renderPortal");var t=[],n=!0,a=!1,i=void 0;try{for(var l,u=o.plugins[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var c=l.value;if(c.renderPortal){var s=c.renderPortal(r,e);null!=s&&t.push(s)}}}catch(r){a=!0,i=r}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return t},n=t,_possibleConstructorReturn(o,n)}return _inherits(e,r),_createClass(e,[{key:"kind",get:function(){return"stack"}}],[{key:"create",value:function(r){var t=resolvePlugins(r);return new e({plugins:t,schema:resolveSchema(t)})}}]),e}(new _immutable.Record(DEFAULTS)),_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _loop=function(){var r=_step3.value;Stack.prototype[r]=function(e,t){debug(r);for(var o=arguments.length,n=Array(o>2?o-2:0),a=2;a<o;a++)n[a-2]=arguments[a];var i=!0,l=!1,u=void 0;try{for(var c,s=this.plugins[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var f=c.value;if(f[r]){var _=f[r].apply(f,n.concat([e,t]));if(null!=_)return assertState(_),_}}}catch(r){l=!0,u=r}finally{try{!i&&s.return&&s.return()}finally{if(l)throw u}}return e}},_iterator3=EVENT_HANDLER_METHODS[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0)_loop()}catch(r){_didIteratorError3=!0,_iteratorError3=r}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _loop2=function(){var r=_step4.value;Stack.prototype[r]=function(e,t){debug(r),"onChange"==r&&(e=this.onBeforeChange(e,t));for(var o=arguments.length,n=Array(o>2?o-2:0),a=2;a<o;a++)n[a-2]=arguments[a];var i=!0,l=!1,u=void 0;try{for(var c,s=this.plugins[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var f=c.value;if(f[r]){var _=f[r].apply(f,n.concat([e,t]));null!=_&&(assertState(_),e=_)}}}catch(r){l=!0,u=r}finally{try{!i&&s.return&&s.return()}finally{if(l)throw u}}return e}},_iterator4=STATE_ACCUMULATOR_METHODS[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0)_loop2()}catch(r){_didIteratorError4=!0,_iteratorError4=r}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}exports.default=Stack},{"../plugins/core":102,"./schema":96,"./state":99,debug:3}],99:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),_document=require("./document"),_document2=_interopRequireDefault(_document),_core=require("../schemas/core"),_core2=_interopRequireDefault(_core),_selection=require("./selection"),_selection2=_interopRequireDefault(_selection),_transform=require("./transform"),_transform2=_interopRequireDefault(_transform),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_immutable=window.Immutable,History=new _immutable.Record({undos:new _immutable.Stack,redos:new _immutable.Stack}),DEFAULTS={document:new _document2.default,selection:new _selection2.default,history:new History,data:new _immutable.Map,isNative:!1},State=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this;return new _transform2.default(_extends({},e,{state:t}))}},{key:"kind",get:function(){return"state"}},{key:"hasUndos",get:function(){return this.history.undos.size>0}},{key:"hasRedos",get:function(){return this.history.redos.size>0}},{key:"isBlurred",get:function(){return this.selection.isBlurred}},{key:"isFocused",get:function(){return this.selection.isFocused}},{key:"isCollapsed",get:function(){return this.selection.isCollapsed}},{key:"isExpanded",get:function(){return this.selection.isExpanded}},{key:"isBackward",get:function(){return this.selection.isBackward}},{key:"isForward",get:function(){return this.selection.isForward}},{key:"startKey",get:function(){return this.selection.startKey}},{key:"endKey",get:function(){return this.selection.endKey}},{key:"startOffset",get:function(){return this.selection.startOffset}},{key:"endOffset",get:function(){return this.selection.endOffset}},{key:"anchorKey",get:function(){return this.selection.anchorKey}},{key:"focusKey",get:function(){return this.selection.focusKey}},{key:"anchorOffset",get:function(){return this.selection.anchorOffset}},{key:"focusOffset",get:function(){return this.selection.focusOffset}},{key:"startBlock",get:function(){return this.document.getClosestBlock(this.selection.startKey)}},{key:"endBlock",get:function(){return this.document.getClosestBlock(this.selection.endKey)}},{key:"anchorBlock",get:function(){return this.document.getClosestBlock(this.selection.anchorKey)}},{key:"focusBlock",get:function(){return this.document.getClosestBlock(this.selection.focusKey)}},{key:"startInline",get:function(){return this.document.getClosestInline(this.selection.startKey)}},{key:"endInline",get:function(){return this.document.getClosestInline(this.selection.endKey)}},{key:"anchorInline",get:function(){return this.document.getClosestInline(this.selection.anchorKey)}},{key:"focusInline",get:function(){return this.document.getClosestInline(this.selection.focusKey)}},{key:"startText",get:function(){return this.document.getDescendant(this.selection.startKey)}},{key:"endText",get:function(){return this.document.getDescendant(this.selection.endKey)}},{key:"anchorText",get:function(){return this.document.getDescendant(this.selection.anchorKey)}},{key:"focusText",get:function(){return this.document.getDescendant(this.selection.focusKey)}},{key:"characters",get:function(){return this.document.getCharactersAtRange(this.selection)}},{key:"marks",get:function(){return this.selection.isUnset?new _immutable.Set:this.selection.marks||this.document.getMarksAtRange(this.selection)}},{key:"blocks",get:function(){return this.selection.isUnset?new _immutable.List:this.document.getBlocksAtRange(this.selection)}},{key:"fragment",get:function(){return this.selection.isUnset?_document2.default.create():this.document.getFragmentAtRange(this.selection)}},{key:"inlines",get:function(){return this.selection.isUnset?new _immutable.List:this.document.getInlinesAtRange(this.selection)}},{key:"texts",get:function(){return this.selection.isUnset?new _immutable.List:this.document.getTextsAtRange(this.selection)}},{key:"isEmpty",get:function(){var e=this.startOffset,t=this.endOffset;return!!this.isCollapsed||(0==t||0==e)&&0==this.fragment.text.length}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.isState(e))return e;var s=_document2.default.create(e.document),i=_selection2.default.create(e.selection),r=new _immutable.Map;if(i.isUnset){var o=s.getFirstText();i=i.collapseToStartOf(o)}if(n.plugins){var c=!0,u=!1,a=void 0;try{for(var l,f=n.plugins[Symbol.iterator]();!(c=(l=f.next()).done);c=!0){var h=l.value;h.data&&(r=r.merge(h.data))}}catch(e){u=!0,a=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw a}}}e.data&&(r=r.merge(e.data));var d=new t({document:s,selection:i,data:r});return!1===n.normalize?d:d.transform().normalize(_core2.default).apply({save:!1})}},{key:"isState",value:function(e){return!(!e||!e[_modelTypes2.default.STATE])}}]),t}(new _immutable.Record(DEFAULTS));State.prototype[_modelTypes2.default.STATE]=!0,exports.default=State},{"../constants/model-types":85,"../schemas/core":103,"./document":91,"./selection":97,"./transform":101}],100:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_character=require("./character"),_character2=_interopRequireDefault(_character),_mark=require("./mark"),_mark2=_interopRequireDefault(_mark),_range=require("./range"),_range2=_interopRequireDefault(_range),_modelTypes=require("../constants/model-types"),_modelTypes2=_interopRequireDefault(_modelTypes),_memoize=require("../utils/memoize"),_memoize2=_interopRequireDefault(_memoize),_generateKey=require("../utils/generate-key"),_generateKey2=_interopRequireDefault(_generateKey),_immutable=window.Immutable,DEFAULTS={characters:new _immutable.List,key:null},Text=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"addMark",value:function(e,t,r){var a=this.characters.map(function(a,n){if(n<e)return a;if(n>=e+t)return a;var u=a,i=u.marks;return i=i.add(r),a=a.set("marks",i)});return this.set("characters",a)}},{key:"getDecorations",value:function(e){var t=this,r=t.characters;if(0==r.size)return r;var a=!0,n=!1,u=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value,c=s(t);r=r.merge(c)}}catch(e){n=!0,u=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw u}}return r}},{key:"getDecorators",value:function(e){return e.__getDecorators(this)}},{key:"getMarks",value:function(){var e=this.getMarksAsArray();return new _immutable.OrderedSet(e)}},{key:"getMarksAsArray",value:function(){return this.characters.reduce(function(e,t){return e.concat(t.marks.toArray())},[])}},{key:"getMarksAtIndex",value:function(e){if(0==e)return _mark2.default.createSet();var t=this.characters,r=t.get(e-1);return r?r.marks:_mark2.default.createSet()}},{key:"getNode",value:function(e){return this.key==e?this:null}},{key:"getRanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.getDecorations(e),r=[],a=void 0,n=void 0;return 0==t.size?r.push({}):t.forEach(function(e,t){var u=e.marks,i=e.text;if(0==t)return a=e,n={text:i,marks:u},void r.push(n);var o=a.marks;if((0,_immutable.is)(u,o))return a=e,void(n.text+=i);a=e,n={text:i,marks:u},r.push(n)},[]),r=new _immutable.List(r.map(function(e){return new _range2.default(e)}))}},{key:"hasNode",value:function(e){return!!this.getNode(e)}},{key:"insertText",value:function(e,t,r){r=r||this.getMarksAtIndex(e);var a=this.characters,n=_character2.default.createListFromText(t,r);return a=a.slice(0,e).concat(n).concat(a.slice(e)),this.set("characters",a)}},{key:"regenerateKey",value:function(){var e=(0,_generateKey2.default)();return this.set("key",e)}},{key:"removeMark",value:function(e,t,r){var a=this.characters.map(function(a,n){if(n<e)return a;if(n>=e+t)return a;var u=a,i=u.marks;return i=i.remove(r),a=a.set("marks",i)});return this.set("characters",a)}},{key:"removeText",value:function(e,t){var r=this.characters,a=e,n=e+t;return r=r.filterNot(function(e,t){return a<=t&&t<n}),this.set("characters",r)}},{key:"updateMark",value:function(e,t,r,a){var n=this.characters.map(function(n,u){if(u<e)return n;if(u>=e+t)return n;var i=n,o=i.marks;return o.has(r)?(o=o.remove(r),o=o.add(a),n=n.set("marks",o)):n});return this.set("characters",n)}},{key:"validate",value:function(e){return e.__validate(this)}},{key:"kind",get:function(){return"text"}},{key:"isEmpty",get:function(){return""==this.text}},{key:"length",get:function(){return this.text.length}},{key:"text",get:function(){return this.characters.reduce(function(e,t){return e+t.text},"")}}],[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.isText(e)?e:(e.key=e.key||(0,_generateKey2.default)(),e.characters=_character2.default.createList(e.characters),new t(e))}},{key:"createFromString",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,_immutable.Set)();return t.createFromRanges([_range2.default.create({text:e,marks:r})])}},{key:"createFromRanges",value:function(e){return t.create({characters:e.reduce(function(e,t){return t=_range2.default.create(t),e.concat(t.getCharacters())},_character2.default.createList())})}},{key:"createList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _immutable.List.isList(e)?e:new _immutable.List(e.map(t.create))}},{key:"isText",value:function(e){return!(!e||!e[_modelTypes2.default.TEXT])}}]),t}(new _immutable.Record(DEFAULTS));Text.prototype[_modelTypes2.default.TEXT]=!0,(0,_memoize2.default)(Text.prototype,["getMarks","getMarksAsArray"],{takesArguments:!1}),(0,_memoize2.default)(Text.prototype,["getDecorations","getDecorators","getMarksAtIndex","getRanges","validate"],{takesArguments:!0}),exports.default=Text},{"../constants/model-types":85,"../utils/generate-key":122,"../utils/memoize":128,"./character":89,"./mark":93,"./range":95}],101:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function isOnlySelections(e){return e.every(function(e){return"set_selection"==e.type})}function isContiguousInserts(e,t){var r=e.filter(function(e){return"set_selection"!=e.type}),n=t.filter(function(e){return"set_selection"!=e.type});if(!r.length||!n.length)return!1;var s=r.every(function(e){return"insert_text"==e.type}),o=n.every(function(e){return"insert_text"==e.type});if(!s||!o)return!1;var i=r[0],u=n[n.length-1];return i.key==u.key&&i.offset==u.offset+u.text.length}function isContiguousRemoves(e,t){var r=e.filter(function(e){return"set_selection"!=e.type}),n=t.filter(function(e){return"set_selection"!=e.type});if(!r.length||!n.length)return!1;var s=r.every(function(e){return"remove_text"==e.type}),o=n.every(function(e){return"remove_text"==e.type});if(!s||!o)return!1;var i=r[0],u=n[n.length-1];return i.key==u.key&&i.offset+i.length==u.offset}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_transforms=require("../transforms"),_transforms2=_interopRequireDefault(_transforms),debug=(0,_debug2.default)("slate:transform"),Transform=function(){function e(t){_classCallCheck(this,e);var r=t.state;this.state=r,this.operations=[]}return _createClass(e,[{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,r=e.merge,n=e.save,s=e.isNative,o=void 0!==s&&s;t.normalizeSelection();var i=t.state,u=t.operations,a=i.history,f=a.undos,l=f.peek();return u.length?(l&&null==r&&(r=isOnlySelections(u)||isContiguousInserts(u,l)||isContiguousRemoves(u,l)),null==n&&(n=!isOnlySelections(u)),n&&this.save({merge:r}),this.state.set("isNative",!!o)):i}},{key:"kind",get:function(){return"transform"}}]),e}();Object.keys(_transforms2.default).forEach(function(e){Transform.prototype[e]=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return debug(e,{args:r}),_transforms2.default[e].apply(_transforms2.default,[this].concat(r)),this}}),exports.default=Transform},{"../transforms":113,debug:3}],102:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Plugin(){function e(e,t){if(e.isNative)return e;var n=t.getSchema(),r=t.getState();if(r&&e.document==r.document)return e;var a=e.transform().normalize(n).apply({merge:!0});return debug("onBeforeChange"),a}function t(e,t,n,r){var a=n.document,o=n.startKey,s=n.startBlock,i=n.startOffset,l=n.startInline,u=n.startText,c=s.getPreviousText(o),f=c&&s.getClosestInline(c.key),d=s.getNextText(o),p=d&&s.getClosestInline(d.key),m=r.getSchema(),g=a.getDescendantDecorators(o,m),y=u.getDecorations(g),h=0===i?null:y.get(i-1),v=i===y.size?null:y.get(i),_=_character2.default.create({text:e.data,marks:h&&h.marks||v&&v.marks||[]}),C=y.insert(i,_),x=n.transform(),b=(0,_getWindow2.default)(e.target),k=b.getSelection(),O=k.anchorNode,D=k.anchorOffset,S=k.focusNode,T=k.focusOffset,B=(0,_getPoint2.default)(O,D,n,r),N=(0,_getPoint2.default)(S,T,n,r);if(B&&N){var q=n.selection;q.anchorKey===B.key&&q.anchorOffset===B.offset&&q.focusKey===N.key&&q.focusOffset===N.offset||(x=x.select({anchorKey:B.key,anchorOffset:B.offset,focusKey:N.key,focusOffset:N.offset}))}var A=x.insertText(e.data).apply(),K=A.startText,P=K.getDecorations(g),w=n.isCollapsed&&null==n.selection.marks&&""!=n.startText.text&&(!l||!n.selection.isAtStartOf(l))&&(!l||!n.selection.isAtEndOf(l))&&!(f&&!f.isVoid&&0==i)&&!(p&&!p.isVoid&&i==u.length)&&C.equals(P);return w&&(A=A.set("isNative",w)),w||e.preventDefault(),debug("onBeforeInput",{data:t,isNative:w}),A}function n(e,t,n){return debug("onBlur",{data:t}),n.transform().blur().apply()}function r(e,t,n){debug("onCopy",t),o(e,t,n)}function a(e,t,n,r){debug("onCut",t),o(e,t,n),(0,_getWindow2.default)(e.target).requestAnimationFrame(function(){var e=r.getState().transform().delete().apply();r.onChange(e)})}function o(e,t,n){var r=(0,_getWindow2.default)(e.target),a=r.getSelection(),o=n.endBlock,s=n.endInline,i=o&&o.isVoid,l=s&&s.isVoid,u=i||l;if(!a.isCollapsed||u){var c=t.fragment,f=_base2.default.serializeNode(c),d=a.getRangeAt(0),p=d.cloneContents(),m=p.childNodes[0];if(u){var g=d.cloneRange(),y=(0,_findDomNode2.default)(i?o:s);g.setEndAfter(y),p=g.cloneContents(),m=p.childNodes[p.childNodes.length-1].firstChild}if([].slice.call(p.querySelectorAll("[data-slate-zero-width]")).forEach(function(e){return e.parentNode.removeChild(e)}),_environment.IS_CHROME||_environment.IS_SAFARI){[].slice.call(p.querySelectorAll('[contenteditable="false"]')).forEach(function(e){return e.removeAttribute("contenteditable")})}if(3==m.nodeType){var h=r.document.createElement("span");h.appendChild(m),p.appendChild(h),m=h}m.setAttribute("data-slate-fragment",f);var v=r.document.querySelector("body"),_=r.document.createElement("div");_.setAttribute("contenteditable",!0),_.style.position="absolute",_.style.left="-9999px",_.appendChild(p),v.appendChild(_);var C=r.document.createRange();C.selectNodeContents(_),a.removeAllRanges(),a.addRange(C),r.requestAnimationFrame(function(){v.removeChild(_),a.removeAllRanges(),a.addRange(d)})}}function s(e,t,n){switch(debug("onDrop",{data:t}),t.type){case"text":case"html":return u(e,t,n);case"fragment":return l(e,t,n);case"node":return i(e,t,n)}}function i(e,t,n){debug("onDropNode",{data:t});var r=n.selection,a=t.node,o=t.target,s=t.isInternal;s&&r.endKey==o.endKey&&r.endOffset<o.endOffset&&(o=o.move(r.startKey==r.endKey?0-r.endOffset-r.startOffset:0-r.endOffset));var i=n.transform();return s&&i.delete(),i.select(o).insertBlock(a).removeNodeByKey(a.key).apply()}
function l(e,t,n){debug("onDropFragment",{data:t});var r=n.selection,a=t.fragment,o=t.target,s=t.isInternal;s&&r.endKey==o.endKey&&r.endOffset<o.endOffset&&(o=o.move(r.startKey==r.endKey?0-r.endOffset-r.startOffset:0-r.endOffset));var i=n.transform();return s&&i.delete(),i.select(o).insertFragment(a).apply()}function u(e,t,n){debug("onDropText",{data:t});var r=t.text,a=t.target,o=n.document,s=n.transform().select(a),i=o.hasVoidParent(a.anchorKey);if(i){for(var l=o.getNode(a.anchorKey);i&&(l=o.getNextText(l.key));)i=o.hasVoidParent(l.key);l&&s.collapseToStartOf(l)}return r.split("\n").forEach(function(e,t){t>0&&s.splitBlock(),s.insertText(e)}),s.apply()}function c(e,t,n){switch(debug("onKeyDown",{data:t}),t.key){case"enter":return f(e,t,n);case"backspace":return d(e,t,n);case"delete":return p(e,t,n);case"left":return m(e,t,n);case"right":return g(e,t,n);case"up":return y(e,t,n);case"down":return h(e,t,n);case"d":return v(e,t,n);case"h":return _(e,t,n);case"k":return C(e,t,n);case"y":return x(e,t,n);case"z":return b(e,t,n)}}function f(e,t,n){var r=n.document,a=n.startKey;if(r.hasVoidParent(a)){var o=r.getNextText(a);if(!o)return;return n.transform().collapseToStartOf(o).apply()}return n.transform().splitBlock().apply()}function d(e,t,n){var r="Char";return t.isWord&&(r="Word"),t.isLine&&(r="Line"),n.transform()["delete"+r+"Backward"]().apply()}function p(e,t,n){var r="Char";return t.isWord&&(r="Word"),t.isLine&&(r="Line"),n.transform()["delete"+r+"Forward"]().apply()}function m(e,t,n){if(!t.isCtrl&&!t.isAlt&&!n.isExpanded){var r=n.document,a=n.startKey,o=n.startText,s=r.hasVoidParent(a);if(""==o.text||s){e.preventDefault();var i=r.getPreviousText(a);if(!i)return;var l=n.startBlock,u=r.getClosestBlock(i.key),c=r.getClosestInline(i.key);if(u===l&&c&&!c.isVoid){var f=t.isShift?"extend":"move";return n.transform().collapseToEndOf(i)[f](-1).apply()}return n.transform().collapseToEndOf(i).apply()}}}function g(e,t,n){if(!t.isCtrl&&!t.isAlt&&!n.isExpanded){var r=n.document,a=n.startKey,o=n.startText,s=r.hasVoidParent(a);if(""==o.text||s){e.preventDefault();var i=r.getNextText(a);if(!i)return n;if(r.hasVoidParent(i.key))return n.transform().collapseToEndOf(i).apply();var l=n.startBlock,u=r.getClosestBlock(i.key),c=r.getClosestInline(i.key);if(u==l&&c){var f=t.isShift?"extend":"move";return n.transform().collapseToStartOf(i)[f](1).apply()}return n.transform().collapseToStartOf(i).apply()}}}function y(e,t,n){if(_environment.IS_MAC&&!t.isCtrl&&t.isAlt){var r=t.isShift?"extendToStartOf":"collapseToStartOf",a=n.selection,o=n.document,s=n.focusKey,i=n.focusBlock,l=a.hasFocusAtStartOf(i)?o.getPreviousBlock(s):i;if(l){var u=l.getFirstText();return e.preventDefault(),n.transform()[r](u).apply()}}}function h(e,t,n){if(_environment.IS_MAC&&!t.isCtrl&&t.isAlt){var r=t.isShift?"extendToEndOf":"collapseToEndOf",a=n.selection,o=n.document,s=n.focusKey,i=n.focusBlock,l=a.hasFocusAtEndOf(i)?o.getNextBlock(s):i;if(l){var u=l.getLastText();return e.preventDefault(),n.transform()[r](u).apply()}}}function v(e,t,n){if(_environment.IS_MAC&&t.isCtrl)return e.preventDefault(),n.transform().deleteCharForward().apply()}function _(e,t,n){if(_environment.IS_MAC&&t.isCtrl)return e.preventDefault(),n.transform().deleteCharBackward().apply()}function C(e,t,n){if(_environment.IS_MAC&&t.isCtrl)return e.preventDefault(),n.transform().deleteLineForward().apply()}function x(e,t,n){if(t.isMod)return n.transform().redo().apply({save:!1})}function b(e,t,n){if(t.isMod)return n.transform()[t.isShift?"redo":"undo"]().apply({save:!1})}function k(e,t,n){switch(debug("onPaste",{data:t}),t.type){case"fragment":return O(e,t,n);case"text":case"html":return D(e,t,n)}}function O(e,t,n){return debug("onPasteFragment",{data:t}),n.transform().insertFragment(t.fragment).apply()}function D(e,t,n){debug("onPasteText",{data:t});var r=n.transform();return t.text.split("\n").forEach(function(e,t){t>0&&r.splitBlock(),r.insertText(e)}),r.apply()}function S(e,t,n){return debug("onSelect",{data:t}),n.transform().select(t.selection).apply()}function T(e,t,n){return _react2.default.createElement(_content2.default,{autoCorrect:e.autoCorrect,autoFocus:e.autoFocus,className:e.className,children:e.children,editor:n,onBeforeInput:n.onBeforeInput,onBlur:n.onBlur,onFocus:n.onFocus,onChange:n.onChange,onCopy:n.onCopy,onCut:n.onCut,onDrop:n.onDrop,onKeyDown:n.onKeyDown,onPaste:n.onPaste,onSelect:n.onSelect,readOnly:e.readOnly,role:e.role,schema:n.getSchema(),spellCheck:e.spellCheck,state:t,style:e.style,tabIndex:e.tabIndex})}var B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},N=B.placeholder,q=B.placeholderClassName,A=B.placeholderStyle;return{onBeforeChange:e,onBeforeInput:t,onBlur:n,onCopy:r,onCut:a,onDrop:s,onKeyDown:c,onPaste:k,onSelect:S,render:T,schema:{rules:[{match:function(e){return"block"==e.kind},render:function(e){return _react2.default.createElement("div",_extends({},e.attributes,{style:{position:"relative"}}),e.children,N?_react2.default.createElement(_placeholder2.default,{className:q,node:e.node,parent:e.state.document,state:e.state,style:A},N):null)}},{match:function(e){return"inline"==e.kind},render:function(e){return _react2.default.createElement("span",_extends({},e.attributes,{style:{position:"relative"}}),e.children)}}]}}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_base=require("../serializers/base-64"),_base2=_interopRequireDefault(_base),_content=require("../components/content"),_content2=_interopRequireDefault(_content),_character=require("../models/character"),_character2=_interopRequireDefault(_character),_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_getPoint=require("../utils/get-point"),_getPoint2=_interopRequireDefault(_getPoint),_placeholder=require("../components/placeholder"),_placeholder2=_interopRequireDefault(_placeholder),_react=window.React,_react2=_interopRequireDefault(_react),_getWindow=require("get-window"),_getWindow2=_interopRequireDefault(_getWindow),_findDomNode=require("../utils/find-dom-node"),_findDomNode2=_interopRequireDefault(_findDomNode),_environment=require("../constants/environment"),debug=(0,_debug2.default)("slate:core");exports.default=Plugin},{"../components/content":77,"../components/placeholder":81,"../constants/environment":83,"../models/character":89,"../serializers/base-64":104,"../utils/find-dom-node":121,"../utils/get-point":124,debug:3,"get-window":62}],103:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,n){var t=[],i=!0,r=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(i=(u=a.next()).done)&&(t.push(u.value),!n||t.length!==n);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_schema=require("../models/schema"),_schema2=_interopRequireDefault(_schema),_text=require("../models/text"),_text2=_interopRequireDefault(_text),_immutable=window.Immutable,OPTS={normalize:!1},rules=[{match:function(e){return"document"==e.kind},validate:function(e){var n=e.nodes.filter(function(e){return"block"!=e.kind});return n.size?n:null},normalize:function(e,n,t){t.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}},{match:function(e){return"block"==e.kind},validate:function(e){var n=e.nodes.filter(function(e){return"block"!=e.kind&&"inline"!=e.kind&&"text"!=e.kind});return n.size?n:null},normalize:function(e,n,t){t.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}},{match:function(e){return"inline"==e.kind},validate:function(e){var n=e.nodes.filter(function(e){return"inline"!=e.kind&&"text"!=e.kind});return n.size?n:null},normalize:function(e,n,t){t.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}},{match:function(e){return"block"==e.kind||"inline"==e.kind},validate:function(e){return 0==e.nodes.size},normalize:function(e,n){var t=_text2.default.create();e.insertNodeByKey(n.key,0,t,OPTS)}},{match:function(e){return("inline"==e.kind||"block"==e.kind)&&e.isVoid},validate:function(e){return" "!==e.text||1!==e.nodes.size},normalize:function(e,n,t){var i=_text2.default.createFromString(" "),r=n.nodes.size;e.insertNodeByKey(n.key,r,i,OPTS),n.nodes.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}},{match:function(e){return"block"==e.kind},validate:function(e){var n=e.nodes.filter(function(e){return"inline"==e.kind&&""==e.text});return n.size?n:null},normalize:function(e,n,t){if(n.nodes.size==t.size){var i=_text2.default.create();e.insertNodeByKey(n.key,1,i,OPTS)}t.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}},{match:function(e){return"block"==e.kind||"inline"==e.kind},validate:function(e){var n=e.nodes.reduce(function(n,t,i){if("inline"!==t.kind)return n;var r=i>0?e.nodes.get(i-1):null,o=e.nodes.get(i+1),u=!r,a=!o||"inline"==o.kind;return(a||u)&&(n=n.push({insertAfter:a,insertBefore:u,index:i})),n},new _immutable.List);return n.size?n:null},normalize:function(e,n,t){var i=0;t.forEach(function(t){var r=t.index,o=t.insertAfter;t.insertBefore&&(e.insertNodeByKey(n.key,i+r,_text2.default.create(),OPTS),i++),o&&(e.insertNodeByKey(n.key,i+r+1,_text2.default.create(),OPTS),i++)})}},{match:function(e){return"block"==e.kind||"inline"==e.kind},validate:function(e){var n=e.nodes.map(function(n,t){var i=e.nodes.get(t+1);if("text"==n.kind&&i&&"text"==i.kind)return[n,i]}).filter(Boolean);return n.size?n:null},normalize:function(e,n,t){t.reverse().forEach(function(n){var t=_slicedToArray(n,2),i=t[0],r=t[1];return e.joinNodeByKey(r.key,i.key,OPTS)})}},{match:function(e){return"block"==e.kind||"inline"==e.kind},validate:function(e){var n=e.nodes;if(!(n.size<=1)){var t=n.filter(function(e,t){if("text"==e.kind&&!(e.length>0)){var i=t>0?n.get(t-1):null,r=n.get(t+1);if((i||"inline"!=r.kind)&&(r||"inline"!=i.kind)&&(!r||!i||"inline"!=r.kind||"inline"!=i.kind))return!0}});return t.size?t:null}},normalize:function(e,n,t){t.forEach(function(n){e.removeNodeByKey(n.key,OPTS)})}}],SCHEMA=_schema2.default.create({rules:rules});exports.default=SCHEMA},{"../models/schema":96,"../models/text":100}],104:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function encode(e){var r=JSON.stringify(e);return window.btoa(window.encodeURIComponent(r))}function decode(e){var r=window.decodeURIComponent(window.atob(e));return JSON.parse(r)}function deserialize(e,r){var i=decode(e);return _raw2.default.deserialize(i,r)}function deserializeNode(e,r){var i=decode(e);return _raw2.default.deserializeNode(i,r)}function serialize(e,r){return encode(_raw2.default.serialize(e,r))}function serializeNode(e,r){return encode(_raw2.default.serializeNode(e,r))}Object.defineProperty(exports,"__esModule",{value:!0});var _raw=require("./raw"),_raw2=_interopRequireDefault(_raw);exports.default={deserialize:deserialize,deserializeNode:deserializeNode,serialize:serialize,serializeNode:serializeNode}},{"./raw":107}],105:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function addKey(e){return _react2.default.cloneElement(e,{key:key++})}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},_raw=require("./raw"),_raw2=_interopRequireDefault(_raw),_react=window.React,_react2=_interopRequireDefault(_react),_server=window.ReactDOMServer,_server2=_interopRequireDefault(_server),_typeOf=require("type-of"),_typeOf2=_interopRequireDefault(_typeOf),_immutable=window.Immutable,String=new _immutable.Record({kind:"string",text:""}),TEXT_RULE={deserialize:function(e){if("br"==e.tagName)return{kind:"text",text:"\n"};if("#text"==e.nodeName){if(e.value&&e.value.match(/<!--.*?-->/))return;return{kind:"text",text:e.value||e.nodeValue}}},serialize:function(e,r){if("string"==e.kind)return r.split("\n").reduce(function(e,r,t){return 0!=t&&e.push(_react2.default.createElement("br",null)),e.push(r),e},[])}},Html=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,e),_initialiseProps.call(this),this.rules=[].concat(_toConsumableArray(r.rules||[]),[TEXT_RULE]),this.defaultBlockType=r.defaultBlockType||"paragraph","function"==typeof r.parseHtml)this.parseHtml=r.parseHtml;else{if("undefined"==typeof DOMParser)throw new Error("Native DOMParser is not present in this environment; you must supply a parse function via options.parseHtml");this.parseHtml=function(e){return(new DOMParser).parseFromString(e,"text/html").childNodes[0].childNodes[1]}}},_initialiseProps=function(){var e=this;this.deserialize=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.from(e.parseHtml(r).childNodes),i=e.deserializeElements(n),a=e.defaultBlockType,l="string"==typeof a?{type:a}:a;i=i.reduce(function(e,r,t,n){if("block"==r.kind)return e.push(r),e;if(t>0&&"block"!=n[t-1].kind){return e[e.length-1].nodes.push(r),e}var i=_extends({kind:"block",nodes:[r]},l);return e.push(i),e},[]),0===i.length&&(i=[_extends({kind:"block",nodes:[]},l)]);var o={kind:"state",document:{kind:"document",nodes:i}};return t.toRaw?o:_raw2.default.deserialize(o,{terse:!0})},this.deserializeElements=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return r.filter(e.cruftNewline).forEach(function(r){var n=e.deserializeElement(r);switch((0,_typeOf2.default)(n)){case"array":t=t.concat(n);break;case"object":t.push(n)}}),t},this.deserializeElement=function(r){var t=void 0;r.tagName||(r.tagName="");var n=function(r){switch("undefined"!=typeof NodeList&&r instanceof NodeList&&(r=Array.from(r)),(0,_typeOf2.default)(r)){case"array":return e.deserializeElements(r);case"object":return e.deserializeElement(r);case"null":case"undefined":return;default:throw new Error('The `next` argument was called with invalid children: "'+r+'".')}},i=!0,a=!1,l=void 0;try{for(var o,u=e.rules[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var s=o.value;if(s.deserialize){var d=s.deserialize(r,n),f=(0,_typeOf2.default)(d);if("array"!=f&&"object"!=f&&"null"!=f&&"undefined"!=f)throw new Error('A rule returned an invalid deserialized representation: "'+t+'".');if(void 0!==d){if(null===d)return null;t="mark"==d.kind?e.deserializeMark(d):d;break}}}}catch(e){a=!0,l=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw l}}return t||n(r.childNodes)},this.deserializeMark=function(r){var t=r.type,n=r.value,i=function r(i){return"mark"==i.kind?e.deserializeMark(i):("text"==i.kind?(i.ranges||(i.ranges=[{text:i.text}]),i.ranges=i.ranges.map(function(e){return e.marks=e.marks||[],e.marks.push({type:t,value:n}),e})):i.nodes=i.nodes.map(r),i)};return r.nodes.reduce(function(e,r){var t=i(r);return Array.isArray(t)?e.concat(t):(e.push(t),e)},[])},this.serialize=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.document,i=n.nodes.map(e.serializeNode);return!1===t.render?i:_server2.default.renderToStaticMarkup(_react2.default.createElement("body",null,i)).slice(6,-7)},this.serializeNode=function(r){if("text"==r.kind){return r.getRanges().map(e.serializeRange)}var t=r.nodes.map(e.serializeNode),n=!0,i=!1,a=void 0;try{for(var l,o=e.rules[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var u=l.value;if(u.serialize){var s=u.serialize(r,t);if(s)return addKey(s)}}}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}throw new Error('No serializer defined for node of type "'+r.type+'".')},this.serializeRange=function(r){var t=new String({text:r.text}),n=e.serializeString(t);return r.marks.reduce(function(r,t){var n=!0,i=!1,a=void 0;try{for(var l,o=e.rules[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var u=l.value;if(u.serialize){var s=u.serialize(t,r);if(s)return addKey(s)}}}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}throw new Error('No serializer defined for mark of type "'+t.type+'".')},n)},this.serializeString=function(r){var t=!0,n=!1,i=void 0;try{for(var a,l=e.rules[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var o=a.value;if(o.serialize){var u=o.serialize(r,r.text);if(u)return u}}}catch(e){n=!0,i=e}finally{try{!t&&l.return&&l.return()}finally{if(n)throw i}}},this.cruftNewline=function(e){return!("#text"==e.nodeName&&"\n"==e.value)}},key=0;exports.default=Html},{"./raw":107,"type-of":76}],106:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function deserialize(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={kind:"state",document:{kind:"document",nodes:e.split("\n").map(function(e){return{kind:"block",type:"line",nodes:[{kind:"text",ranges:[{text:e,marks:[]}]}]}})}};return r.toRaw?t:_raw2.default.deserialize(t)}function serialize(e){return e.document.nodes.map(function(e){return e.text}).join("\n")}Object.defineProperty(exports,"__esModule",{value:!0});var _raw=require("../serializers/raw"),_raw2=_interopRequireDefault(_raw);exports.default={deserialize:deserialize,serialize:serialize}},{"../serializers/raw":107}],107:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _block=require("../models/block"),_block2=_interopRequireDefault(_block),_character=require("../models/character"),_character2=_interopRequireDefault(_character),_document=require("../models/document"),_document2=_interopRequireDefault(_document),_inline=require("../models/inline"),_inline2=_interopRequireDefault(_inline),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark),_selection=require("../models/selection"),_selection2=_interopRequireDefault(_selection),_state=require("../models/state"),_state2=_interopRequireDefault(_state),_text=require("../models/text"),_text2=_interopRequireDefault(_text),_isEmpty=require("is-empty"),_isEmpty2=_interopRequireDefault(_isEmpty),Raw={deserialize:function(e,t){return Raw.deserializeState(e,t)},deserializeBlock:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.terse&&(e=Raw.untersifyBlock(e)),_block2.default.create({key:e.key,type:e.type,data:e.data,isVoid:e.isVoid,nodes:_block2.default.createList(e.nodes.map(function(e){return Raw.deserializeNode(e,t)}))})},deserializeDocument:function(e,t){return _document2.default.create({key:e.key,data:e.data,nodes:_block2.default.createList(e.nodes.map(function(e){return Raw.deserializeNode(e,t)}))})},deserializeInline:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.terse&&(e=Raw.untersifyInline(e)),_inline2.default.create({key:e.key,type:e.type,data:e.data,isVoid:e.isVoid,nodes:_inline2.default.createList(e.nodes.map(function(e){return Raw.deserializeNode(e,t)}))})},deserializeMark:function(e,t){return _mark2.default.create(e)},deserializeNode:function(e,t){switch(e.kind){case"block":return Raw.deserializeBlock(e,t);case"document":return Raw.deserializeDocument(e,t);case"inline":return Raw.deserializeInline(e,t);case"text":return Raw.deserializeText(e,t);default:throw new Error('Unrecognized node kind "'+e.kind+'".')}},deserializeRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.terse&&(e=Raw.untersifyRange(e));var n=_mark2.default.createSet(e.marks.map(function(e){return Raw.deserializeMark(e,t)}));return _character2.default.createList(e.text.split("").map(function(e){return _character2.default.create({text:e,marks:n})}))},deserializeSelection:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _selection2.default.create({anchorKey:e.anchorKey,anchorOffset:e.anchorOffset,focusKey:e.focusKey,focusOffset:e.focusOffset,isFocused:e.isFocused})},deserializeState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.terse&&(e=Raw.untersifyState(e));var n=Raw.deserializeDocument(e.document,t),r=void 0;return null!=e.selection&&(r=Raw.deserializeSelection(e.selection,t)),_state2.default.create({data:e.data,document:n,selection:r},t)},deserializeText:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.terse&&(e=Raw.untersifyText(e)),_text2.default.create({key:e.key,characters:e.ranges.reduce(function(e,n){return e.concat(Raw.deserializeRange(n,t))},_character2.default.createList())})},serialize:function(e,t){return Raw.serializeState(e,t)},serializeBlock:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={data:e.data.toJSON(),key:e.key,kind:e.kind,isVoid:e.isVoid,type:e.type,nodes:e.nodes.toArray().map(function(e){return Raw.serializeNode(e,t)})};return t.preserveKeys||delete n.key,t.terse?Raw.tersifyBlock(n):n},serializeDocument:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={data:e.data.toJSON(),key:e.key,kind:e.kind,nodes:e.nodes.toArray().map(function(e){return Raw.serializeNode(e,t)})};return t.preserveKeys||delete n.key,t.terse?Raw.tersifyDocument(n):n},serializeInline:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={data:e.data.toJSON(),key:e.key,kind:e.kind,isVoid:e.isVoid,type:e.type,nodes:e.nodes.toArray().map(function(e){return Raw.serializeNode(e,t)})};return t.preserveKeys||delete n.key,t.terse?Raw.tersifyInline(n):n},serializeMark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={data:e.data.toJSON(),kind:e.kind,type:e.type};return t.terse?Raw.tersifyMark(n):n},serializeNode:function(e,t){switch(e.kind){case"block":return Raw.serializeBlock(e,t);case"document":return Raw.serializeDocument(e,t);case"inline":return Raw.serializeInline(e,t);case"text":return Raw.serializeText(e,t);default:throw new Error('Unrecognized node kind "'+e.kind+'".')}},serializeRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={kind:e.kind,text:e.text,marks:e.marks.toArray().map(function(e){return Raw.serializeMark(e,t)})};return t.terse?Raw.tersifyRange(n):n},serializeSelection:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={kind:e.kind,anchorKey:e.anchorKey,anchorOffset:e.anchorOffset,focusKey:e.focusKey,focusOffset:e.focusOffset,isBackward:e.isBackward,isFocused:e.isFocused};return t.terse?Raw.tersifySelection(n):n},serializeState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={document:Raw.serializeDocument(e.document,t),kind:e.kind};return t.preserveSelection&&(n.selection=Raw.serializeSelection(e.selection,t)),t.preserveStateData&&(n.data=e.data.toJSON()),t.terse?Raw.tersifyState(n):n},serializeText:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={key:e.key,kind:e.kind,ranges:e.getRanges().toArray().map(function(e){return Raw.serializeRange(e,t)})};return t.preserveKeys||delete n.key,t.terse?Raw.tersifyText(n):n},tersifyBlock:function(e){var t={};return t.kind=e.kind,t.type=e.type,e.key&&(t.key=e.key),e.isVoid||(t.nodes=e.nodes),e.isVoid&&(t.isVoid=e.isVoid),(0,_isEmpty2.default)(e.data)||(t.data=e.data),t},tersifyDocument:function(e){var t={};return t.nodes=e.nodes,e.key&&(t.key=e.key),(0,_isEmpty2.default)(e.data)||(t.data=e.data),t},tersifyInline:function(e){var t={};return t.kind=e.kind,t.type=e.type,e.key&&(t.key=e.key),e.isVoid||(t.nodes=e.nodes),e.isVoid&&(t.isVoid=e.isVoid),(0,_isEmpty2.default)(e.data)||(t.data=e.data),t},tersifyMark:function(e){var t={};return t.type=e.type,(0,_isEmpty2.default)(e.data)||(t.data=e.data),t},tersifyRange:function(e){var t={};return t.text=e.text,(0,_isEmpty2.default)(e.marks)||(t.marks=e.marks),t},tersifySelection:function(e){return{anchorKey:e.anchorKey,anchorOffset:e.anchorOffset,focusKey:e.focusKey,focusOffset:e.focusOffset,isFocused:e.isFocused}},tersifyState:function(e){var t=e.data,n=e.document,r=e.selection,i=(0,_isEmpty2.default)(t);if(!r&&i)return n;var a={document:n};return i||(a.data=t),r&&(a.selection=r),a},tersifyText:function(e){var t={};return t.kind=e.kind,e.key&&(t.key=e.key),1==e.ranges.length&&null==e.ranges[0].marks?t.text=e.ranges[0].text:t.ranges=e.ranges,t},untersifyBlock:function(e){return!e.isVoid&&e.nodes&&e.nodes.length?e:{key:e.key,data:e.data,kind:e.kind,type:e.type,isVoid:e.isVoid,nodes:[{kind:"text",text:""}]}},untersifyInline:function(e){return!e.isVoid&&e.nodes&&e.nodes.length?e:{key:e.key,data:e.data,kind:e.kind,type:e.type,isVoid:e.isVoid,nodes:[{kind:"text",text:""}]}},untersifyRange:function(e){return{kind:"range",text:e.text,marks:e.marks||[]}},untersifySelection:function(e){return{kind:"selection",anchorKey:e.anchorKey,anchorOffset:e.anchorOffset,focusKey:e.focusKey,focusOffset:e.focusOffset,isBackward:null,isFocused:!1}},untersifyState:function(e){return e.document?{kind:"state",data:e.data,document:e.document,selection:e.selection}:{kind:"state",document:{data:e.data,key:e.key,kind:"document",nodes:e.nodes}}},untersifyText:function(e){return e.ranges?e:{key:e.key,kind:e.kind,ranges:[{text:e.text,marks:e.marks||[]}]}}};exports.default=Raw},{"../models/block":88,"../models/character":89,"../models/document":91,"../models/inline":92,"../models/mark":93,"../models/selection":97,"../models/state":99,"../models/text":100,"is-empty":64}],108:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function addMark(e,t){var n=t.path,o=t.offset,r=t.length,a=t.mark,s=e,d=s.document,u=d.assertPath(n);return u=u.addMark(o,r,a),d=d.updateDescendant(u),e=e.set("document",d)}function insertNode(e,t){var n=t.path,o=t.index,r=t.node,a=e,s=a.document,d=s.assertPath(n),u=s==d;return d=d.insertNode(o,r),s=u?d:s.updateDescendant(d),e=e.set("document",s)}function insertText(e,t){var n=t.path,o=t.offset,r=t.text,a=t.marks,s=e,d=s.document,u=s.selection,c=u,i=c.anchorKey,f=c.focusKey,h=c.anchorOffset,l=c.focusOffset,m=d.assertPath(n);return m=m.insertText(o,r,a),d=d.updateDescendant(m),i==m.key&&h>=o&&(u=u.moveAnchor(r.length)),f==m.key&&l>=o&&(u=u.moveFocus(r.length)),e=e.set("document",d).set("selection",u)}function joinNode(e,t){var n=t.path,o=t.withPath,r=t.deep,a=void 0!==r&&r,s=e,d=s.document,u=s.selection,c=d.assertPath(o),i=d.assertPath(n);if(d=d.joinNode(c,i,{deep:a}),a||"text"==i.kind){var f=u,h=f.anchorKey,l=f.anchorOffset,m=f.focusKey,p=f.focusOffset,v="text"==c.kind?c:c.getLastText(),k="text"==i.kind?i:i.getFirstText();h==k.key&&(u=u.merge({anchorKey:v.key,anchorOffset:l+v.characters.size})),m==k.key&&(u=u.merge({focusKey:v.key,focusOffset:p+v.characters.size}))}return e=e.set("document",d).set("selection",u)}function moveNode(e,t){var n=t.path,o=t.newPath,r=t.newIndex,a=e,s=a.document,d=s.assertPath(n),u=n[n.length-1],c=n.slice(0,-1),i=s.getParent(d.key);i=i.removeNode(u),s="document"===i.kind?i:s.updateDescendant(i);var f=c.every(function(e,t){return e===o[t]}),h=void 0;return f&&c.length===o.length?h=i:f&&u<o[c.length]?(o[c.length]--,h=s.assertPath(o)):h=s.assertPath(o),h=h.insertNode(r,d),s="document"===h.kind?h:s.updateDescendant(h),e=e.set("document",s)}function removeMark(e,t){var n=t.path,o=t.offset,r=t.length,a=t.mark,s=e,d=s.document,u=d.assertPath(n);return u=u.removeMark(o,r,a),d=d.updateDescendant(u),e=e.set("document",d)}function removeNode(e,t){var n=t.path,o=e,r=o.document,a=o.selection,s=a,d=s.startKey,u=s.endKey,c=r.assertPath(n);if(a.isSet){var i=c.hasNode(d),f=c.hasNode(u);if(i){var h=r.getPreviousText(d),l=r.getNextText(d);a=h?a.moveStartTo(h.key,h.length):l?a.moveStartTo(l.key,0):a.deselect()}if(f){var m=r.getPreviousText(u),p=r.getNextText(u);a=m?a.moveEndTo(m.key,m.length):p?a.moveEndTo(p.key,0):a.deselect()}}var v=r.getParent(c.key),k=v.nodes.indexOf(c),y=r==v;return v=v.removeNode(k),r=y?v:r.updateDescendant(v),e=e.set("document",r).set("selection",a)}function removeText(e,t){var n=t.path,o=t.offset,r=t.length,a=o+r,s=e,d=s.document,u=s.selection,c=u,i=c.anchorKey,f=c.focusKey,h=c.anchorOffset,l=c.focusOffset,m=d.assertPath(n);return i==m.key&&h>=a&&(u=u.moveAnchor(-r)),f==m.key&&l>=a&&(u=u.moveFocus(-r)),m=m.removeText(o,r),d=d.updateDescendant(m),e=e.set("document",d).set("selection",u)}function setData(e,t){var n=t.properties,o=e,r=o.data;return r=r.merge(n),e=e.set("data",r)}function setMark(e,t){var n=t.path,o=t.offset,r=t.length,a=t.mark,s=t.newMark,d=e,u=d.document,c=u.assertPath(n);return c=c.updateMark(o,r,a,s),u=u.updateDescendant(c),e=e.set("document",u)}function setNode(e,t){var n=t.path,o=t.properties,r=e,a=r.document,s=a.assertPath(n);return o.nodes&&o.nodes!=s.nodes&&((0,_warn2.default)("Updating a Node's `nodes` property via `setNode()` is not allowed. Use the appropriate insertion and removal operations instead. The opeartion in question was:",t),delete o.nodes),o.key&&o.key!=s.key&&((0,_warn2.default)("Updating a Node's `key` property via `setNode()` is not allowed. There should be no reason to do this. The opeartion in question was:",t),delete o.key),s=s.merge(o),a="document"===s.kind?s:a.updateDescendant(s),e=e.set("document",a)}function setSelection(e,t){var n=_extends({},t.properties),o=e,r=o.document,a=o.selection;return void 0!==n.anchorPath&&(n.anchorKey=null===n.anchorPath?null:r.assertPath(n.anchorPath).key,delete n.anchorPath),void 0!==n.focusPath&&(n.focusKey=null===n.focusPath?null:r.assertPath(n.focusPath).key,delete n.focusPath),a=a.merge(n),a=a.normalize(r),e=e.set("selection",a)}function splitNode(e,t){var n=t.path,o=t.offset,r=t.count,a=e,s=a.document,d=a.selection;if(null==o)return s=s.splitNodeAfter(n,r),e=e.set("document",s);var u=s.assertPath(n),c="text"==u.kind?u:u.getTextAtOffset(o),i="text"==u.kind?o:o-u.getOffset(c.key),f=d,h=f.anchorKey,l=f.anchorOffset,m=f.focusKey,p=f.focusOffset;s=s.splitNode(n,o);var v=c.key==h&&i<=l,k=c.key==m&&i<=p;if(k||v){var y=s.getNextText(c.key);v&&(d=d.merge({anchorKey:y.key,anchorOffset:l-i})),k&&(d=d.merge({focusKey:y.key,focusOffset:p-i}))}return e=e.set("document",s).set("selection",d)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_debug=require("debug"),_debug2=_interopRequireDefault(_debug),_warn=require("../utils/warn"),_warn2=_interopRequireDefault(_warn),debug=(0,_debug2.default)("slate:operation"),Transforms={},OPERATIONS={insert_text:insertText,remove_text:removeText,add_mark:addMark,remove_mark:removeMark,set_mark:setMark,insert_node:insertNode,join_node:joinNode,move_node:moveNode,remove_node:removeNode,set_node:setNode,split_node:splitNode,set_selection:setSelection,set_data:setData};Transforms.applyOperation=function(e,t){var n=e.state,o=e.operations,r=t.type,a=OPERATIONS[r];if(!a)throw new Error('Unknown operation type: "'+r+'".');debug(r,t),e.state=a(n,t),e.operations=o.concat([t])},exports.default=Transforms},{"../utils/warn":137,debug:3}],109:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _normalize=require("../utils/normalize"),_normalize2=_interopRequireDefault(_normalize),Transforms={};Transforms.addMark=function(e,t){t=_normalize2.default.mark(t);var n=e.state,a=n.document,r=n.selection
;if(r.isExpanded)return void e.addMarkAtRange(r,t);if(r.marks){var s=r.marks.add(t),o=r.set("marks",s);return void e.select(o)}var l=a.getMarksAtRange(r).add(t),i=r.set("marks",l);e.select(i)},Transforms.delete=function(e){var t=e.state,n=t.selection;n.isCollapsed||e.snapshotSelection().deleteAtRange(n).collapseToStart().snapshotSelection()},Transforms.deleteBackward=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.state,a=n.selection;e.deleteBackwardAtRange(a,t)},Transforms.deleteCharBackward=function(e){var t=e.state,n=t.selection;e.deleteCharBackwardAtRange(n)},Transforms.deleteLineBackward=function(e){var t=e.state,n=t.selection;e.deleteLineBackwardAtRange(n)},Transforms.deleteWordBackward=function(e){var t=e.state,n=t.selection;e.deleteWordBackwardAtRange(n)},Transforms.deleteForward=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.state,a=n.selection;e.deleteForwardAtRange(a,t)},Transforms.deleteCharForward=function(e){var t=e.state,n=t.selection;e.deleteCharForwardAtRange(n)},Transforms.deleteLineForward=function(e){var t=e.state,n=t.selection;e.deleteLineForwardAtRange(n)},Transforms.deleteWordForward=function(e){var t=e.state,n=t.selection;e.deleteWordForwardAtRange(n)},Transforms.insertBlock=function(e,t){t=_normalize2.default.block(t);var n=e.state,a=n.selection;e.insertBlockAtRange(a,t);var r=e.state.document.getNode(t.key);r&&e.collapseToEndOf(r)},Transforms.insertFragment=function(e,t){var n=e.state,a=n,r=a.document,s=a.selection;if(t.nodes.size){var o=n,l=o.startText,i=o.endText,c=t.getLastText(),d=t.getClosestInline(c.key),f=r.getTexts().map(function(e){return e.key}),m=s.hasEdgeAtEndOf(i)||s.hasEdgeAtStartOf(l);e.deselect(),e.insertFragmentAtRange(s,t),n=e.state,r=n.document;var u=r.getTexts().filter(function(e){return!f.includes(e.key)}),g=m?u.last():u.takeLast(2).first(),v=void 0;v=g&&d?s.collapseToEndOf(g):g?s.collapseToStartOf(g).move(c.length):s.collapseToStart().move(c.length),e.select(v)}},Transforms.insertInline=function(e,t){t=_normalize2.default.inline(t);var n=e.state,a=n.selection;e.insertInlineAtRange(a,t);var r=e.state.document.getNode(t.key);r&&e.collapseToEndOf(r)},Transforms.insertText=function(e,t,n){var a=e.state,r=a.document,s=a.selection;n=n||s.marks,e.insertTextAtRange(s,t,n),s.marks&&r!=e.state.document&&e.select({marks:null})},Transforms.setBlock=function(e,t){var n=e.state,a=n.selection;e.setBlockAtRange(a,t)},Transforms.setInline=function(e,t){var n=e.state,a=n.selection;e.setInlineAtRange(a,t)},Transforms.splitBlock=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.state,a=n.selection;e.snapshotSelection().splitBlockAtRange(a,t).collapseToEnd().snapshotSelection()},Transforms.splitInline=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=e.state,a=n.selection;e.snapshotSelection().splitInlineAtRange(a,t).snapshotSelection()},Transforms.removeMark=function(e,t){t=_normalize2.default.mark(t);var n=e.state,a=n.document,r=n.selection;if(r.isExpanded)return void e.removeMarkAtRange(r,t);if(r.marks){var s=r.marks.remove(t),o=r.set("marks",s);return void e.select(o)}var l=a.getMarksAtRange(r).remove(t),i=r.set("marks",l);e.select(i)},Transforms.toggleMark=function(e,t){t=_normalize2.default.mark(t),e.state.marks.some(function(e){return e.equals(t)})?e.removeMark(t):e.addMark(t)},Transforms.unwrapBlock=function(e,t){var n=e.state,a=n.selection;e.unwrapBlockAtRange(a,t)},Transforms.unwrapInline=function(e,t){var n=e.state,a=n.selection;e.unwrapInlineAtRange(a,t)},Transforms.wrapBlock=function(e,t){var n=e.state,a=n.selection;e.wrapBlockAtRange(a,t)},Transforms.wrapInline=function(e,t){var n=e.state,a=n,r=a.document,s=a.selection,o=void 0,l=s.startKey;if(e.deselect(),e.wrapInlineAtRange(s,t),n=e.state,r=n.document,s.isCollapsed)o=s;else if(0==s.startOffset){var i=r.getAncestors(l).find(function(e){return"inline"==e.kind&&0==e.getOffset(l)}),c=i?r.getPreviousText(i.getFirstText().key):r.getFirstText(),d=r.getNextText(i?i.getLastText().key:c.key);o=s.moveAnchorToEndOf(c).moveFocusToStartOf(d)}else if(s.startKey==s.endKey){var f=r.getNextText(s.startKey);o=s.moveToRangeOf(f)}else{var m=r.getNextText(s.anchorKey),u=r.getDescendant(s.focusKey);o=s.merge({anchorKey:m.key,anchorOffset:0,focusKey:u.key,focusOffset:s.focusOffset})}o=o.normalize(r),e.select(o)},Transforms.wrapText=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,a=e.state,r=a.selection;e.wrapTextAtRange(r,t,n),r.isCollapsed&&e.moveStart(0-t.length),e.moveEnd(0-n.length),r.isForward!=e.state.selection.isForward&&e.flip()},exports.default=Transforms},{"../utils/normalize":131}],110:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _normalize=require("../utils/normalize"),_normalize2=_interopRequireDefault(_normalize),_string=require("../utils/string"),_string2=_interopRequireDefault(_string),_core=require("../schemas/core"),_core2=_interopRequireDefault(_core),_immutable=window.Immutable,Transforms={},OPTS={normalize:!1};Transforms.addMarkAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t.isCollapsed){var r=o.normalize,s=void 0===r||r,a=e.state,i=a.document,d=t.startKey,l=t.startOffset,f=t.endKey,y=t.endOffset;i.getTextsAtRange(t).forEach(function(t){var o=t.key,r=0,a=t.length;o==d&&(r=l),o==f&&(a=y),o==d&&o==f&&(a=y-l),e.addMarkByKey(o,r,a,n,{normalize:s})})}},Transforms.deleteAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.isCollapsed){var o=n.normalize,r=void 0===o||o,s=t.startKey,a=t.startOffset,i=t.endKey,d=t.endOffset;if(s==i){var l=a,f=d-a;return void e.removeTextByKey(s,l,f,{normalize:r})}var y=e.state,c=y,u=c.document,g=u.getCommonAncestor(s,i),k=g.getFurthestAncestor(s),m=g.getFurthestAncestor(i),v=("text"==k.kind?0:k.getOffset(s))+a,B=("text"==m.kind?0:m.getOffset(i))+d;e.splitNodeByKey(k.key,v,OPTS),e.splitNodeByKey(m.key,B,OPTS),y=e.state,u=y.document,g=u.getCommonAncestor(s,i),k=g.getFurthestAncestor(s),m=g.getFurthestAncestor(i);var O=g.nodes.indexOf(k),K=g.nodes.indexOf(m),T=g.nodes.slice(O+1,K+1);T.size&&T.forEach(function(t){e.removeNodeByKey(t.key,OPTS)});var z=u.getClosestBlock(s),h=u.getClosestBlock(u.getNextText(i).key);if(z.key!==h.key){h.nodes.forEach(function(t,n){var o=z.key,r=z.nodes.size+n;e.moveNodeByKey(t.key,o,r,OPTS)});var A=u.getFurthestOnlyChildAncestor(h.key)||h;e.removeNodeByKey(A.key,OPTS)}r&&e.normalizeNodeByKey(g.key,_core2.default)}},Transforms.deleteCharBackwardAtRange=function(e,t,n){var o=e.state,r=o.document,s=t.startKey,a=t.startOffset,i=r.getClosestBlock(s),d=i.getOffset(s),l=d+a,f=i.text,y=_string2.default.getCharOffsetBackward(f,l);e.deleteBackwardAtRange(t,y,n)},Transforms.deleteLineBackwardAtRange=function(e,t,n){var o=e.state,r=o.document,s=t.startKey,a=t.startOffset,i=r.getClosestBlock(s),d=i.getOffset(s),l=d+a;e.deleteBackwardAtRange(t,l,n)},Transforms.deleteWordBackwardAtRange=function(e,t,n){var o=e.state,r=o.document,s=t.startKey,a=t.startOffset,i=r.getClosestBlock(s),d=i.getOffset(s),l=d+a,f=i.text,y=_string2.default.getWordOffsetBackward(f,l);e.deleteBackwardAtRange(t,y,n)},Transforms.deleteBackwardAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,s=void 0===r||r,a=e.state,i=a.document,d=t,l=d.startKey,f=d.focusOffset;if(t.isExpanded)return void e.deleteAtRange(t,{normalize:s});var y=i.getClosestBlock(l);if(y&&y.isVoid)return void e.removeNodeByKey(y.key,{normalize:s});if(y&&!y.isVoid&&y.isEmpty&&1!==i.nodes.size)return void e.removeNodeByKey(y.key,{normalize:s});var c=i.getClosestInline(l);if(c&&c.isVoid)return void e.removeNodeByKey(c.key,{normalize:s});if(!t.isAtStartOf(i)){var u=i.getDescendant(l);if(t.isAtStartOf(u)){var g=i.getPreviousText(u.key),k=i.getClosestBlock(g.key),m=i.getClosestInline(g.key);if(k&&k.isVoid)return void e.removeNodeByKey(k.key,{normalize:s});if(m&&m.isVoid)return void e.removeNodeByKey(m.key,{normalize:s});if(1==n&&k!=y)return t=t.merge({anchorKey:g.key,anchorOffset:g.length}),void e.deleteAtRange(t,{normalize:s})}if(n<f)return t=t.merge({focusOffset:f-n,isBackward:!0}),void e.deleteAtRange(t,{normalize:s});for(var v=u,B=0,O=f;n>O;){v=i.getPreviousText(v.key);var K=O+v.length;if(n<=K){B=K-n;break}O=K}if(i.hasVoidParent(v.key)){var T=i.getClosestVoid(v.key);v=i.getNextText(T.key),B=0}t=t.merge({focusKey:v.key,focusOffset:B,isBackward:!0}),e.deleteAtRange(t,{normalize:s})}},Transforms.deleteCharForwardAtRange=function(e,t,n){var o=e.state,r=o.document,s=t.startKey,a=t.startOffset,i=r.getClosestBlock(s),d=i.getOffset(s),l=d+a,f=i.text,y=_string2.default.getCharOffsetForward(f,l);e.deleteForwardAtRange(t,y,n)},Transforms.deleteLineForwardAtRange=function(e,t,n){var o=e.state,r=o.document,s=t.startKey,a=t.startOffset,i=r.getClosestBlock(s),d=i.getOffset(s),l=d+a;e.deleteForwardAtRange(t,l,n)},Transforms.deleteWordForwardAtRange=function(e,t,n){var o=e.state,r=o.document,s=t.startKey,a=t.startOffset,i=r.getClosestBlock(s),d=i.getOffset(s),l=d+a,f=i.text,y=_string2.default.getWordOffsetForward(f,l);e.deleteForwardAtRange(t,y,n)},Transforms.deleteForwardAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,s=void 0===r||r,a=e.state,i=a.document,d=t,l=d.startKey,f=d.focusOffset;if(t.isExpanded)return void e.deleteAtRange(t,{normalize:s});var y=i.getClosestBlock(l);if(y&&y.isVoid)return void e.removeNodeByKey(y.key,{normalize:s});if(y&&!y.isVoid&&y.isEmpty&&1!==i.nodes.size)return void e.removeNodeByKey(y.key,{normalize:s});var c=i.getClosestInline(l);if(c&&c.isVoid)return void e.removeNodeByKey(c.key,{normalize:s});if(!t.isAtEndOf(i)){var u=i.getDescendant(l);if(t.isAtEndOf(u)){var g=i.getNextText(u.key),k=i.getClosestBlock(g.key),m=i.getClosestInline(g.key);if(k&&k.isVoid)return void e.removeNodeByKey(k.key,{normalize:s});if(m&&m.isVoid)return void e.removeNodeByKey(m.key,{normalize:s});if(1==n&&k!=y)return t=t.merge({focusKey:g.key,focusOffset:0}),void e.deleteAtRange(t,{normalize:s})}if(n<=u.length-f)return t=t.merge({focusOffset:f+n}),void e.deleteAtRange(t,{normalize:s});for(var v=u,B=f,O=u.length-f;n>O;){v=i.getNextText(v.key);var K=O+v.length;if(n<=K){B=n-O;break}O=K}if(i.hasVoidParent(v.key)){var T=i.getClosestVoid(v.key);v=i.getPreviousText(T.key),B=v.length}t=t.merge({focusKey:v.key,focusOffset:B}),e.deleteAtRange(t,{normalize:s})}},Transforms.insertBlockAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=_normalize2.default.block(n);var r=o.normalize,s=void 0===r||r;t.isExpanded&&(e.deleteAtRange(t),t=t.collapseToStart());var a=e.state,i=a.document,d=t,l=d.startKey,f=d.startOffset,y=i.assertDescendant(l),c=i.getClosestBlock(l),u=i.getParent(c.key),g=u.nodes.indexOf(c);if(c.isVoid)e.insertNodeByKey(u.key,g+1,n,{normalize:s});else if(c.isEmpty)e.removeNodeByKey(c.key),e.insertNodeByKey(u.key,g,n,{normalize:s});else if(t.isAtStartOf(c))e.insertNodeByKey(u.key,g,n,{normalize:s});else if(t.isAtEndOf(c))e.insertNodeByKey(u.key,g+1,n,{normalize:s});else{var k=c.getOffset(y.key)+f;e.splitNodeByKey(c.key,k,{normalize:s}),e.insertNodeByKey(u.key,g+1,n,{normalize:s})}s&&e.normalizeNodeByKey(u.key,_core2.default)},Transforms.insertFragmentAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,s=void 0===r||r;if(t.isExpanded&&(e.deleteAtRange(t,OPTS),t=t.collapseToStart()),n.nodes.size){n=n.mapDescendants(function(e){return e.regenerateKey()});var a=t,i=a.startKey,d=a.startOffset,l=e.state,f=l,y=f.document,c=y.getDescendant(i),u=y.getClosestBlock(c.key),g=u.getFurthestAncestor(c.key),k=t.isAtStartOf(u),m=y.getParent(u.key),v=m.nodes.indexOf(u),B=g==c?d:g.getOffset(c.key)+d,O=n.getBlocks(),K=O.first(),T=O.last();if(K==T&&K.isVoid)return void e.insertBlockAtRange(t,K,o);if(K!=T){var z=n.getFurthest(K.key,function(e){return 1==e.nodes.size}),h=z||K,A=m.nodes.indexOf(u);n=n.removeDescendant(h.key),n.nodes.forEach(function(t,n){var o=A+n+1;e.insertNodeByKey(m.key,o,t,OPTS)})}if(0!=d&&e.splitNodeByKey(g.key,B,OPTS),l=e.state,y=l.document,c=y.getDescendant(i),u=y.getClosestBlock(i),g=u.getFurthestAncestor(c.key),K!=T){var N=k?g:u.getNextSibling(g.key),p=N?u.nodes.skipUntil(function(e){return e.key==N.key}):(0,_immutable.List)(),R=T.nodes.size;p.forEach(function(t,n){var o=R+n;e.moveNodeByKey(t.key,T.key,o,OPTS)})}if(u.isEmpty)e.removeNodeByKey(u.key,OPTS),e.insertNodeByKey(m.key,v,K,OPTS);else{var S=u.getFurthestAncestor(c.key),P=u.nodes.indexOf(S);K.nodes.forEach(function(t,n){var o=0==d?0:1,r=P+n+o;e.insertNodeByKey(u.key,r,t,OPTS)})}s&&e.normalizeNodeByKey(m.key,_core2.default)}},Transforms.insertInlineAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,s=void 0===r||r;n=_normalize2.default.inline(n),t.isExpanded&&(e.deleteAtRange(t,OPTS),t=t.collapseToStart());var a=e.state,i=a.document,d=t,l=d.startKey,f=d.startOffset,y=i.getParent(l),c=i.assertDescendant(l),u=y.nodes.indexOf(c);y.isVoid||(e.splitNodeByKey(l,f,OPTS),e.insertNodeByKey(y.key,u+1,n,OPTS),s&&e.normalizeNodeByKey(y.key,_core2.default))},Transforms.insertTextAtRange=function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=r.normalize,a=e.state,i=a.document,d=t.startKey,l=t.startOffset;i.getParent(d).isVoid||(t.isExpanded&&e.deleteAtRange(t,OPTS),void 0!==s&&(s=t.isExpanded),e.insertTextByKey(d,l,n,o,{normalize:s}))},Transforms.removeMarkAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t.isCollapsed){var r=o.normalize,s=void 0===r||r,a=e.state,i=a.document,d=i.getTextsAtRange(t),l=t.startKey,f=t.startOffset,y=t.endKey,c=t.endOffset;d.forEach(function(t){var o=t.key,r=0,a=t.length;o==l&&(r=f),o==y&&(a=c),o==l&&o==y&&(a=c-f),e.removeMarkByKey(o,r,a,n,{normalize:s})})}},Transforms.setBlockAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,s=void 0===r||r;e.state.document.getBlocksAtRange(t).forEach(function(t){e.setNodeByKey(t.key,n,{normalize:s})})},Transforms.setInlineAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,s=void 0===r||r;e.state.document.getInlinesAtRange(t).forEach(function(t){e.setNodeByKey(t.key,n,{normalize:s})})},Transforms.splitBlockAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,s=void 0===r||r;t.isExpanded&&(e.deleteAtRange(t,{normalize:s}),t=t.collapseToStart());for(var a=t,i=a.startKey,d=a.startOffset,l=e.state,f=l.document,y=f.assertDescendant(i),c=f.getClosestBlock(y.key),u=d,g=0;c&&"block"==c.kind&&g<n;)u+=c.getOffset(y.key),y=c,c=f.getClosestBlock(c.key),g++;e.splitNodeByKey(y.key,u,{normalize:s})},Transforms.splitInlineAtRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.normalize,s=void 0===r||r;t.isExpanded&&(e.deleteAtRange(t,{normalize:s}),t=t.collapseToStart());for(var a=t,i=a.startKey,d=a.startOffset,l=e.state,f=l.document,y=f.assertDescendant(i),c=f.getClosestInline(y.key),u=d,g=0;c&&"inline"==c.kind&&g<n;)u+=c.getOffset(y.key),y=c,c=f.getClosestInline(c.key),g++;e.splitNodeByKey(y.key,u,{normalize:s})},Transforms.toggleMarkAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t.isCollapsed){n=_normalize2.default.mark(n);var r=o.normalize,s=void 0===r||r;e.state.document.getMarksAtRange(t).some(function(e){return e.equals(n)})?e.removeMarkAtRange(t,n,{normalize:s}):e.addMarkAtRange(t,n,{normalize:s})}},Transforms.unwrapBlockAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=_normalize2.default.nodeProperties(n);var r=o.normalize,s=void 0===r||r,a=e.state,i=a,d=i.document,l=d.getBlocksAtRange(t);l.map(function(e){return d.getClosest(e.key,function(e){return"block"==e.kind&&((null==n.type||e.type==n.type)&&((null==n.isVoid||e.isVoid==n.isVoid)&&!(null!=n.data&&!e.data.isSuperset(n.data))))})}).filter(function(e){return e}).toOrderedSet().toList().forEach(function(t){var n=t.nodes.first(),o=t.nodes.last(),r=d.getParent(t.key),s=r.nodes.indexOf(t),i=t.nodes.filter(function(e){return l.some(function(t){return e==t||e.hasDescendant(t.key)})}),f=i.first(),y=i.last();if(n==f&&o==y)t.nodes.forEach(function(t,n){e.moveNodeByKey(t.key,r.key,s+n,OPTS)}),e.removeNodeByKey(t.key,OPTS);else if(o==y)t.nodes.skipUntil(function(e){return e==f}).forEach(function(t,n){e.moveNodeByKey(t.key,r.key,s+1+n,OPTS)});else if(n==f)t.nodes.takeUntil(function(e){return e==y}).push(y).forEach(function(t,n){e.moveNodeByKey(t.key,r.key,s+n,OPTS)});else{var c=t.getOffset(f.key);e.splitNodeByKey(t.key,c,OPTS),a=e.state,d=a.document,i.forEach(function(t,n){if(0==n){var o=t;t=d.getNextBlock(t.key),e.removeNodeByKey(o.key,OPTS)}e.moveNodeByKey(t.key,r.key,s+1+n,OPTS)})}}),s&&e.normalizeDocument(_core2.default)},Transforms.unwrapInlineAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=_normalize2.default.nodeProperties(n);var r=o.normalize,s=void 0===r||r,a=e.state,i=a.document;i.getTextsAtRange(t).map(function(e){return i.getClosest(e.key,function(e){return!("inline"!=e.kind||null!=n.type&&e.type!=n.type||null!=n.isVoid&&e.isVoid!=n.isVoid||null!=n.data&&!e.data.isSuperset(n.data))})}).filter(function(e){return e}).toOrderedSet().toList().forEach(function(t){var n=e.state.document.getParent(t.key),o=n.nodes.indexOf(t);t.nodes.forEach(function(t,r){e.moveNodeByKey(t.key,n.key,o+r,OPTS)})}),s&&e.normalizeDocument(_core2.default)},Transforms.wrapBlockAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=_normalize2.default.block(n),n=n.set("nodes",n.nodes.clear());var r=o.normalize,s=void 0===r||r,a=e.state,i=a.document,d=i.getBlocksAtRange(t),l=d.first(),f=d.last(),y=void 0,c=void 0,u=void 0;if(1===d.length?(y=i.getParent(l.key),c=d):y=i.getClosest(l.key,function(e){return!!i.getClosest(f.key,function(t){return e==t})}),null==y&&(y=i),null==c){var g=y.nodes.reduce(function(e,t,n){return(t==l||t.hasDescendant(l.key))&&(e[0]=n),(t==f||t.hasDescendant(f.key))&&(e[1]=n),e},[]);u=g[0],c=y.nodes.slice(g[0],g[1]+1)}null==u&&(u=y.nodes.indexOf(c.first())),e.insertNodeByKey(y.key,u,n,OPTS),c.forEach(function(t,o){e.moveNodeByKey(t.key,n.key,o,OPTS)}),s&&e.normalizeNodeByKey(y.key,_core2.default)},Transforms.wrapInlineAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=e.state,s=r,a=s.document,i=o.normalize,d=void 0===i||i,l=t.startKey,f=t.startOffset,y=t.endKey,c=t.endOffset;if(t.isCollapsed){var u=a.getClosestInline(l);if(!u.isVoid)return;return e.wrapInlineByKey(u.key,n,o)}n=_normalize2.default.inline(n),n=n.set("nodes",n.nodes.clear());var g=a.getBlocksAtRange(t),k=a.getClosestBlock(l),m=a.getClosestBlock(y),v=k.getFurthestAncestor(l),B=m.getFurthestAncestor(y),O=k.nodes.indexOf(v),K=m.nodes.indexOf(B),T=v.key==l?f:v.getOffset(l)+f,z=B.key==y?c:B.getOffset(y)+c;if(k==m){z!=B.length&&e.splitNodeByKey(B.key,z,OPTS),0!=T&&e.splitNodeByKey(v.key,T,OPTS),r=e.state,a=r.document,k=a.getClosestBlock(l),v=k.getFurthestAncestor(l);var h=0==T?v:a.getNextSibling(v.key),A=k.nodes.indexOf(h),N=l==y?h:k.getFurthestAncestor(y),p=k.nodes.skipUntil(function(e){return e==h}).takeUntil(function(e){return e==N}).push(N),R=n.regenerateKey();e.insertNodeByKey(k.key,A,R,OPTS),p.forEach(function(t,n){e.moveNodeByKey(t.key,R.key,n,OPTS)}),d&&e.normalizeNodeByKey(k.key,_core2.default)}else{e.splitNodeByKey(v.key,T,OPTS),e.splitNodeByKey(B.key,z,OPTS),r=e.state,a=r.document,k=a.getDescendant(k.key),m=a.getDescendant(m.key);var S=k.nodes.slice(O+1),P=m.nodes.slice(0,K+1),x=n.regenerateKey(),C=n.regenerateKey();e.insertNodeByKey(k.key,O-1,x,OPTS),e.insertNodeByKey(m.key,K,C,OPTS),S.forEach(function(t,n){e.moveNodeByKey(t.key,x.key,n,OPTS)}),P.forEach(function(t,n){e.moveNodeByKey(t.key,C.key,n,OPTS)}),d&&e.normalizeNodeByKey(k.key,_core2.default).normalizeNodeByKey(m.key,_core2.default),g.slice(1,-1).forEach(function(t){var o=n.regenerateKey();e.insertNodeByKey(t.key,0,o,OPTS),t.nodes.forEach(function(t,n){e.moveNodeByKey(t.key,o.key,n,OPTS)}),d&&e.normalizeNodeByKey(t.key,_core2.default)})}},Transforms.wrapTextAtRange=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=r.normalize,a=void 0===s||s,i=t.startKey,d=t.endKey,l=t.collapseToStart(),f=t.collapseToEnd();i==d&&(f=f.move(n.length)),e.insertTextAtRange(l,n,[],{normalize:a}),e.insertTextAtRange(f,o,[],{normalize:a})},exports.default=Transforms},{"../schemas/core":103,"../utils/normalize":131,"../utils/string":136}],111:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _normalize=require("../utils/normalize"),_normalize2=_interopRequireDefault(_normalize),_core=require("../schemas/core"),_core2=_interopRequireDefault(_core),Transforms={};Transforms.addMarkByKey=function(e,o,t,r,a){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};a=_normalize2.default.mark(a);var i=n.normalize,d=void 0===i||i,s=e.state,y=s.document,l=y.getPath(o);if(e.addMarkOperation(l,t,r,a),d){var m=y.getParent(o);e.normalizeNodeByKey(m.key,_core2.default)}},Transforms.insertNodeByKey=function(e,o,t,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},n=a.normalize,i=void 0===n||n,d=e.state,s=d.document,y=s.getPath(o);e.insertNodeOperation(y,t,r),i&&e.normalizeNodeByKey(o,_core2.default)},Transforms.insertTextByKey=function(e,o,t,r,a){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},i=n.normalize,d=void 0===i||i,s=e.state,y=s.document,l=y.getPath(o);if(e.insertTextOperation(l,t,r,a),d){var m=y.getParent(o);e.normalizeNodeByKey(m.key,_core2.default)}},Transforms.joinNodeByKey=function(e,o,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.normalize,n=void 0===a||a,i=e.state,d=i.document,s=d.getPath(o),y=d.getPath(t);if(e.joinNodeOperation(s,y),n){var l=d.getCommonAncestor(o,t);e.normalizeNodeByKey(l.key,_core2.default)}},Transforms.moveNodeByKey=function(e,o,t,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},n=a.normalize,i=void 0===n||n,d=e.state,s=d.document,y=s.getPath(o),l=s.getPath(t);if(e.moveNodeOperation(y,l,r),i){var m=s.getCommonAncestor(o,t);e.normalizeNodeByKey(m.key,_core2.default)}},Transforms.removeMarkByKey=function(e,o,t,r,a){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};a=_normalize2.default.mark(a);var i=n.normalize,d=void 0===i||i,s=e.state,y=s.document,l=y.getPath(o);if(e.removeMarkOperation(l,t,r,a),d){var m=y.getParent(o);e.normalizeNodeByKey(m.key,_core2.default)}},Transforms.removeNodeByKey=function(e,o){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.normalize,a=void 0===r||r,n=e.state,i=n.document,d=i.getPath(o);if(e.removeNodeOperation(d),a){var s=i.getParent(o);e.normalizeNodeByKey(s.key,_core2.default)}},Transforms.removeTextByKey=function(e,o,t,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},n=a.normalize,i=void 0===n||n,d=e.state,s=d.document,y=s.getPath(o);if(e.removeTextOperation(y,t,r),i){var l=s.getClosestBlock(o);e.normalizeNodeByKey(l.key,_core2.default)}},Transforms.setMarkByKey=function(e,o,t,r,a,n){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};a=_normalize2.default.mark(a),n=_normalize2.default.markProperties(n);var d=i.normalize,s=void 0===d||d,y=a.merge(n),l=e.state,m=l.document,f=m.getPath(o);if(e.setMarkOperation(f,t,r,a,y),s){var v=m.getParent(o);e.normalizeNodeByKey(v.key,_core2.default)}},Transforms.setNodeByKey=function(e,o,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=_normalize2.default.nodeProperties(t);var a=r.normalize,n=void 0===a||a,i=e.state,d=i.document,s=d.getPath(o);if(e.setNodeOperation(s,t),n){var y=o===d.key?d:d.getParent(o);e.normalizeNodeByKey(y.key,_core2.default)}},Transforms.splitNodeByKey=function(e,o,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.normalize,n=void 0===a||a,i=e.state,d=i.document,s=d.getPath(o);if(e.splitNodeAtOffsetOperation(s,t),n){var y=d.getParent(o);e.normalizeNodeByKey(y.key,_core2.default)}},Transforms.unwrapInlineByKey=function(e,o,t,r){var a=e.state,n=a.document,i=a.selection,d=n.assertDescendant(o),s=d.getFirstText(),y=d.getLastText(),l=i.moveToRangeOf(s,y);e.unwrapInlineAtRange(l,t,r)},Transforms.unwrapBlockByKey=function(e,o,t,r){var a=e.state,n=a.document,i=a.selection,d=n.assertDescendant(o),s=d.getFirstText(),y=d.getLastText(),l=i.moveToRangeOf(s,y);e.unwrapBlockAtRange(l,t,r)},Transforms.unwrapNodeByKey=function(e,o){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.normalize,a=void 0===r||r,n=e.state,i=n.document,d=i.getParent(o),s=d.getChild(o),y=d.nodes.indexOf(s),l=0===y,m=y===d.nodes.size-1,f=i.getParent(d.key),v=f.nodes.indexOf(d);if(1===d.nodes.size)e.moveNodeByKey(o,f.key,v,{normalize:!1}),e.removeNodeByKey(d.key,t);else if(l)e.moveNodeByKey(o,f.key,v,t);else if(m)e.moveNodeByKey(o,f.key,v+1,t);else{var u=i.getPath(d.key);e.splitNodeOperation(u,y),e.moveNodeByKey(o,f.key,v+1,{normalize:!1}),a&&e.normalizeNodeByKey(f.key,_core2.default)}},Transforms.wrapInlineByKey=function(e,o,t,r){t=_normalize2.default.inline(t),t=t.set("nodes",t.nodes.clear());var a=e.state.document,n=a.assertDescendant(o),i=a.getParent(n.key),d=i.nodes.indexOf(n);e.insertNodeByKey(i.key,d,t,{normalize:!1}),e.moveNodeByKey(n.key,t.key,0,r)},Transforms.wrapBlockByKey=function(e,o,t,r){t=_normalize2.default.block(t),t=t.set("nodes",t.nodes.clear());var a=e.state.document,n=a.assertDescendant(o),i=a.getParent(n.key),d=i.nodes.indexOf(n);e.insertNodeByKey(i.key,d,t,{normalize:!1}),e.moveNodeByKey(n.key,t.key,0,r)},exports.default=Transforms},{"../schemas/core":103,"../utils/normalize":131}],112:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Transforms={};Transforms.call=function(r,e){for(var a=arguments.length,o=Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];e.apply(void 0,[r].concat(o))},exports.default=Transforms},{}],113:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},_applyOperation=require("./apply-operation"),_applyOperation2=_interopRequireDefault(_applyOperation),_atCurrentRange=require("./at-current-range"),_atCurrentRange2=_interopRequireDefault(_atCurrentRange),_atRange=require("./at-range"),_atRange2=_interopRequireDefault(_atRange),_byKey=require("./by-key"),_byKey2=_interopRequireDefault(_byKey),_call=require("./call"),_call2=_interopRequireDefault(_call),_normalize=require("./normalize"),_normalize2=_interopRequireDefault(_normalize),_onHistory=require("./on-history"),_onHistory2=_interopRequireDefault(_onHistory),_onSelection=require("./on-selection"),_onSelection2=_interopRequireDefault(_onSelection),_operations=require("./operations"),_operations2=_interopRequireDefault(_operations);exports.default=_extends({},_applyOperation2.default,_atCurrentRange2.default,_atRange2.default,_byKey2.default,_call2.default,_normalize2.default,_onHistory2.default,_onSelection2.default,_operations2.default)},{"./apply-operation":108,"./at-current-range":109,"./at-range":110,"./by-key":111,"./call":112,"./normalize":114,"./on-history":115,"./on-selection":116,"./operations":117}],114:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function normalizeNodeAndChildren(e,n,a){if("text"==n.kind)return void normalizeNode(e,n,a);for(var r=n.nodes.toArray().map(function(e){return e.key});r.length;)!function(){for(var t=e.operations.length,o=void 0,i=(new _immutable.Set).asMutable();o=r[0];){var s=n.getChild(o);normalizeNodeAndChildren(e,s,a),i.add(o),r.shift()}i=i.asImmutable(),e.operations.length!=t&&(n=refindNode(e,n),n.nodes.forEach(function(e){i.has(e.key)||r.unshift(e.key)}))}();n&&normalizeNode(e,n,a)}function refindNode(e,n){var a=e.state,r=a.document;return"document"==n.kind?r:r.getDescendant(n.key)}function normalizeNode(e,n,a){function r(e,n){var i=n.validate(a);if(i){var s=i.value;if(i.rule.normalize(e,n,s),n=refindNode(e,n)){if(++o>t)throw new Error("A schema rule could not be validated after sufficient iterations. This is usually due to a `rule.validate` or `rule.normalize` function of a schema being incorrectly written, causing an infinite loop.");r(e,n)}}}var t=a.rules.length,o=0;r(e,n)}function assertSchema(e){if(!_schema2.default.isSchema(e))throw null==e?new Error("You must pass a `schema` object."):new Error("You passed an invalid `schema` object: "+e+".")}Object.defineProperty(exports,"__esModule",{value:!0});var _normalize=require("../utils/normalize"),_normalize2=_interopRequireDefault(_normalize),_schema=require("../models/schema"),_schema2=_interopRequireDefault(_schema),_warn=require("../utils/warn"),_warn2=_interopRequireDefault(_warn),_immutable=window.Immutable,Transforms={};Transforms.normalize=function(e,n){e.normalizeDocument(n),e.normalizeSelection(n)},Transforms.normalizeDocument=function(e,n){var a=e.state,r=a.document;e.normalizeNodeByKey(r.key,n)},Transforms.normalizeNodeByKey=function(e,n,a){if(assertSchema(a),a.hasValidators){n=_normalize2.default.key(n);normalizeNodeAndChildren(e,e.state.document.assertNode(n),a)}},Transforms.normalizeSelection=function(e){var n=e.state,a=n,r=a.document,t=a.selection;if(0!==r.nodes.size){if(t=t.normalize(r),t.isUnset||!r.hasDescendant(t.anchorKey)||!r.hasDescendant(t.focusKey)){t.isUnset||(0,_warn2.default)("The selection was invalid and was reset to start of the document. The selection in question was:",t);var o=r.getFirstText();t=t.merge({anchorKey:o.key,anchorOffset:0,focusKey:o.key,focusOffset:0,isBackward:!1})}n=n.set("selection",t),e.state=n}},exports.default=Transforms},{"../models/schema":96,"../utils/normalize":131,"../utils/warn":137}],115:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Transforms={};Transforms.redo=function(s){var e=s.state,t=e,o=t.history,r=o,n=r.undos,a=r.redos,p=a.peek();p&&(a=a.pop(),n=n.push(p),p.forEach(function(e){s.applyOperation(e)}),e=s.state,o=o.set("undos",n).set("redos",a),e=e.set("history",o),s.state=e)},Transforms.save=function(s){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.merge,o=void 0!==t&&t,r=s.state,n=s.operations,a=r,p=a.history,i=p,u=i.undos,d=i.redos,f=u.peek();n.length&&(o&&f?(u=u.pop(),f=f.concat(n),u=u.push(f)):u=u.push(n),u.size>100&&(u=u.take(100)),d=d.clear(),p=p.set("undos",u).set("redos",d),r=r.set("history",p),s.state=r)},Transforms.undo=function(s){var e=s.state,t=e,o=t.history,r=o,n=r.undos,a=r.redos,p=n.peek();p&&(n=n.pop(),a=a.push(p),p.slice().reverse().forEach(function(e){e.inverse.forEach(function(e){s.applyOperation(e)})}),e=s.state,o=o.set("undos",n).set("redos",a),e=e.set("history",o),s.state=e)},exports.default=Transforms},{}],116:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,t){var o=[],n=!0,r=!1,a=void 0;try{
for(var s,f=e[Symbol.iterator]();!(n=(s=f.next()).done)&&(o.push(s.value),!t||o.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&f.return&&f.return()}finally{if(r)throw a}}return o}return function(t,o){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_warn=require("../utils/warn"),_warn2=_interopRequireDefault(_warn),Transforms={};Transforms.select=function(e,t){e.setSelectionOperation(t)},Transforms.selectAll=function(e){var t=e.state,o=t.document,n=t.selection,r=n.moveToRangeOf(o);e.setSelectionOperation(r)},Transforms.snapshotSelection=function(e){var t=e.state,o=t.selection;e.setSelectionOperation(o,{snapshot:!0})},Transforms.moveTo=function(e,t){(0,_warn2.default)("The `moveTo()` transform is deprecated, please use `select()` instead."),e.select(t)},Transforms.unsetMarks=function(e){(0,_warn2.default)("The `unsetMarks()` transform is deprecated."),e.setSelectionOperation({marks:null})},Transforms.unsetSelection=function(e){(0,_warn2.default)("The `unsetSelection()` transform is deprecated, please use `deselect()` instead."),e.setSelectionOperation({anchorKey:null,anchorOffset:0,focusKey:null,focusOffset:0,isFocused:!1,isBackward:!1})};var PROXY_TRANSFORMS=["blur","collapseTo","collapseToAnchor","collapseToEnd","collapseToEndOf","collapseToFocus","collapseToStart","collapseToStartOf","extend","extendTo","extendToEndOf","extendToStartOf","flip","focus","move","moveAnchor","moveAnchorOffsetTo","moveAnchorTo","moveAnchorToEndOf","moveAnchorToStartOf","moveEnd","moveEndOffsetTo","moveEndTo","moveFocus","moveFocusOffsetTo","moveFocusTo","moveFocusToEndOf","moveFocusToStartOf","moveOffsetsTo","moveStart","moveStartOffsetTo","moveStartTo","moveToEnd","moveToEndOf","moveToRangeOf","moveToStart","moveToStartOf","deselect"];PROXY_TRANSFORMS.forEach(function(e){Transforms[e]=function(t){for(var o=arguments.length,n=Array(o>1?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];var a="deselect"!=e,s=t.state,f=s.document,c=s.selection,i=c[e].apply(c,n);a&&(i=i.normalize(f)),t.setSelectionOperation(i)}});var PREFIXES=["moveTo","collapseTo","extendTo"],DIRECTIONS=["Next","Previous"],KINDS=["Block","Inline","Text"];PREFIXES.forEach(function(e){var t=["Start","End"];"moveTo"==e&&t.push("Range"),t.forEach(function(t){DIRECTIONS.forEach(function(o){KINDS.forEach(function(n){var r="get"+o+n,a="get"+n+"sAtRange",s="Next"==o?"last":"first",f=""+e+t+"Of";Transforms[""+f+o+n]=function(e){var t=e.state,o=t.document,n=t.selection,c=o[a](n),i=c[s](),l=o[r](i.key);if(l){var d=n[f](l);e.setSelectionOperation(d)}}})})})});var DEPRECATED_TRANSFORMS=[["extendBackward","extend","The `extendBackward(n)` transform is deprecated, please use `extend(n)` instead with a negative offset."],["extendForward","extend","The `extendForward(n)` transform is deprecated, please use `extend(n)` instead."],["moveBackward","move","The `moveBackward(n)` transform is deprecated, please use `move(n)` instead with a negative offset."],["moveForward","move","The `moveForward(n)` transform is deprecated, please use `move(n)` instead."],["moveStartOffset","moveStart","The `moveStartOffset(n)` transform is deprecated, please use `moveStart(n)` instead."],["moveEndOffset","moveEnd","The `moveEndOffset(n)` transform is deprecated, please use `moveEnd()` instead."],["moveToOffsets","moveOffsetsTo","The `moveToOffsets()` transform is deprecated, please use `moveOffsetsTo()` instead."],["flipSelection","flip","The `flipSelection()` transform is deprecated, please use `flip()` instead."]];DEPRECATED_TRANSFORMS.forEach(function(e){var t=_slicedToArray(e,3),o=t[0],n=t[1],r=t[2];Transforms[o]=function(e){for(var t=arguments.length,o=Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];(0,_warn2.default)(r);var s=e.state,f=s.document,c=s.selection,i=c[n].apply(c,o).normalize(f);e.setSelectionOperation(i)}}),exports.default=Transforms},{"../utils/warn":137}],117:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _normalize=require("../utils/normalize"),_normalize2=_interopRequireDefault(_normalize),Transforms={};Transforms.addMarkOperation=function(e,t,r,a,n){var o=[{type:"remove_mark",path:t,offset:r,length:a,mark:n}],s={type:"add_mark",path:t,offset:r,length:a,mark:n,inverse:o};e.applyOperation(s)},Transforms.insertNodeOperation=function(e,t,r,a){var n=t.slice().concat([r]),o=[{type:"remove_node",path:n}],s={type:"insert_node",path:t,index:r,node:a,inverse:o};e.applyOperation(s)},Transforms.insertTextOperation=function(e,t,r,a,n){var o=a.length,s=[{type:"remove_text",path:t,offset:r,length:o}],p={type:"insert_text",path:t,offset:r,text:a,marks:n,inverse:s};e.applyOperation(p)},Transforms.joinNodeOperation=function(e,t,r){var a=e.state,n=a.document,o=n.assertPath(r),s=void 0;if("text"===o.kind){s=[{type:"split_node",path:r,offset:o.length}]}else{s=[{type:"split_node",path:r,count:o.nodes.count()}]}var p={type:"join_node",path:t,withPath:r,inverse:s};e.applyOperation(p)},Transforms.moveNodeOperation=function(e,t,r,a){var n=t.slice(0,-1),o=t[t.length-1],s=r.slice().concat([a]),p=[{type:"move_node",path:s,newPath:n,newIndex:o}],i={type:"move_node",path:t,newPath:r,newIndex:a,inverse:p};e.applyOperation(i)},Transforms.removeMarkOperation=function(e,t,r,a,n){var o=[{type:"add_mark",path:t,offset:r,length:a,mark:n}],s={type:"remove_mark",path:t,offset:r,length:a,mark:n,inverse:o};e.applyOperation(s)},Transforms.removeNodeOperation=function(e,t){var r=e.state,a=r.document,n=a.assertPath(t),o=t.slice(0,-1),s=t[t.length-1],p=[{type:"insert_node",path:o,index:s,node:n}],i={type:"remove_node",path:t,inverse:p};e.applyOperation(i)},Transforms.removeTextOperation=function(e,t,r,a){var n=e.state,o=n.document,s=o.assertPath(t),p=s.getRanges(),i=[];p.reduce(function(e,n){var o=n.text,s=n.marks,p=e+o.length;if(e>r+a)return p;if(p<=r)return p;var f=Math.min(p,r+a),h=o.slice(r-e,f-e);return i.push({type:"insert_text",path:t,offset:r,text:h,marks:s}),p},0);var f={type:"remove_text",path:t,offset:r,length:a,inverse:i};e.applyOperation(f)},Transforms.setDataOperation=function(e,t){var r=e.state,a=r.data,n={};for(var o in t)n[o]=a[o];var s=[{type:"set_data",properties:n}],p={type:"set_data",properties:t,inverse:s};e.applyOperation(p)},Transforms.setMarkOperation=function(e,t,r,a,n,o){var s=[{type:"set_mark",path:t,offset:r,length:a,mark:o,newMark:n}],p={type:"set_mark",path:t,offset:r,length:a,mark:n,newMark:o,inverse:s};e.applyOperation(p)},Transforms.setNodeOperation=function(e,t,r){var a=e.state,n=a.document,o=n.assertPath(t),s={};for(var p in r)s[p]=o[p];var i=[{type:"set_node",path:t,properties:s}],f={type:"set_node",path:t,properties:r,inverse:i};e.applyOperation(f)},Transforms.setSelectionOperation=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=_normalize2.default.selectionProperties(t);var a=e.state,n=a.document,o=a.selection,s={},p={};for(var i in t)(r.snapshot||t[i]!=o[i])&&(p[i]=t[i],s[i]=o[i]);var f=["anchorKey","anchorOffset","focusKey","focusOffset"].some(function(e){return p.hasOwnProperty(e)});o.marks&&t.marks==o.marks&&f&&(p.marks=null),p.anchorKey&&(p.anchorPath=n.getPath(p.anchorKey),delete p.anchorKey),s.anchorKey&&(s.anchorPath=n.getPath(s.anchorKey),delete s.anchorKey),p.focusKey&&(p.focusPath=n.getPath(p.focusKey),delete p.focusKey),s.focusKey&&(s.focusPath=n.getPath(s.focusKey),delete s.focusKey);var h=[{type:"set_selection",properties:s}],l={type:"set_selection",properties:p,inverse:h};e.applyOperation(l)},Transforms.splitNodeAtOffsetOperation=function(e,t,r){var a=t.slice();a[t.length-1]+=1;var n=[{type:"join_node",path:a,withPath:t,deep:!0}],o={type:"split_node",path:t,offset:r,count:null,inverse:n};e.applyOperation(o)},Transforms.splitNodeOperation=function(e,t,r){var a=t.slice();a[t.length-1]+=1;var n=[{type:"join_node",path:a,withPath:t,deep:!1}],o={type:"split_node",path:t,offset:null,count:r,inverse:n};e.applyOperation(o)},exports.default=Transforms},{"../utils/normalize":131}],118:[function(require,module,exports){"use strict";function extendSelection(e,t,n){if("function"==typeof e.extend)return e.extend(t,n);var r=document.createRange(),a=document.createRange();a.setStart(e.anchorNode,e.anchorOffset);var o=document.createRange();return o.setStart(t,n),o.compareBoundaryPoints(Range.START_TO_START,a)>=0?(r.setStart(e.anchorNode,e.anchorOffset),r.setEnd(t,n)):(r.setStart(t,n),r.setEnd(e.anchorNode,e.anchorOffset)),e.removeAllRanges(),e.addRange(r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=extendSelection},{}],119:[function(require,module,exports){"use strict";function findClosestNode(e,t){if("function"==typeof e.closest)return e.closest(t);var o=(e.document||e.ownerDocument).querySelectorAll(t),n=void 0,r=e;do{for(n=o.length;--n>=0&&o.item(n)!==r;);}while(n<0&&(r=r.parentElement));return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=findClosestNode},{}],120:[function(require,module,exports){"use strict";function findDeepestNode(e){return e.firstChild?findDeepestNode(e.firstChild):e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=findDeepestNode},{}],121:[function(require,module,exports){"use strict";function findDOMNode(e){var o=window.document.querySelector('[data-key="'+e.key+'"]');if(!o)throw new Error('Unable to find a DOM node for "'+e.key+'". This is\noften because of forgetting to add `props.attributes` to a component\nreturned from `renderNode`.');return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=findDOMNode},{}],122:[function(require,module,exports){"use strict";function generateKey(){return generate()}function setKeyGenerator(e){generate=e}function resetKeyGenerator(){n=0,generate=function(){return""+n++}}Object.defineProperty(exports,"__esModule",{value:!0});var n=void 0,generate=void 0;resetKeyGenerator(),exports.default=generateKey,exports.setKeyGenerator=setKeyGenerator,exports.resetKeyGenerator=resetKeyGenerator},{}],123:[function(require,module,exports){"use strict";function getHtmlFromNativePaste(e,t){var o=(0,_reactDom.findDOMNode)(e),r=o.cloneNode();r.setAttribute("class",""),r.setAttribute("style","position: fixed; left: -9999px"),o.parentNode.insertBefore(r,o),r.focus(),setTimeout(function(){if(r.childElementCount>0){var e=r.innerHTML;r.parentNode.removeChild(r),t(e)}else t()},0)}Object.defineProperty(exports,"__esModule",{value:!0});var _reactDom=window.ReactDOM;exports.default=getHtmlFromNativePaste},{}],124:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getPoint(e,t,f,r){var n=f.document,u=r.getSchema(),o=_offsetKey2.default.findKey(e,t);if(!o)return null;var a=o.key,i=n.getDescendant(a);if(!i)return null;var s=n.getDescendantDecorators(a,u),l=i.getRanges(s);return _offsetKey2.default.findPoint(o,l)}Object.defineProperty(exports,"__esModule",{value:!0});var _offsetKey=require("./offset-key"),_offsetKey2=_interopRequireDefault(_offsetKey);exports.default=getPoint},{"./offset-key":132}],125:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getTransferData(e){var t=getType(e,_transferTypes2.default.FRAGMENT),r=getType(e,_transferTypes2.default.NODE),n=getType(e,"text/html"),a=getType(e,"text/rtf"),s=getType(e,"text/plain"),l=void 0;if(!t&&n&&~n.indexOf(' data-slate-fragment="')){var i=FRAGMENT_MATCHER.exec(n),f=_slicedToArray(i,2),u=(f[0],f[1]);u&&(t=u)}if(s){var o=getEmbeddedTypes(s);o[_transferTypes2.default.FRAGMENT]&&(t=o[_transferTypes2.default.FRAGMENT]),o[_transferTypes2.default.NODE]&&(r=o[_transferTypes2.default.NODE]),o["text/plain"]&&(s=o["text/plain"])}t&&(t=_base2.default.deserializeNode(t)),r&&(r=_base2.default.deserializeNode(r));try{e.items&&e.items.length?l=Array.from(e.items).map(function(e){return"file"==e.kind?e.getAsFile():null}).filter(function(e){return e}):e.files&&e.files.length&&(l=Array.from(e.files))}catch(t){e.files&&e.files.length&&(l=Array.from(e.files))}var d={files:l,fragment:t,html:n,node:r,rich:a,text:s};return d.type=getTransferType(d),d}function getEmbeddedTypes(e){var t="SLATE-DATA-EMBED::";if(e.substring(0,t.length)!==t)return{"text/plain":e};try{return JSON.parse(e.substring(t.length))}catch(e){throw new Error("Unable to parse custom embedded drag data")}}function getTransferType(e){return e.fragment?"fragment":e.node?"node":e.rich&&e.html?"html":e.rich&&e.text?"text":e.files&&e.files.length?"files":e.html?"html":e.text?"text":"unknown"}function getType(e,t){return e.types&&e.types.length?-1!==e.types.indexOf(t)?e.getData(t)||null:null:"text/plain"===t?e.getData("Text")||null:null}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,t){var r=[],n=!0,a=!1,s=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw s}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_base=require("../serializers/base-64"),_base2=_interopRequireDefault(_base),_transferTypes=require("../constants/transfer-types"),_transferTypes2=_interopRequireDefault(_transferTypes),FRAGMENT_MATCHER=/ data-slate-fragment="([^\s]+)"/;exports.default=getTransferData},{"../constants/transfer-types":86,"../serializers/base-64":104}],126:[function(require,module,exports){"use strict";function isInRange(e,t,s){var n=s.startKey,r=s.startOffset,a=s.endKey,f=s.endOffset;return t.key==n&&t.key==a?r<=e&&e<f:t.key==n?r<=e:t.key!=a||e<f}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=isInRange},{}],127:[function(require,module,exports){"use strict";function isReactComponent(e){return e&&e.prototype&&e.prototype.isReactComponent}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=isReactComponent},{}],128:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function memoize(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.takesArguments,i=void 0===a||a,n=!0,_=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done);n=!0)!function(){var t=s.value,r=e[t];if(!r)throw new Error('Object does not have a property named "'+t+'".');e[t]=function(){for(var e=arguments.length,a=Array(e),n=0;n<e;n++)a[n]=arguments[n];if(_isDev2.default){if(!ENABLED)return r.apply(this,a);CACHE_KEY!==this.__cache_key&&(this.__cache_key=CACHE_KEY,this.__cache=new _es6Map2.default)}this.__cache||(this.__cache=new _es6Map2.default);var _=void 0,o=void 0;if(i?(o=[t].concat(a),_=getIn(this.__cache,o)):_=this.__cache.get(t),_!==UNSET)return _===UNDEFINED?void 0:_;var s=r.apply(this,a),u=void 0===s?UNDEFINED:s;return i?this.__cache=setIn(this.__cache,o,u):this.__cache.set(t,u),s}}()}catch(e){_=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(_)throw o}}}function getIn(e,t){var r=!0,a=!1,i=void 0;try{for(var n,_=t[Symbol.iterator]();!(r=(n=_.next()).done);r=!0){var o=n.value;if((e=e.get(o))===UNSET)return UNSET}}catch(e){a=!0,i=e}finally{try{!r&&_.return&&_.return()}finally{if(a)throw i}}return e.get(LEAF)}function setIn(e,t,r){var a=e,i=void 0,n=!0,_=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var c=s.value;i=a.get(c),i===UNSET&&(i=new _es6Map2.default,a.set(c,i)),a=i}}catch(e){_=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(_)throw o}}return i.set(LEAF,r),e}function __clear(){++CACHE_KEY>=Number.MAX_SAFE_INTEGER&&(CACHE_KEY=0)}function __enable(e){ENABLED=e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.__enable=exports.__clear=exports.default=void 0;var _es6Map=require("es6-map"),_es6Map2=_interopRequireDefault(_es6Map),_isDev=require("../constants/is-dev"),_isDev2=_interopRequireDefault(_isDev),ENABLED=!0,CACHE_KEY=0,LEAF={},UNDEFINED={},UNSET=void 0;exports.default=memoize,exports.__clear=__clear,exports.__enable=__enable},{"../constants/is-dev":84,"es6-map":45}],129:[function(require,module,exports){"use strict";function noop(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=noop},{}],130:[function(require,module,exports){"use strict";function normalizeNodeAndOffset(e,d){if(1==e.nodeType&&e.childNodes.length){var t=d==e.childNodes.length,o=t?"backward":"forward",n=t?d-1:d;for(e=getEditableChild(e,n,o);1==e.nodeType&&e.childNodes.length;){e=getEditableChild(e,t?e.childNodes.length-1:0,o)}d=t?e.textContent.length:0}return{node:e,offset:d}}function getEditableChild(e,d,t){for(var o=e.childNodes,n=o[d],l=d,r=!1,i=!1;(8==n.nodeType||1==n.nodeType&&0==n.childNodes.length||1==n.nodeType&&"false"==n.getAttribute("contenteditable"))&&(!r||!i);)l>=o.length?(r=!0,l=d-1,t="backward"):l<0?(i=!0,l=d+1,t="forward"):(n=o[l],"forward"==t&&l++,"backward"==t&&l--);return n||null}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=normalizeNodeAndOffset},{}],131:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function block(e){if(_block2.default.isBlock(e))return e;switch((0,_typeOf2.default)(e)){case"string":case"object":return _block2.default.create(nodeProperties(e));default:throw new Error('Invalid `block` argument! It must be a block, an object, or a string. You passed: "'+e+'".')}}function inline(e){if(_inline2.default.isInline(e))return e;switch((0,_typeOf2.default)(e)){case"string":case"object":return _inline2.default.create(nodeProperties(e));default:throw new Error('Invalid `inline` argument! It must be an inline, an object, or a string. You passed: "'+e+'".')}}function key(e){if("string"==(0,_typeOf2.default)(e))return e;if((0,_warn2.default)("An object was passed to a Node method instead of a `key` string. This was previously supported, but is being deprecated because it can have a negative impact on performance. The object in question was:",e),_block2.default.isBlock(e))return e.key;if(_document2.default.isDocument(e))return e.key;if(_inline2.default.isInline(e))return e.key;if(_text2.default.isText(e))return e.key;throw new Error('Invalid `key` argument! It must be either a block, an inline, a text, or a string. You passed: "'+e+'".')}function mark(e){if(_mark2.default.isMark(e))return e;switch((0,_typeOf2.default)(e)){case"string":case"object":return _mark2.default.create(markProperties(e));default:throw new Error('Invalid `mark` argument! It must be a mark, an object, or a string. You passed: "'+e+'".')}}function markProperties(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};switch((0,_typeOf2.default)(e)){case"string":t.type=e;break;case"object":for(var r in e)"data"==r?void 0!==e[r]&&(t[r]=_data2.default.create(e[r])):t[r]=e[r];break;default:throw new Error('Invalid mark `properties` argument! It must be an object, a string or a mark. You passed: "'+e+'".')}return t}function nodeProperties(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};switch((0,_typeOf2.default)(e)){case"string":t.type=e;break;case"object":void 0!==e.isVoid&&(t.isVoid=!!e.isVoid);for(var r in e)"data"==r?void 0!==e[r]&&(t[r]=_data2.default.create(e[r])):t[r]=e[r];break;default:throw new Error('Invalid node `properties` argument! It must be an object, a string or a node. You passed: "'+e+'".')}return t}function selection(e){if(_selection2.default.isSelection(e))return e;switch((0,_typeOf2.default)(e)){case"object":return _selection2.default.create(e);default:throw new Error('Invalid `selection` argument! It must be a selection or an object. You passed: "'+e+'".')}}function selectionProperties(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};switch((0,_typeOf2.default)(e)){case"object":void 0!==e.anchorKey&&(t.anchorKey=e.anchorKey),void 0!==e.anchorOffset&&(t.anchorOffset=e.anchorOffset),void 0!==e.focusKey&&(t.focusKey=e.focusKey),void 0!==e.focusOffset&&(t.focusOffset=e.focusOffset),void 0!==e.isBackward&&(t.isBackward=!!e.isBackward),void 0!==e.isFocused&&(t.isFocused=!!e.isFocused),void 0!==e.marks&&(t.marks=e.marks);break;default:throw new Error('Invalid selection `properties` argument! It must be an object or a selection. You passed: "'+e+'".')}return t}Object.defineProperty(exports,"__esModule",{value:!0});var _block=require("../models/block"),_block2=_interopRequireDefault(_block),_document=require("../models/document"),_document2=_interopRequireDefault(_document),_inline=require("../models/inline"),_inline2=_interopRequireDefault(_inline),_data=require("../models/data"),_data2=_interopRequireDefault(_data),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark),_selection=require("../models/selection"),_selection2=_interopRequireDefault(_selection),_text=require("../models/text"),_text2=_interopRequireDefault(_text),_warn=require("./warn"),_warn2=_interopRequireDefault(_warn),_typeOf=require("type-of"),_typeOf2=_interopRequireDefault(_typeOf);exports.default={block:block,inline:inline,key:key,mark:mark,markProperties:markProperties,nodeProperties:nodeProperties,selection:selection,selectionProperties:selectionProperties}},{"../models/block":88,"../models/data":90,"../models/document":91,"../models/inline":92,"../models/mark":93,"../models/selection":97,"../models/text":100,"./warn":137,"type-of":76}],132:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function findBounds(e,t){var n=t.get(e),r=t.slice(0,e).reduce(function(e,t){return e+=t.text.length},0);return{start:r,end:r+n.text.length}}function findKey(e,t){var n=(0,_normalizeNodeAndOffset2.default)(e,t),r=n.node,i=n.offset,o=r.parentNode,f=(0,_findClosestNode2.default)(o,SELECTOR);if(!f){var d=(0,_findClosestNode2.default)(o,VOID_SELECTOR);if(!d)return null;f=d.querySelector(SELECTOR),i=f.textContent.length}var a=f.getAttribute(ATTRIBUTE);if(!a)return null;var u=parse(a);return{key:u.key,index:u.index,offset:i}}function findPoint(e,t){var n=e.key,r=e.index,i=e.offset,o=findBounds(r,t),f=o.start,d=o.end;return i=f+i,i=Math.max(i,f),i=Math.min(i,d),{key:n,index:r,start:f,end:d,offset:i}}function parse(e){var t=PARSER.exec(e);if(!t)throw new Error('Invalid offset key string "'+e+'".');var n=_slicedToArray(t,3),r=(n[0],n[1]),i=n[2];return{key:r,index:parseInt(i,10)}}function stringify(e){return e.key+"-"+e.index}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var f,d=e[Symbol.iterator]();!(r=(f=d.next()).done)&&(n.push(f.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_normalizeNodeAndOffset=require("./normalize-node-and-offset"),_normalizeNodeAndOffset2=_interopRequireDefault(_normalizeNodeAndOffset),_findClosestNode=require("./find-closest-node"),_findClosestNode2=_interopRequireDefault(_findClosestNode),PARSER=/^(\w+)(?:-(\d+))?$/,ATTRIBUTE="data-offset-key",SELECTOR="["+ATTRIBUTE+"]",VOID_SELECTOR="[data-slate-void]";exports.default={findBounds:findBounds,findKey:findKey,findPoint:findPoint,parse:parse,stringify:stringify}},{"./find-closest-node":119,"./normalize-node-and-offset":130}],133:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function createChainablePropType(e){function r(r,t,n){if(null!=r[t])return e(r,t,n)}return r.isRequired=function(r,t,n){return null==r[t]?new Error("Required prop `"+t+"` was not specified in `"+n+"`."):e(r,t,n)},r}Object.defineProperty(exports,"__esModule",{value:!0});var _block=require("../models/block"),_block2=_interopRequireDefault(_block),_character=require("../models/character"),_character2=_interopRequireDefault(_character),_document=require("../models/document"),_document2=_interopRequireDefault(_document),_inline=require("../models/inline"),_inline2=_interopRequireDefault(_inline),_mark=require("../models/mark"),_mark2=_interopRequireDefault(_mark),_range=require("../models/range"),_range2=_interopRequireDefault(_range),_schema=require("../models/schema"),_schema2=_interopRequireDefault(_schema),_selection=require("../models/selection"),_selection2=_interopRequireDefault(_selection),_state=require("../models/state"),_state2=_interopRequireDefault(_state),_text=require("../models/text"),_text2=_interopRequireDefault(_text),block=createChainablePropType(function(e,r,t){return _block2.default.isBlock(e[r])?null:new Error(r+" in "+t+" is not a Slate Block")}),character=createChainablePropType(function(e,r,t){return _character2.default.isCharacter(e[r])?null:new Error(r+" in "+t+" is not a Slate Character")}),document=createChainablePropType(function(e,r,t){return _document2.default.isDocument(e[r])?null:new Error(r+" in "+t+" is not a Slate Document")}),inline=createChainablePropType(function(e,r,t){return _inline2.default.isInline(e[r])?null:new Error(r+" in "+t+" is not a Slate Inline")}),mark=createChainablePropType(function(e,r,t){return _mark2.default.isMark(e[r])?null:new Error(r+" in "+t+" is not a Slate Mark")}),range=createChainablePropType(function(e,r,t){return _range2.default.isRange(e[r])?null:new Error(r+" in "+t+" is not a Slate Range")}),schema=createChainablePropType(function(e,r,t){return _schema2.default.isSchema(e[r])?null:new Error(r+" in "+t+" is not a Slate Schema")}),selection=createChainablePropType(function(e,r,t){return _selection2.default.isSelection(e[r])?null:new Error(r+" in "+t+" is not a Slate Selection")}),state=createChainablePropType(function(e,r,t){return _state2.default.isState(e[r])?null:new Error(r+" in "+t+" is not a Slate State "+e[r])}),text=createChainablePropType(function(e,r,t){return _text2.default.isText(e[r])?null:new Error(r+" in "+t+" is not a Slate Text")});exports.default={block:block,character:character,document:document,inline:inline,mark:mark,range:range,schema:schema,selection:selection,state:state,text:text}},{"../models/block":88,"../models/character":89,"../models/document":91,"../models/inline":92,"../models/mark":93,"../models/range":95,"../models/schema":96,"../models/selection":97,"../models/state":99,"../models/text":100}],134:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function scrollToSelection(e){if(e.anchorNode){var t=(0,_getWindow2.default)(e.anchorNode),o=(0,_selectionIsBackward2.default)(e),i=e.getRangeAt(0),r=i.getBoundingClientRect(),n=t.innerWidth,a=t.innerHeight,l=t.pageYOffset,c=t.pageXOffset,d=(o?r.top:r.bottom)+l,s=(o?r.left:r.right)+c,u=s<c||n+c<s?s-n/2:c,f=d<l||a+l<d?d-a/2:l;t.scrollTo(u,f)}}Object.defineProperty(exports,"__esModule",{value:!0});var _getWindow=require("get-window"),_getWindow2=_interopRequireDefault(_getWindow),_selectionIsBackward=require("selection-is-backward"),_selectionIsBackward2=_interopRequireDefault(_selectionIsBackward);exports.default=scrollToSelection},{"get-window":62,"selection-is-backward":75}],135:[function(require,module,exports){"use strict";function setTransferData(t,e,a){try{t.setData(e,a)}catch(i){var r="SLATE-DATA-EMBED::",s={},n=t.getData("text/plain");if(n.substring(0,r.length)===r)try{s=JSON.parse(n.substring(r.length))}catch(t){throw new Error("Unable to parse custom embedded drag data")}else s["text/plain"]=n;s[e]=a,t.setData("text/plain",""+r+JSON.stringify(s))}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=setTransferData},{}],136:[function(require,module,exports){"use strict";function isSurrogate(u){return SURROGATE_START<=u&&u<=SURROGATE_END}function isWord(u,F){if(SPACE.test(u))return!1;if(CHAMELEON.test(u)){var e=F.charAt(0),r=getCharLength(e);e=F.slice(0,r);if(isWord(e,F.slice(r)))return!0}return!PUNCTUATION.test(u)}function getCharLength(u){return isSurrogate(u.charCodeAt(0))?2:1}function getCharOffset(u){return getCharLength(u.charAt(0))}function getCharOffsetBackward(u,F){return u=u.slice(0,F),u=(0,_esrever.reverse)(u),getCharOffset(u)}function getCharOffsetForward(u,F){return u=u.slice(F),getCharOffset(u)}function getWordOffset(u){for(var F=0,e=0,r=!1,t=void 0;t=u.charAt(e);){var A=getCharLength(t);t=u.slice(e,e+A);if(isWord(t,u.slice(e+A)))r=!0,F+=A;else{if(r)break;F+=A}e+=A}return F}function getWordOffsetBackward(u,F){return u=u.slice(0,F),u=(0,_esrever.reverse)(u),getWordOffset(u)}function getWordOffsetForward(u,F){return u=u.slice(F),getWordOffset(u)}Object.defineProperty(exports,"__esModule",{value:!0});var _esrever=require("esrever"),SURROGATE_START=55296,SURROGATE_END=57343,SPACE=/\s/,CHAMELEON=/['\u2018\u2019]/,PUNCTUATION=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/;exports.default={getCharOffsetForward:getCharOffsetForward,getCharOffsetBackward:getCharOffsetBackward,getWordOffsetBackward:getWordOffsetBackward,getWordOffsetForward:getWordOffsetForward}},{esrever:56}],137:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function warn(e){if(_isDev2.default&&"undefined"!=typeof console){for(var r,n=arguments.length,t=Array(n>1?n-1:0),i=1;i<n;i++)t[i-1]=arguments[i];(r=console).warn.apply(r,["Warning: "+e].concat(t))}}Object.defineProperty(exports,"__esModule",{value:!0});var _isDev=require("../constants/is-dev"),_isDev2=_interopRequireDefault(_isDev);exports.default=warn},{"../constants/is-dev":84}]},{},[87])(87)});
